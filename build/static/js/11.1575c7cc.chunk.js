(this["webpackJsonpfireck-cms"]=this["webpackJsonpfireck-cms"]||[]).push([[11],{725:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(10),c=n(48),a=n.n(c),i=(n(0),n(22)),l=n(13),o=n(78),s=n(1);function d(e){var t=e.Component,n=e.props;return new Promise((function(e,c){var d,u=null===(d=document.getElementById("root"))||void 0===d?void 0:d.appendChild(document.createElement("div"));console.log("Wrapper",u),u&&a.a.render(Object(s.jsx)(i.a,{store:l.b,children:Object(s.jsx)(o.a,{children:Object(s.jsx)(t,Object(r.a)(Object(r.a)({},n),{},{proceed:function(t){var n;a.a.unmountComponentAtNode(u),null===(n=u.parentNode)||void 0===n||n.removeChild(u),e(t)}}))})}),u)}))}},728:function(e,t,n){"use strict";var r=n(142),c=n(10),a=n(734),i=n(675),l=n(0),o=n.n(l),s=n(88),d=n.n(s),u=n(1),b=o.a.forwardRef((function(e,t){return Object(u.jsx)("div",Object(c.a)(Object(c.a)({},e),{},{ref:t,children:Object(u.jsx)(a.b,{className:"text-red-500",size:20})}))}));t.a=function(e){var t=e.className,n=void 0===t?"":t,a=e.options,l=e.error,o=e.white,s=void 0!==o&&o,j=Object(r.a)(e,["className","options","error","white"]);return Object(u.jsxs)("div",{className:"".concat(n," relative flex items-center"),children:[Object(u.jsx)("select",Object(c.a)(Object(c.a)({className:d()("px-3 h-34px border-2 border-solid w-full rounded outline-none",{"border-red-400":l,"focus:border-blue-300":!l,"border-gray-300 bg-gray-300":!s,"border-white bg-white":s})},j),{},{spellCheck:!1,children:a.map((function(e,t){return Object(u.jsx)("option",{"data-testid":"select-option-".concat(e.value),value:e.value,children:e.label},"opt-"+t)}))})),l?Object(u.jsx)(i.a,{title:l,placement:"top",children:Object(u.jsx)(b,{className:"absolute right-2 my-auto w-auto"})}):null]})}},732:function(e,t,n){"use strict";var r=n(10),c=n(0),a=n.n(c),i=n(253),l=n.n(i),o=n(675),s=n(88),d=n.n(s),u=n(1),b=a.a.forwardRef((function(e,t){return Object(u.jsx)("div",Object(r.a)(Object(r.a)({},e),{},{ref:t,children:Object(u.jsx)(l.a,{className:"text-red-500 text-xl",fontSize:"inherit"})}))}));t.a=function(e){var t=e.className,n=void 0===t?"":t,r=e.children,c=e.error,a=e.groundColor;return Object(u.jsxs)("div",{className:d()("flex justify-between relative ".concat(n),{"text-white":"black"===a,"text-black":"white"===a}),children:[Object(u.jsx)("div",{children:r}),c?Object(u.jsx)(o.a,{title:c,placement:"top",children:Object(u.jsx)(b,{className:"absolute right-2 my-auto w-auto"})}):null]})}},745:function(e,t,n){"use strict";var r=n(10),c=n(142),a=n(715),i=n(1);t.a=function(e){var t=e.className,n=void 0===t?"":t,l=e.variant,o=void 0===l?"standard":l,s=Object(c.a)(e,["className","variant"]);return Object(i.jsx)(a.a,Object(r.a)(Object(r.a)({},s),{},{className:"outline-none h-26px w-26px rounded ".concat("standard"===o?"bg-orange-300 hover:bg-orange-301":"hover:bg-black hover:bg-opacity-5","  ")+n}))}},746:function(e,t,n){"use strict";var r=n(39),c=n(1);t.a=function(e){var t=e.title,n=e.onCreate,a=e.buttonTitle;return Object(c.jsx)("div",{className:"h-96 bg-gray-300 rounded-md flex w-full p-12",children:Object(c.jsxs)("div",{className:"m-auto",children:[Object(c.jsx)("div",{className:"text-22px mb-5 font-medium text-center",children:t}),Object(c.jsx)(r.a,{"data-testid":"empty-screen-btn",className:"mx-auto bg-orange-300 hover:bg-orange-301 block",onClick:n,children:a})]})})}},757:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r,c,a,i=n(0);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}function s(e,t){var n=e.title,s=e.titleId,d=o(e,["title","titleId"]);return i.createElement("svg",l({width:40,height:9,viewBox:"0 0 40 9",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":s},d),n?i.createElement("title",{id:s},n):null,r||(r=i.createElement("path",{d:"M9.36621 4.67223H30.7241M30.7241 4.67223L28.3085 2.25659M30.7241 4.67223L28.3085 7.08786",stroke:"currentColor",strokeWidth:1.37296,strokeLinecap:"round",strokeLinejoin:"round"})),c||(c=i.createElement("circle",{cx:4.69562,cy:4.49835,r:3.31773,stroke:"currentColor",strokeWidth:1.37296})),a||(a=i.createElement("circle",{cx:35.3948,cy:4.49835,r:3.31773,stroke:"currentColor",strokeWidth:1.37296})))}var d=i.forwardRef(s);n.p},758:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r,c,a,i,l,o=n(0);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}function u(e,t){var n=e.title,u=e.titleId,b=d(e,["title","titleId"]);return o.createElement("svg",s({width:40,height:37,viewBox:"0 0 40 37",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":u},b),n?o.createElement("title",{id:u},n):null,r||(r=o.createElement("path",{d:"M10.5875 18.8431L30.4119 7.39751M30.4119 7.39751L26.8752 6.44984M30.4119 7.39751L29.4643 10.9342",stroke:"currentColor",strokeWidth:1.47153,strokeLinecap:"round",strokeLinejoin:"round"})),c||(c=o.createElement("path",{d:"M10.5873 18.8433L30.4117 30.2889M30.4117 30.2889L29.4641 26.7522M30.4117 30.2889L26.875 31.2366",stroke:"currentColor",strokeWidth:1.47153,strokeLinecap:"round",strokeLinejoin:"round"})),a||(a=o.createElement("circle",{cx:5.00165,cy:18.7858,r:3.55593,stroke:"currentColor",strokeWidth:1.47153})),i||(i=o.createElement("circle",{cx:35.2653,cy:32.5311,r:3.55593,stroke:"currentColor",strokeWidth:1.47153})),l||(l=o.createElement("circle",{cx:35.2653,cy:5.15558,r:3.55593,stroke:"currentColor",strokeWidth:1.47153})))}var b=o.forwardRef(u);n.p},915:function(e,t,n){"use strict";n.r(t),n.d(t,"reorder",(function(){return Be}));var r=n(19),c=n(7),a=n.n(c),i=n(10),l=n(14),o=n(5),s=n(39),d=n(0),u=n.n(d),b=n(251),j=n(22),f=n(747),p=n.n(f),m=n(778),x=n.n(m),h=n(751),O=n.n(h),v=n(714),g=n(89),y=n(78),w=n(143),N=n(145),k=n(142),C=n(1),I=function(e){var t=e.className,n=void 0===t?"":t,r=e.options,c=e.value,a=e.setValue,l=e.disabled,o=Object(k.a)(e,["className","options","value","setValue","disabled"]);return Object(C.jsx)("div",Object(i.a)(Object(i.a)({className:"flex -mx-2 flex-wrap sm:flex-nowrap mb-10 "+n},o),{},{children:r.map((function(e,t){return Object(C.jsx)("div",{"data-testid":"touple-option-".concat(e.value),onClick:function(){return a(e.value)},className:"sm:w-1/2 w-full mx-2 mb-3 sm:mb-0 py-7 select-none ".concat(l?"cursor-default":"cursor-pointer"," flex items-center justify-center rounded ").concat(c===e.value?"border-4 border-orange-300":"bg-gray-300 ".concat(l?"":"hover:bg-gray-301")),children:Object(C.jsxs)("div",{className:"flex items-center pointer-events-none",children:[Object(C.jsx)("div",{className:e.icon?"mr-7":"",children:e.label}),e.icon?Object(C.jsx)(e.icon,{}):null]})},e.value)}))}))},S=n(99),E=n.n(S);var L,F=function(e){for(var t,n,r="",c=0;c<e.length;c++)" "===e[c]?r+="-":c>0&&e[c-1].toLowerCase()===e[c-1]&&" "!==e[c-1]&&e[c].toUpperCase()===e[c]&&!((n=e[c])>="0"&&n<="9")&&(1===(t=e[c]).length&&t.match(/[a-z]/i))?r+="-"+e[c].toLowerCase():r+=e[c].toLowerCase();return r},T=function(e){var t=e.open,n=e.onClose,r=e.collections,c=e.editingCollectionIndex,o=e.onCreate,d=e.onUpdate,u=e.onDelete,j=Object(y.b)(),f=c>=0?r[c]:{name:"",id:"",single:!1,draftable:!0,fields:[],size:0,lastIndex:0,docId:""},p=Object(N.a)({enableReinitialize:!0,onSubmit:function(){var e=Object(l.a)(a.a.mark((function e(t,r){var l,s,u,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=r.resetForm,s=F(t.name),!(c>-1)){e.next=8;break}return e.next=5,Object(b.d)(m.docId,Object(i.a)(Object(i.a)({},m),{},{id:s}));case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,Object(b.a)(Object(i.a)(Object(i.a)({},m),{},{id:s}));case 10:e.t0=e.sent;case 11:u=e.t0,f=c>-1?"updated":"created",u.error?j("Collection type was not "+f,{variant:"error"}):(c>-1?d(u):o(u),l(),n(),j("Collection type "+f+"!",{variant:"success"}));case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),initialValues:f,validate:function(e){var t={};if(e.name){var n=F(e.name),a=r.findIndex((function(e){return e.id===n}));-1!==a&&a!==c&&(t.name="There is collection with the same name")}else t.name="Collection name is required";return t}}),m=p.values,x=p.errors,h=p.handleSubmit,O=p.handleChange,k=p.setFieldValue,S=p.isSubmitting,L=p.submitCount;return Object(C.jsx)(v.a,{open:t,hideBackdrop:!0,children:Object(C.jsx)("div",{className:"w-full h-full flex overflow-auto bg-black bg-opacity-40 p-7",children:Object(C.jsxs)("div",{className:"m-auto rounded bg-white w-full p-7 relative animate-littlemoveup",style:{maxWidth:600},children:[Object(C.jsx)(E.a,{className:"absolute top-0 right-0 cursor-pointer",onClick:n}),Object(C.jsxs)("div",{className:"text-22px font-medium mb-12",children:[c>-1?"Edit":"Create"," collection type"]}),Object(C.jsxs)("div",{className:"flex flex-wrap mb-7",children:[Object(C.jsxs)("div",{className:"mb-3 sm:w-1/2 w-full sm:pr-2",children:[Object(C.jsx)("div",{className:"mb-2",children:"Collection name"}),Object(C.jsx)(g.a,{groundColor:"white",className:"h-34px","data-testid":"collection-name-input",error:!!(L>0&&x.name)&&x.name,value:m.name,name:"name",onChange:O,onKeyDown:function(e){"Enter"===e.key&&h()}})]}),Object(C.jsxs)("div",{className:"mb-3 sm:w-1/2 w-full sm:pl-2",children:[Object(C.jsx)("div",{className:"mb-2",children:"UID"}),Object(C.jsx)(g.a,{className:"h-34px",groundColor:"white",disabled:!0,value:F(m.name),name:"id"})]})]}),Object(C.jsx)(I,{disabled:-1!==c,value:m.single,options:[{value:!1,label:"Multiple elements"},{value:!0,label:"Single element"}],setValue:function(e){return-1===c?k("single",e):{}}}),c>-1?Object(C.jsx)(s.a,{noMinWidth:!0,"data-testid":"delete-collection-btn",onClick:Object(l.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.a)({confirmation:"Delete collection type?"});case 2:if(!e.sent){e.next=9;break}return t=r[c].docId,e.next=6,Object(b.b)(t);case 6:e.sent.error?j("Collection type was not deleted",{variant:"error"}):(n(),u(t),j("Collection type deleted!",{variant:"success"})),n();case 9:case"end":return e.stop()}}),e)}))),className:"border-2 h-34px px-4 border-red-500 text-red-500 mb-10 hover:bg-red-500 hover:text-white",children:"Delete collection"}):null,Object(C.jsxs)("div",{className:"flex justify-between",children:[Object(C.jsx)(s.a,{onClick:function(){return n()},className:"bg-blue-300 hover:bg-blue-400 text-white",children:"Cancel"}),Object(C.jsx)(s.a,{"data-testid":"submit-btn",disabled:S,onClick:function(){return h()},className:"bg-fireck-4 hover:bg-fireck-4-hover h-34px",children:S?"Loading...":"Submit"})]})]})})})},z=function(e){return Object(C.jsx)("div",Object(i.a)(Object(i.a)({},e),{},{className:"w-8 rounded h-5 bg-fireck-4 text-center flex justify-center items-center text-10px font-medium"}))},D=function(){return Object(C.jsx)(z,{children:"Ab"})},B=function(){return Object(C.jsx)(z,{children:"123"})},P=function(){return Object(C.jsx)(z,{children:"{ }"})},M=function(){return Object(C.jsx)(z,{children:"[ ]"})},V=n(790),H=n.n(V),W=function(){return Object(C.jsx)(z,{children:Object(C.jsx)(H.a,{fontSize:"inherit",className:"text-lg"})})},A=n(791),_=n.n(A),R=function(){return Object(C.jsx)(z,{children:Object(C.jsx)(_.a,{fontSize:"inherit",className:"text-sm"})})},U=n(792),J=n.n(U),Z=function(){return Object(C.jsx)(z,{children:Object(C.jsx)(J.a,{fontSize:"inherit",className:"text-base"})})},q=n(793),K=n.n(q),Y=function(){return Object(C.jsx)(z,{children:Object(C.jsx)(K.a,{fontSize:"inherit",className:"text-base"})})},G=function(){return Object(C.jsx)(z,{children:Object(C.jsx)("span",{className:"text-10px",children:"JSON"})})},Q=n(794),X=n.n(Q),$=function(){return Object(C.jsx)(z,{children:Object(C.jsx)(X.a,{fontSize:"inherit",className:"text-xl"})})},ee=n(303),te=n.n(ee),ne=function(){return Object(C.jsx)(z,{children:Object(C.jsx)(te.a,{fontSize:"inherit",className:"text-base"})})},re=n(756),ce=n.n(re),ae=function(){return Object(C.jsx)(z,{children:Object(C.jsx)(ce.a,{fontSize:"inherit",className:"text-lg"})})};function ie(){return(ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function le(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}function oe(e,t){var n=e.title,r=e.titleId,c=le(e,["title","titleId"]);return d.createElement("svg",ie({width:11,height:11,viewBox:"0 0 19 19",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},c),n?d.createElement("title",{id:r},n):null,L||(L=d.createElement("path",{d:"M0.570312 0.778809H6.57031V4.77881H0.570312V0.778809ZM12.5703 7.77881H18.5703V11.7788H12.5703V7.77881ZM12.5703 14.7788H18.5703V18.7788H12.5703V14.7788ZM10.5703 10.7788H4.57031V15.7788H10.5703V17.7788H4.57031H2.57031V6.77881H4.57031V8.77881H10.5703V10.7788Z",fill:"currentColor"})))}var se=d.forwardRef(oe),de=(n.p,[{type:"string",Badge:D},{type:"number",Badge:B},{type:"map",Badge:P},{type:"array",Badge:M},{type:"boolean",Badge:W},{type:"date",Badge:R},{type:"media",Badge:Z},{type:"rich-text",Badge:Y},{type:"json",Badge:G},{type:"enum",Badge:$},{type:"password",Badge:ne},{type:"relation",Badge:ae},{type:"collection",Badge:function(){return Object(C.jsx)(z,{children:Object(C.jsx)(se,{className:"m-auto"})})}}]),ue=n(728),be=n(757),je=n(758),fe=n(732),pe=n(795),me=n.n(pe),xe=n(745),he=n(725),Oe=function(e){var t=e.proceed,n=u.a.useState("string"),r=Object(o.a)(n,2),c=r[0],a=r[1];return Object(C.jsx)("div",{className:"fixed left-0 top-0 w-full h-full flex overflow-auto bg-black bg-opacity-40 p-7",children:Object(C.jsxs)("div",{className:"m-auto rounded bg-white p-7 w-full relative animate-littlemoveup",style:{maxWidth:550},children:[Object(C.jsx)(E.a,{className:"cursor-pointer absolute top-0 right-0",onClick:function(){return t(!1)}}),Object(C.jsx)("div",{className:"text-22px font-medium mb-7",children:"Select field type"}),Object(C.jsx)("div",{className:"mb-6",children:Object(C.jsx)("div",{className:"flex flex-wrap",children:de.map((function(e,t){return Object(C.jsx)("div",{"data-testid":"fieldtype-option-".concat(e.type),onClick:function(){return a(e.type)},className:"flex md:w-1/3 sm:w-1/2 w-full select-none p-3 border-4 border-solid border-white items-center cursor-pointer rounded  ".concat(c===e.type?"border-orange-300":"hover:border-gray-300 hover:bg-gray-300"),children:Object(C.jsxs)("div",{className:"flex items-center pointer-events-none",children:[Object(C.jsx)(e.Badge,{}),Object(C.jsx)("span",{className:"capitalize ml-2 line-clamp-1",children:e.type.replace("-"," ")})]})},"field-type-".concat(t))}))})}),Object(C.jsxs)("div",{className:"flex justify-between",children:[Object(C.jsx)(s.a,{"data-testid":"cancel-field-type-btn",onClick:function(){t(!1)},className:"bg-blue-300 hover:bg-blue-400 text-white h-34px",children:"Cancel"}),Object(C.jsx)(s.a,{"data-testid":"submit-field-type-btn",onClick:function(){t(c)},className:"bg-fireck-4 hover:bg-fireck-4-hover h-34px",children:"Submit"})]})]})})},ve=function(){var e=Object(l.a)(a.a.mark((function e(t){var n,r,c,l,o,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.editableField,r=t.existingFieldNames,c=t.zLevel,!n){e.next=5;break}e.t0=n.type,e.next=8;break;case 5:return e.next=7,Object(he.a)({Component:Oe,props:{}});case 7:e.t0=e.sent;case 8:if("boolean"!==typeof(l=e.t0)){e.next=11;break}return e.abrupt("return",null);case 11:return o=l,e.next=14,Object(he.a)({Component:ye,props:{fieldType:o,editableField:n,existingFieldNames:r,zLevel:c,goBack:function(e){e(),ve({editableField:n,existingFieldNames:r,zLevel:c})}}});case 14:if("boolean"!==typeof(s=e.sent)){e.next=17;break}return e.abrupt("return",null);case 17:return e.abrupt("return",Object(i.a)(Object(i.a)({},s),{},{type:l}));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ge=n(755),ye=function(e){var t,n=e.editableField,c=e.existingFieldNames,d=e.proceed,b=e.fieldType,f=e.zLevel,p=e.goBack,m={id:"",mediaSingle:!1,enumOptions:[],relatedCollectionTypeDocId:"",relationOneToOne:!0,displayOnTable:!0,stringLong:!1,collectionFields:[]},h=Object(N.a)({onSubmit:function(e){d(e)},initialValues:n?Object(i.a)(Object(i.a)({},m),n):m,validate:function(e){var t={};return e.id?c&&c.findIndex((function(t){return t===e.id}))>-1&&(t.id="There is field with the same name"):t.id="Field name is required","enum"===b&&e.enumOptions.length<2&&(t.enumOptions="Enum requires at least two options"),"relation"===b&&""===e.relatedCollectionTypeDocId&&(t.relatedCollectionTypeDocId="Select related collection"),t}}),v=h.values,y=h.errors,k=h.handleChange,S=h.handleSubmit,L=h.setFieldValue,F=h.submitCount,T=u.a.useState(""),z=Object(o.a)(T,2),D=z[0],B=z[1],P=de.find((function(e){return e.type===b})),M=Object(j.d)((function(e){return e.collectionTypes})),V=function(){var e=Object(l.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.destination){e.next=2;break}return e.abrupt("return");case 2:n=Be(v.collectionFields,t.source.index,t.destination.index),L("collectionFields",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){if(D){var e=Object(r.a)(v.enumOptions);e.push(D),L("enumOptions",e),B("")}};return Object(C.jsx)("div",{className:"fixed left-0 top-0 w-full h-full flex overflow-auto bg-black bg-opacity-40",children:Object(C.jsxs)("div",{style:{maxWidth:550},className:"m-auto rounded bg-white p-7 w-full relative animate-littlemoveup",children:[Object(C.jsx)(E.a,{className:"absolute top-0 right-0 cursor-pointer",onClick:function(){return d(!1)}}),Object(C.jsxs)("div",{className:"text-22px font-medium mb-9 flex items-center",children:[P?Object(C.jsx)(P.Badge,{}):null,Object(C.jsxs)("span",{className:"ml-3",children:[n?"Edit":"Add"," ",P?P.type:""," field"]})]}),Object(C.jsxs)("div",{className:"mb-9",children:[Object(C.jsx)("div",{className:"mb-2",children:"Field name"}),Object(C.jsx)(g.a,{groundColor:"white",className:"h-34px","data-testid":"field-id-input-".concat(f),error:F>0?y.id:"",value:v.id,name:"id",onChange:k,onKeyDown:function(e){"Enter"===e.key&&S()}})]}),"media"===b?Object(C.jsx)(I,{"data-testid":"media-touple-".concat(f),options:[{value:!1,label:"Multiple media"},{value:!0,label:"Single media"}],value:v.mediaSingle,setValue:function(e){return L("mediaSingle",e)}}):"enum"===b?Object(C.jsxs)("div",{className:"mb-10",children:[Object(C.jsx)("div",{className:"mb-2",children:"Options"}),Object(C.jsx)("div",{className:"flex flex-wrap",children:v.enumOptions.map((function(e,t){return Object(C.jsxs)("div",{"data-testid":"enum-option-".concat(e,"-").concat(f),className:"bg-gray-300 rounded flex items-center px-3 h-34px mr-3 mb-3",children:[Object(C.jsx)("div",{className:"mr-4",children:e}),Object(C.jsx)("div",{className:"cursor-pointer text-xs",onClick:function(){var e=Object(r.a)(v.enumOptions);e.splice(t,1),L("enumOptions",e)},children:"\u2715"})]},"enum-option-".concat(t))}))}),Object(C.jsxs)("div",{className:"flex",children:[Object(C.jsx)(g.a,{"data-testid":"enum-option-input-".concat(f),className:"mr-3",error:F>0?null===(t=y.enumOptions)||void 0===t?void 0:t.toString():"",type:"text",value:D,onChange:function(e){return B(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&H()}}),Object(C.jsx)(s.a,{"data-testid":"add-enum-option-btn-".concat(f),onClick:H,className:"bg-orange-300 hover:bg-orange-301",children:"Add option"})]})]}):"relation"===b?Object(C.jsxs)("div",{className:"mb-10",children:[Object(C.jsxs)("div",{className:"mb-9",children:[Object(C.jsx)(fe.a,{groundColor:"white",error:F>0?y.relatedCollectionTypeDocId:"",className:"mb-2",children:"Related collection"}),Object(C.jsx)(ue.a,{"data-testid":"related-collection-select-".concat(f),options:[{value:"",label:"Select"}].concat(Object(r.a)(M.map((function(e){return{label:e.id,value:e.docId}})))),value:v.relatedCollectionTypeDocId,onChange:function(e){return L("relatedCollectionTypeDocId",e.target.value)}})]}),Object(C.jsx)("div",{className:"mb-2",children:"Relation type"}),Object(C.jsx)(I,{"data-testid":"relation-multiplicity-touple-".concat(f),value:v.relationOneToOne,setValue:function(e){return L("relationOneToOne",e)},options:[{value:!0,label:"One to one",icon:be.a},{value:!1,label:"One to many",icon:je.a}]})]}):"string"===b?Object(C.jsx)(I,{"data-testid":"string-type-touple-".concat(f),value:v.stringLong,setValue:function(e){return L("stringLong",e)},options:[{label:"Short text",value:!1},{label:"Long text",value:!0}]}):"collection"===b?Object(C.jsxs)("div",{className:"mb-9",children:[Object(C.jsxs)("div",{className:"flex mb-2",children:[Object(C.jsx)("div",{className:"mr-2",children:"Fields"}),Object(C.jsx)(me.a,{"data-testid":"add-field-for-subcollection-btn-".concat(f),className:"cursor-pointer",onClick:Object(l.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve({existingFieldNames:v.collectionFields.map((function(e){return e.id})),zLevel:f+1});case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:n=[].concat(Object(r.a)(v.collectionFields),[t]),L("collectionFields",n);case 7:case"end":return e.stop()}}),e)})))})]}),Object(C.jsx)(ge.a,{onDragEnd:V,children:Object(C.jsx)(ge.c,{droppableId:"droppable-sub",children:function(e,t){return Object(C.jsxs)("div",Object(i.a)(Object(i.a)({className:" max-h-247px overflow-auto"},e.droppableProps),{},{ref:e.innerRef,children:[v.collectionFields.map((function(e,t){var n,c=null===(n=de.find((function(t){return t.type===e.type})))||void 0===n?void 0:n.Badge;return Object(C.jsx)(ge.b,{draggableId:e.id+1,index:t,children:function(n,o){return Object(C.jsxs)("div",Object(i.a)(Object(i.a)(Object(i.a)({className:"rounded bg-gray-300 px-3 py-2 flex mb-2 items-center",ref:n.innerRef},n.draggableProps),n.dragHandleProps),{},{children:[Object(C.jsx)("div",{className:"line-clamp-1 w-5/12 px-3",children:e.id}),Object(C.jsxs)("div",{className:"flex w-4/12 flex-shrink-0",children:[c?Object(C.jsx)(c,{}):null,Object(C.jsx)("span",{className:"ml-3 hidden sm:block line-clamp-1",children:e.type})]}),Object(C.jsxs)("div",{className:"flex items-center flex-grow justify-end",children:[Object(C.jsx)(xe.a,{variant:"transparent",onClick:Object(l.a)(a.a.mark((function n(){var c,l;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ve({zLevel:f+1,editableField:e,existingFieldNames:v.collectionFields.map((function(e){return e.id})).filter((function(t){return t!==e.id}))});case 2:if(c=n.sent){n.next=5;break}return n.abrupt("return");case 5:(l=Object(r.a)(v.collectionFields))[t]=Object(i.a)(Object(i.a)({},e),c),L("collectionFields",l);case 8:case"end":return n.stop()}}),n)}))),children:Object(C.jsx)(x.a,{fontSize:"small"})}),Object(C.jsx)(xe.a,{variant:"transparent",onClick:Object(l.a)(a.a.mark((function e(){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.a)({confirmation:"Do you really want to delete the field?"});case 2:e.sent&&((n=Object(r.a)(v.collectionFields)).splice(t,1),L("collectionFields",n));case 4:case"end":return e.stop()}}),e)}))),children:Object(C.jsx)(O.a,{fontSize:"small"})})]})]}),"field-".concat(t))}},e.id)})),e.placeholder]}))}})})]}):null,Object(C.jsxs)("div",{className:"flex justify-between",children:[Object(C.jsx)(s.a,{"data-testid":"cancel-field-details-btn-".concat(f),onClick:function(){return p((function(){return d(!1)}))},className:"bg-blue-300 hover:bg-blue-400 text-white h-34px",children:n?"Cancel":"Back"}),Object(C.jsx)(s.a,{"data-testid":"submit-field-details-btn-".concat(f),type:"submit",onClick:function(){return S()},className:"bg-fireck-4 hover:bg-fireck-4-hover h-34px",children:"Submit"})]})]})})},we=n(766),Ne=n.n(we),ke=n(759),Ce=(n(760),n(761),n(762),n(763),n(764),n(765),function(e){var t=e.code;return Object(C.jsx)(ke.UnControlled,{value:t,options:{height:"100%",theme:"material",lineNumbers:!0,readOnly:!0,mode:"text/typescript"}})}),Ie=n(144),Se=function(e){return new Array(e).fill(0).reduce((function(e,t){return e+" "}),"")},Ee=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,c=function(t){var c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.length?"{\n".concat(t.reduce((function(t,c){return t+"".concat(Se(n)).concat(c.id.includes(" ")||c.id.includes("-")?'"'.concat(c.id,'"'):c.id,": ").concat(e(c,n+r),";\n")}),"")).concat(Se(n-r)).concat(c?"}[]":"}"):c?"any[]":"null"},a={password:function(){return"string"},string:function(){return"string"},"rich-text":function(){return"string"},json:function(){return"object"},map:function(){return"object"},array:function(){return"any[]"},media:function(e){return e.mediaSingle?"string":"string[]"},date:function(){return"string"},enum:function(){return"string[]"},number:function(){return"number"},boolean:function(){return"boolean"},relation:function(e){return e.relationOneToOne?"string":"string[]"},collection:function(e){return c(e.collectionFields,!0)},document:function(e){return c(e.documentFields)},script:function(){return"object"},"script-V2":function(){return"object"}};return"".concat(a[t.type](t))},Le=function(e){var t={type:"document",documentFields:e.fields};return"interface Document ".concat(Ee(t,3))},Fe=function(e){var t=e.open,n=e.collectionType,r=e.onClose,c=Object(d.useState)(!1),a=Object(o.a)(c,2),i=a[0],l=a[1],u=n?Le(n):"";return n?Object(C.jsx)(v.a,{open:t,hideBackdrop:!0,children:Object(C.jsx)("div",{className:"fixed left-0 top-0 w-full h-full flex overflow-auto bg-black bg-opacity-40 p-9",onMouseDown:r,children:Object(C.jsxs)("div",{className:"bg-white p-7 m-auto max-h-600px h-full flex flex-col rounded md:max-w-lg max-w-sm w-full relative animate-littlemoveup",onMouseDown:function(e){return e.stopPropagation()},children:[Object(C.jsx)(E.a,{className:"absolute top-0 right-0 cursor-pointer",onClick:r}),Object(C.jsxs)("div",{className:"mb-7 text-22px capitalize font-medium",children:[n.name," interface"]}),Object(C.jsxs)("div",{className:"relative flex-grow h-0 rounded overflow-hidden",children:[i?Object(C.jsx)("div",{className:"absolute z-20 text-white top-1 animate-littlemoveup right-1 cursor-pointer h-6 px-2 text-sm font-medium",children:"Copied!"}):Object(C.jsx)(s.a,{noMinWidth:!0,onClick:function(){navigator.clipboard.writeText(u),l(!0),setTimeout((function(){l(!1)}),2e3)},className:"absolute z-20 top-1 right-1 text-xs cursor-pointer h-6 px-3 bg-fireck-4 hover:bg-fireck-4-hover",children:"Copy"}),Object(C.jsx)(Ie.a,{className:"h-full scrollbar-dark",children:Object(C.jsx)(Ce,{code:u})})]})]})})}):null},Te=n(746),ze=n(729),De=n.n(ze),Be=function(e,t,n){var r=Array.from(e),c=r.splice(t,1),a=Object(o.a)(c,1)[0];return r.splice(n,0,a),r};t.default=function(){var e=u.a.useState(!1),t=Object(o.a)(e,2),n=t[0],c=t[1],d=Object(j.c)(),f=Object(y.b)(),m=u.a.useState(-1),h=Object(o.a)(m,2),v=h[0],g=h[1],N=u.a.useState(0),k=Object(o.a)(N,2),I=k[0],S=k[1],E=u.a.useState(),L=Object(o.a)(E,2),F=L[0],z=L[1],D=Object(j.d)((function(e){return{collections:e.collectionTypes}})).collections,B=function(){var e=Object(l.a)(a.a.mark((function e(t,n){var r,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=D[I],e.next=3,Object(he.a)({Component:ye,props:{fieldType:t,editableField:r.fields[n],zLevel:0,goBack:function(e){return e()}}});case 3:if("boolean"===typeof(c=e.sent)){e.next=13;break}return(l=JSON.parse(JSON.stringify(r.fields)))[n]=Object(i.a)({},c),d({type:"UPDATE_COLLECTION_FIELDS",payload:l,docId:r.docId}),e.next=10,Object(b.d)(r.docId,Object(i.a)(Object(i.a)({},r),{},{fields:l}));case 10:if(e.sent.error){e.next=13;break}return e.abrupt("return",{success:!0});case 13:return e.abrupt("return",{success:!1});case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=Object(l.a)(a.a.mark((function e(){var t,n,c,l,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=D[I],e.next=3,Object(he.a)({Component:Oe,props:{}});case 3:if("boolean"===typeof(n=e.sent)){e.next=21;break}return c=n,e.next=8,Object(he.a)({Component:ye,props:{fieldType:c,existingFieldNames:t.fields.map((function(e){return e.id})),zLevel:0,goBack:function(e){e(),P()}}});case 8:if("boolean"===typeof(l=e.sent)){e.next=21;break}return o=[].concat(Object(r.a)(t.fields),[Object(i.a)({type:c},l)]),d({type:"UPDATE_COLLECTION_FIELDS",payload:o,docId:t.docId}),e.next=14,Object(b.d)(t.docId,Object(i.a)(Object(i.a)({},t),{},{fields:o}));case 14:if(e.sent.error){e.next=20;break}return f("Field added!",{variant:"success"}),e.abrupt("return",{success:!0});case 20:f("Field was not added",{variant:"error"});case 21:return e.abrupt("return",{success:!1});case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(l.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.destination){e.next=2;break}return e.abrupt("return");case 2:n=Be(D[I].fields,t.source.index,t.destination.index),r=D[I],d({type:"UPDATE_COLLECTION_FIELDS",payload:n,docId:r.docId}),Object(b.d)(r.docId,Object(i.a)(Object(i.a)({},r),{},{fields:n}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsxs)("div",{className:"h-full flex flex-col",children:[Object(C.jsxs)("div",{className:"flex flex-wrap justify-between mb-4",children:[Object(C.jsx)("div",{className:"font-medium text-27px leading-none mb-4 mr-4 text-white",children:"Collections"}),Object(C.jsx)(s.a,{noMinWidth:!0,"data-testid":"add-collection-btn",onClick:function(){return c(!0)},className:"bg-orange-300 hover:bg-orange-301 mb-4",children:Object(C.jsxs)("div",{className:"flex items-center pointer-events-none h-34px",children:[Object(C.jsx)(De.a,{className:"mr-2 text-lg",fontSize:"inherit"}),Object(C.jsx)("span",{className:"hidden md:block",children:"Add collection"}),Object(C.jsx)("span",{className:"md:hidden",children:"Add"})]})})]}),D.length?Object(C.jsxs)("div",{className:"flex flex-wrap lg:flex-nowrap w-full flex-grow",children:[Object(C.jsx)(Ie.a,{className:"max-w-192px w-full flex-shrink-0 mr-4 hidden lg:block max-h-96 scrollbar-dark pr-3",autoHide:!1,children:D.map((function(e,t){return Object(C.jsx)("div",{"data-testid":"collection-name-".concat(e.name),onClick:function(){return S(t)},className:"mb-1 capitalize truncate cursor-pointer ".concat(I===t?"bg-fireck-4":"hover:bg-fireck-1-hover text-white"," rounded h-28px leading-28px px-3"),children:e.name},"collection-".concat(t))}))}),Object(C.jsxs)("div",{className:"lg:flex-grow w-full rounded-lg bg-fireck-3 p-7 flex flex-col",children:[Object(C.jsxs)("div",{className:"flex justify-between mb-3 flex-wrap",children:[Object(C.jsxs)("div",{className:"font-medium text-22px capitalize mb-3 mr-3 text-white",children:[Object(C.jsx)("span",{className:"hidden lg:inline-block",children:I<D.length?D[I].name:""}),Object(C.jsx)("div",{className:"lg:hidden inline-block text-black text-base",children:Object(C.jsx)(ue.a,{onChange:function(e){return S(parseInt(e.target.value))},value:I,options:D.map((function(e,t){return{label:e.name,value:t}}))})}),Object(C.jsx)(p.a,{"data-testid":"edit-collection-btn",onClick:function(){g(I),c(!0)},className:"ml-3 text-lg cursor-pointer",fontSize:"inherit"})]}),Object(C.jsxs)("div",{className:"flex flex-wrap",children:[Object(C.jsx)(s.a,{"data-testid":"view-interface-btn",onClick:function(){return z(D[I])},noMinWidth:!0,className:"border border-white h-28px text-white mr-3 mb-3 px-5",children:Object(C.jsx)("div",{className:"flex items-center pointer-events-none",children:"Interface"})}),Object(C.jsx)(s.a,{noMinWidth:!0,"data-testid":"add-new-field-btn",onClick:Object(l.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P();case 1:case"end":return e.stop()}}),e)}))),className:"bg-fireck-4 hover:bg-fireck-4-hover mb-3 h-28px pl-3",children:Object(C.jsxs)("div",{className:"flex items-center pointer-events-none",children:[Object(C.jsx)(De.a,{className:"mr-2 text-lg",fontSize:"inherit"}),Object(C.jsx)("span",{children:"Add field"})]})})]})]}),Object(C.jsx)("div",{className:"flex-grow h-0 bg-white rounded overflow-hidden",children:Object(C.jsx)(ge.a,{onDragEnd:M,children:Object(C.jsx)(ge.c,{droppableId:"droppable",children:function(e,t){return Object(C.jsx)(Ie.a,{className:"overflow-auto w-full h-full scrollbar-light scrollbar-thin py-0.5",autoHide:!1,children:Object(C.jsxs)("div",Object(i.a)(Object(i.a)({className:"min-w-430px"},e.droppableProps),{},{ref:e.innerRef,children:[I<D.length?D[I].fields.map((function(e,t){var n,r=null===(n=de.find((function(t){return t.type===e.type})))||void 0===n?void 0:n.Badge;return Object(C.jsx)(ge.b,{draggableId:e.id,index:t,children:function(n,c){return Object(C.jsxs)("div",Object(i.a)(Object(i.a)({"data-testid":"field-id-".concat(e.id),className:"bg-white hover:bg-fireck-4 flex mb-2 items-center px-2 py-0.5",ref:n.innerRef},n.draggableProps),{},{children:[Object(C.jsx)("div",Object(i.a)(Object(i.a)({},n.dragHandleProps),{},{children:Object(C.jsx)(Ne.a,{fontSize:"inherit",className:"text-lg"})})),Object(C.jsx)("div",{className:"line-clamp-1 w-5/12 px-3",children:e.id}),Object(C.jsxs)("div",{className:"flex w-4/12 flex-shrink-0 items-center",children:[r?Object(C.jsx)(r,{}):null,Object(C.jsx)("span",{className:"ml-3 hidden sm:block line-clamp-1",children:e.type})]}),e.isDefault?null:Object(C.jsxs)("div",{className:"flex items-center flex-grow justify-end",children:[Object(C.jsx)("div",{"data-testid":"edit-for-field-".concat(e.id),className:"h-5 w-5 flex items-center justify-center rounded cursor-pointer hover:bg-white",onClick:function(){B(e.type,t)},children:Object(C.jsx)(x.a,{fontSize:"inherit",classes:{root:"pointer-events-none text-lg"}})}),Object(C.jsx)("div",{className:"h-5 w-5 flex items-center justify-center rounded cursor-pointer hover:bg-red-FF0000 hover:text-white","data-testid":"delete-for-field-".concat(e.id),onClick:Object(l.a)(a.a.mark((function e(){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.a)({confirmation:"Delete field?"});case 2:e.sent&&((n=JSON.parse(JSON.stringify(D[I]))).fields.splice(t,1),d({type:"UPDATE_COLLECTION_FIELDS",payload:n.fields,docId:n.docId}),Object(b.d)(D[I].docId,n));case 4:case"end":return e.stop()}}),e)}))),children:Object(C.jsx)(O.a,{classes:{root:"pointer-events-none text-lg"},fontSize:"inherit"})})]})]}),"field-".concat(t))}},e.id)})):null,e.placeholder]}))})}})})})]})]}):Object(C.jsx)(Te.a,{buttonTitle:"Create",title:"There are no collections",onCreate:function(){return c(!0)}}),Object(C.jsx)(T,{editingCollectionIndex:v,collections:D,onCreate:function(e){return d({type:"ADD_COLLECTION_TYPE",payload:e})},onUpdate:function(e){d({type:"UPDATE_COLLECTION_TYPE",payload:e,docId:e.docId})},onDelete:function(e){S(0),g(-1),d({type:"DELETE_COLLECTION_TYPE",payload:e})},open:n,onClose:function(){c(!1),g(-1)}}),Object(C.jsx)(Fe,{onClose:function(){return z(void 0)},open:!!F,collectionType:F})]})}}}]);
//# sourceMappingURL=11.1575c7cc.chunk.js.map