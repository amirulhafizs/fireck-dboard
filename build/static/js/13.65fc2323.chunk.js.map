{"version":3,"sources":["components/Select.tsx","api/callComponent.tsx","components/Label.tsx","components/IconButton.tsx","components/SettingsPage.tsx","assets/one-to-one.svg","assets/one-to-many.svg","components/ToupleInput.tsx","pages/CollectionTypes/CollectionModal.tsx","assets/subcollection.svg","components/FieldTypes/Wrapper.tsx","components/FieldTypes/String.tsx","components/FieldTypes/Number.tsx","components/FieldTypes/Map.tsx","components/FieldTypes/Array.tsx","components/FieldTypes/Boolean.tsx","components/FieldTypes/Date.tsx","components/FieldTypes/Media.tsx","components/FieldTypes/RichText.tsx","components/FieldTypes/Json.tsx","components/FieldTypes/Enum.tsx","components/FieldTypes/Password.tsx","components/FieldTypes/Relation.tsx","components/FieldTypes/index.tsx","components/FieldTypes/Subcollection.tsx","pages/CollectionTypes/SelectFieldType.tsx","pages/CollectionTypes/GetCollectionField.ts","pages/CollectionTypes/SpecifyFieldDetails.tsx","components/TypescriptSyntax.tsx","pages/CollectionTypes/InterfaceModal.tsx","pages/CollectionTypes/index.tsx"],"names":["WarningIcon","React","forwardRef","props","ref","className","size","Select","options","error","groundColor","classNames","spellCheck","map","x","i","data-testid","value","label","title","placement","callComponent","Component","Promise","resolve","reject","wrapper","document","getElementById","appendChild","createElement","ReactDOM","render","store","proceed","val","unmountComponentAtNode","parentNode","removeChild","fontSize","Label","children","IconButton","variant","rest","CollectionsBuilder","entity","enitityPlural","onAddEntity","entities","onSelectEntity","entityButtons","onInvokeEntityEdit","entityContent","selectedEntityId","noMinWidth","onClick","length","autoHide","name","docId","find","onChange","e","target","_path","_circle","_circle2","_extends","Object","assign","arguments","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgOneToOne","_ref","svgRef","titleId","width","height","viewBox","fill","xmlns","id","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","cx","cy","r","ForwardRef","_path2","_circle3","SvgOneToMany","ToupleInput","setValue","disabled","opt","icon","createId","string","str","char","toLowerCase","toUpperCase","match","AddNewCollection","open","onClose","collections","editingCollectionDocId","onCreate","onUpdate","onDelete","initialData","single","draftable","fields","lastIndex","notify","useNotify","formIntialState","useFormik","enableReinitialize","onSubmit","vals","a","resetForm","updateCollectionType","values","createCollectionType","res","actionType","initialValues","validate","errors","index","findIndex","handleSubmit","handleChange","setFieldValue","isSubmitting","submitCount","Modal","hideBackdrop","style","maxWidth","Input","onKeyDown","Button","confirm","confirmation","deleteDocId","deleteCollectionType","Wrapper","String","Number","Map","Array","Boolean","Media","Enum","Password","Relation","SvgSubcollection","fieldTypes","type","Badge","Date","RichText","Json","SelectFieldType","useState","fieldType","setFieldType","FieldTypes","replace","getCollectionField","editableField","existingFieldNames","zLevel","SpecifyFieldDetails","goBack","closer","res1","mediaSingle","enumOptions","relatedCollectionTypeDocId","relationOneToOne","displayOnTable","stringLong","collectionFields","enumOption","setEnumOption","SelectedFieldType","useSelector","state","collectionTypes","onDragEnd","result","destination","reorder","addEnumOption","arr","push","splice","toString","c","OneToOneIcon","OneToManyIcon","field","droppableId","provided","snapshot","droppableProps","innerRef","t","draggableId","draggableProps","dragHandleProps","f","filter","placeholder","TypescriptSyntax","code","theme","lineNumbers","readOnly","mode","getGap","count","reduce","b","getType","ident","identStep","docType","multiple","includes","types","password","json","array","media","date","enum","number","boolean","relation","collection","documentFields","script","generateInterface","colType","InterfaceModal","collectionType","copied","setCopied","interfaceString","onMouseDown","stopPropagation","navigator","clipboard","writeText","setTimeout","list","startIndex","endIndex","from","removed","collectionModalOpen","setCollectionModalOpen","dispatch","useDispatch","setEditingCollectionDocId","selectedCollection","setSelectedCollection","interfaceColType","setInterfaceColType","useEffect","editField","selectedField","newFields","JSON","parse","stringify","payload","success","addField","col","SettingsPage","isDefault","classes","root","updatedCollection","CollectionModal","undefined"],"mappings":"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","file":"static/js/13.65fc2323.chunk.js","sourcesContent":["import { IoAlertCircleOutline } from \"react-icons/io5\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport React, { SelectHTMLAttributes } from \"react\";\r\nimport classNames from \"classnames\";\r\n\r\nconst WarningIcon = React.forwardRef(function MyComponent(props: any, ref: any) {\r\n  return (\r\n    <div {...props} ref={ref}>\r\n      <IoAlertCircleOutline className=\"text-red-FF0000\" size={20}></IoAlertCircleOutline>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport interface SelectProps extends SelectHTMLAttributes<HTMLSelectElement> {\r\n  className?: string;\r\n  options: { label: string; value: string | number }[];\r\n  error?: string | boolean;\r\n  groundColor: \"white\" | \"black\";\r\n}\r\n\r\nconst Select: React.FC<SelectProps> = ({\r\n  className = \"\",\r\n  options,\r\n  error,\r\n  groundColor,\r\n  ...props\r\n}) => {\r\n  return (\r\n    <div className={`${className} relative flex items-center`}>\r\n      <select\r\n        className={classNames(\"px-3 h-full border-2 border-solid w-full rounded outline-none\", {\r\n          \"border-red-FF0000\": error,\r\n          \"focus:border-fireck-4\": !error,\r\n          \"border-gray-300 bg-gray-300\": groundColor === \"white\",\r\n          \"border-white bg-white\": groundColor === \"black\",\r\n        })}\r\n        {...props}\r\n        spellCheck={false}\r\n      >\r\n        {options.map((x, i) => (\r\n          <option data-testid={`select-option-${x.value}`} key={\"opt-\" + i} value={x.value}>\r\n            {x.label}\r\n          </option>\r\n        ))}\r\n      </select>\r\n      {error ? (\r\n        <Tooltip title={error} placement=\"top\">\r\n          <WarningIcon className=\"absolute right-2 my-auto w-auto\"></WarningIcon>\r\n        </Tooltip>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Select;\r\n","import ReactDOM from \"react-dom\";\r\nimport React from \"react\";\r\nimport { Provider } from \"react-redux\";\r\nimport store from \"store\";\r\nimport NotificationsProvider from \"components/NotificationsProvider\";\r\n\r\nexport interface CallableComponent<T> {\r\n  proceed: (v: T) => void;\r\n}\r\n\r\ninterface callComponentArgs<T> {\r\n  Component: React.FC<any>;\r\n  props: Omit<T, \"proceed\">;\r\n}\r\n\r\nexport function callComponent<T, RT>({ Component, props }: callComponentArgs<T>): Promise<RT> {\r\n  return new Promise((resolve, reject) => {\r\n    const wrapper = document.getElementById(\"root\")?.appendChild(document.createElement(\"div\"));\r\n\r\n    if (wrapper) {\r\n      ReactDOM.render(\r\n        <Provider store={store}>\r\n          <NotificationsProvider>\r\n            <Component\r\n              {...props}\r\n              proceed={(val: RT) => {\r\n                ReactDOM.unmountComponentAtNode(wrapper);\r\n                wrapper.parentNode?.removeChild(wrapper);\r\n                resolve(val);\r\n              }}\r\n            />\r\n          </NotificationsProvider>\r\n        </Provider>,\r\n        wrapper\r\n      );\r\n    }\r\n  });\r\n}\r\n","import React from \"react\";\r\nimport ErrorRounded from \"@material-ui/icons/ErrorRounded\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport classNames from \"classnames\";\r\n\r\nexport interface LabelProps {\r\n  error?: string | undefined | null;\r\n  className?: string;\r\n  children: any;\r\n  groundColor: \"black\" | \"white\";\r\n}\r\n\r\nconst WarningIcon = React.forwardRef(function MyComponent(props: any, ref: any) {\r\n  return (\r\n    <div {...props} ref={ref}>\r\n      <ErrorRounded className=\"text-red-500 text-xl\" fontSize=\"inherit\"></ErrorRounded>\r\n    </div>\r\n  );\r\n});\r\n\r\nconst Label: React.FC<LabelProps> = ({ className = \"\", children, error, groundColor }) => {\r\n  return (\r\n    <div\r\n      className={classNames(`flex justify-between relative ${className}`, {\r\n        \"text-white\": groundColor === \"black\",\r\n        \"text-black\": groundColor === \"white\",\r\n      })}\r\n    >\r\n      <div>{children}</div>\r\n      {error ? (\r\n        <Tooltip title={error} placement=\"top\">\r\n          <WarningIcon className=\"absolute right-2 my-auto w-auto\"></WarningIcon>\r\n        </Tooltip>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Label;\r\n","import ButtonBase from \"@material-ui/core/ButtonBase\";\r\n\r\nexport type IconButtonVariant = \"transparent\" | \"standard\";\r\n\r\nexport interface IconButtonProps {\r\n  className?: string;\r\n  variant?: IconButtonVariant;\r\n  [x: string]: any;\r\n}\r\n\r\nconst IconButton: React.FC<IconButtonProps> = ({\r\n  className = \"\",\r\n  variant = \"standard\",\r\n  ...rest\r\n}) => {\r\n  return (\r\n    <ButtonBase\r\n      {...rest}\r\n      className={\r\n        `outline-none h-26px w-26px rounded ${\r\n          variant === \"standard\"\r\n            ? \"bg-orange-300 hover:bg-orange-301\"\r\n            : \"hover:bg-black hover:bg-opacity-5\"\r\n        }  ` + className\r\n      }\r\n    ></ButtonBase>\r\n  );\r\n};\r\n\r\nexport default IconButton;\r\n","import Button from \"components/Button\";\r\nimport React, { ReactElement, useState } from \"react\";\r\nimport Edit from \"@material-ui/icons/EditRounded\";\r\nimport Select from \"components/Select\";\r\nimport SimpleBar from \"simplebar-react\";\r\nimport AddRounded from \"@material-ui/icons/AddRounded\";\r\n\r\nexport interface CollectionsBuilderProps {\r\n  entity: string;\r\n  enitityPlural: string;\r\n  onAddEntity?: () => void;\r\n  entities: { name: string; docId: string }[];\r\n  onSelectEntity: (id: string) => void;\r\n  entityButtons: ReactElement;\r\n  onInvokeEntityEdit?: () => void;\r\n  entityContent: ReactElement;\r\n  selectedEntityId: string;\r\n}\r\n\r\nexport const reorder = (list: any[], startIndex: number, endIndex: number) => {\r\n  const result = Array.from(list);\r\n  const [removed] = result.splice(startIndex, 1);\r\n  result.splice(endIndex, 0, removed);\r\n\r\n  return result;\r\n};\r\n\r\nconst CollectionsBuilder: React.FC<CollectionsBuilderProps> = ({\r\n  entity,\r\n  enitityPlural,\r\n  onAddEntity,\r\n  entities,\r\n  onSelectEntity,\r\n  entityButtons,\r\n  onInvokeEntityEdit,\r\n  entityContent,\r\n  selectedEntityId,\r\n}) => {\r\n  return (\r\n    <div className=\"h-full flex flex-col\">\r\n      <div className=\"flex flex-wrap justify-between mb-4\">\r\n        <div className=\"font-medium text-27px leading-none mb-4 mr-4 text-white capitalize\">\r\n          {enitityPlural}\r\n        </div>\r\n        {!onAddEntity ? null : (\r\n          <Button\r\n            noMinWidth\r\n            data-testid=\"add-collection-btn\"\r\n            onClick={onAddEntity}\r\n            className=\"bg-fireck-4 hover:bg-fireck-4-hover mb-4\"\r\n          >\r\n            <div className=\"flex items-center pointer-events-none h-34px\">\r\n              <AddRounded className=\"mr-2 text-lg\" fontSize=\"inherit\"></AddRounded>\r\n              <span className=\"hidden md:block\">Add {entity}</span>\r\n              <span className=\"md:hidden\">Add</span>\r\n            </div>\r\n          </Button>\r\n        )}\r\n      </div>\r\n      {!entities.length ? (\r\n        <div></div>\r\n      ) : (\r\n        <div className=\"flex flex-wrap lg:flex-nowrap w-full flex-grow\">\r\n          <SimpleBar\r\n            className=\"max-w-192px w-full flex-shrink-0 mr-4 hidden lg:block max-h-96 scrollbar-dark pr-3\"\r\n            autoHide={false}\r\n          >\r\n            {entities.map((x) => (\r\n              <div\r\n                data-testid={`entity-name-${x.name}`}\r\n                onClick={() => {\r\n                  onSelectEntity(x.docId);\r\n                }}\r\n                key={`entity-${x.docId}`}\r\n                className={`mb-1 capitalize truncate select-none cursor-pointer ${\r\n                  selectedEntityId === x.docId\r\n                    ? \"bg-fireck-4\"\r\n                    : \"hover:bg-fireck-1-hover text-white\"\r\n                } rounded h-28px leading-28px px-3`}\r\n              >\r\n                {x.name}\r\n              </div>\r\n            ))}\r\n          </SimpleBar>\r\n\r\n          <div className=\"lg:flex-grow w-full rounded-lg bg-fireck-3 p-7 flex flex-col\">\r\n            <div className=\"flex justify-between mb-3 flex-wrap\">\r\n              <div className=\"font-medium text-22px capitalize mb-3 mr-3 text-white\">\r\n                <span className=\"hidden lg:inline-block\">\r\n                  {entities.find((x) => x.docId === selectedEntityId)?.name || \"\"}\r\n                </span>\r\n                <div className=\"lg:hidden inline-block text-black text-base\">\r\n                  <Select\r\n                    className=\"h-28px\"\r\n                    groundColor=\"black\"\r\n                    onChange={(e) => onSelectEntity(e.target.value)}\r\n                    value={selectedEntityId}\r\n                    options={entities.map((x) => ({ label: x.name, value: x.docId }))}\r\n                  ></Select>\r\n                </div>\r\n                {!onInvokeEntityEdit ? null : (\r\n                  <Edit\r\n                    data-testid=\"edit-collection-btn\"\r\n                    onClick={onInvokeEntityEdit}\r\n                    className=\"ml-3 text-lg cursor-pointer\"\r\n                    fontSize=\"inherit\"\r\n                  ></Edit>\r\n                )}\r\n              </div>\r\n              {entityButtons}\r\n            </div>\r\n\r\n            <div className=\"flex-grow h-0\">{entityContent}</div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CollectionsBuilder;\r\n","var _path, _circle, _circle2;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgOneToOne(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 40,\n    height: 9,\n    viewBox: \"0 0 40 9\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M9.36621 4.67223H30.7241M30.7241 4.67223L28.3085 2.25659M30.7241 4.67223L28.3085 7.08786\",\n    stroke: \"currentColor\",\n    strokeWidth: 1.37296,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _circle || (_circle = /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 4.69562,\n    cy: 4.49835,\n    r: 3.31773,\n    stroke: \"currentColor\",\n    strokeWidth: 1.37296\n  })), _circle2 || (_circle2 = /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 35.3948,\n    cy: 4.49835,\n    r: 3.31773,\n    stroke: \"currentColor\",\n    strokeWidth: 1.37296\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgOneToOne);\nexport default __webpack_public_path__ + \"static/media/one-to-one.19766dd4.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2, _circle, _circle2, _circle3;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgOneToMany(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 40,\n    height: 37,\n    viewBox: \"0 0 40 37\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10.5875 18.8431L30.4119 7.39751M30.4119 7.39751L26.8752 6.44984M30.4119 7.39751L29.4643 10.9342\",\n    stroke: \"currentColor\",\n    strokeWidth: 1.47153,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10.5873 18.8433L30.4117 30.2889M30.4117 30.2889L29.4641 26.7522M30.4117 30.2889L26.875 31.2366\",\n    stroke: \"currentColor\",\n    strokeWidth: 1.47153,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _circle || (_circle = /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 5.00165,\n    cy: 18.7858,\n    r: 3.55593,\n    stroke: \"currentColor\",\n    strokeWidth: 1.47153\n  })), _circle2 || (_circle2 = /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 35.2653,\n    cy: 32.5311,\n    r: 3.55593,\n    stroke: \"currentColor\",\n    strokeWidth: 1.47153\n  })), _circle3 || (_circle3 = /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 35.2653,\n    cy: 5.15558,\n    r: 3.55593,\n    stroke: \"currentColor\",\n    strokeWidth: 1.47153\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgOneToMany);\nexport default __webpack_public_path__ + \"static/media/one-to-many.ace4634d.svg\";\nexport { ForwardRef as ReactComponent };","export interface ToupleInputProps extends React.HTMLAttributes<HTMLDivElement> {\r\n  setValue: (a: any) => void;\r\n  options: {\r\n    value: any;\r\n    label: string;\r\n    icon?: React.FunctionComponent<React.SVGProps<SVGSVGElement>>;\r\n  }[];\r\n  value: any;\r\n  disabled?: boolean;\r\n}\r\n\r\nconst ToupleInput: React.FC<ToupleInputProps> = ({\r\n  className = \"\",\r\n  options,\r\n  value,\r\n  setValue,\r\n  disabled,\r\n  ...rest\r\n}) => {\r\n  return (\r\n    <div className={\"flex -mx-2 flex-wrap sm:flex-nowrap mb-10 \" + className} {...rest}>\r\n      {options.map((opt, i) => (\r\n        <div\r\n          data-testid={`touple-option-${opt.value}`}\r\n          key={opt.value}\r\n          onClick={() => setValue(opt.value)}\r\n          className={`sm:w-1/2 w-full mx-2 mb-3 sm:mb-0 py-7 select-none ${\r\n            disabled ? \"cursor-default\" : \"cursor-pointer\"\r\n          } flex items-center justify-center rounded ${\r\n            value === opt.value\r\n              ? \"border-4 border-orange-300\"\r\n              : `bg-gray-300 ${disabled ? \"\" : \"hover:bg-gray-301\"}`\r\n          }`}\r\n        >\r\n          <div className=\"flex items-center pointer-events-none\">\r\n            <div className={opt.icon ? \"mr-7\" : \"\"}>{opt.label}</div>\r\n            {opt.icon ? <opt.icon></opt.icon> : null}\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ToupleInput;\r\n","import Modal from \"@material-ui/core/Modal\";\r\nimport Input from \"components/Input\";\r\nimport React from \"react\";\r\nimport Button from \"components/Button\";\r\nimport {\r\n  createCollectionType,\r\n  updateCollectionType,\r\n  CollectionType,\r\n  deleteCollectionType,\r\n} from \"api/collectionTypes\";\r\nimport { useNotify } from \"components/NotificationsProvider\";\r\nimport { confirm } from \"components/Confirm\";\r\nimport { useFormik } from \"formik\";\r\nimport ToupleInput from \"components/ToupleInput\";\r\nimport CloseRounded from \"@material-ui/icons/CloseRounded\";\r\n\r\nexport interface AddNewCollectionProps {\r\n  open: boolean;\r\n  onClose: () => void;\r\n  collections: Array<CollectionType>;\r\n  editingCollectionDocId: string;\r\n  onCreate: (val: CollectionType) => void;\r\n  onUpdate: (val: Partial<CollectionType>) => void;\r\n  onDelete: (docId: string) => void;\r\n}\r\n\r\nfunction isNumeric(char: any) {\r\n  return char >= \"0\" && char <= \"9\";\r\n}\r\n\r\nfunction isLetter(str: any) {\r\n  return str.length === 1 && str.match(/[a-z]/i);\r\n}\r\n\r\nconst createId = (string: string) => {\r\n  let id = \"\";\r\n  for (let i = 0; i < string.length; i++) {\r\n    if (string[i] === \" \") {\r\n      id += \"-\";\r\n    } else if (\r\n      i > 0 &&\r\n      string[i - 1].toLowerCase() === string[i - 1] &&\r\n      string[i - 1] !== \" \" &&\r\n      string[i].toUpperCase() === string[i] &&\r\n      !isNumeric(string[i]) &&\r\n      isLetter(string[i])\r\n    ) {\r\n      id += \"-\" + string[i].toLowerCase();\r\n    } else {\r\n      id += string[i].toLowerCase();\r\n    }\r\n  }\r\n  return id;\r\n};\r\n\r\nconst AddNewCollection: React.FC<AddNewCollectionProps> = ({\r\n  open,\r\n  onClose,\r\n  collections,\r\n  editingCollectionDocId,\r\n  onCreate,\r\n  onUpdate,\r\n  onDelete,\r\n}) => {\r\n  const initialData = {\r\n    name: \"\",\r\n    id: \"\",\r\n    single: false,\r\n    draftable: true,\r\n    fields: [],\r\n    size: 0,\r\n    lastIndex: 0,\r\n    docId: \"\",\r\n  } as CollectionType;\r\n\r\n  const notify = useNotify();\r\n\r\n  const formIntialState = editingCollectionDocId.length\r\n    ? collections.find((x) => x.docId === editingCollectionDocId) || initialData\r\n    : initialData;\r\n\r\n  const { values, errors, handleSubmit, handleChange, setFieldValue, isSubmitting, submitCount } =\r\n    useFormik({\r\n      enableReinitialize: true,\r\n      onSubmit: async (vals, { resetForm }) => {\r\n        const id = createId(vals.name);\r\n\r\n        const res = editingCollectionDocId.length\r\n          ? await updateCollectionType(values.docId, { ...values, id })\r\n          : await createCollectionType({ ...values, id });\r\n        const actionType = editingCollectionDocId.length ? \"updated\" : \"created\";\r\n        if (!res.error) {\r\n          if (editingCollectionDocId.length) {\r\n            onUpdate(res);\r\n          } else {\r\n            onCreate(res);\r\n          }\r\n          resetForm();\r\n          onClose();\r\n          notify(\"Collection type \" + actionType + \"!\", { variant: \"success\" });\r\n        } else {\r\n          notify(\"Collection type was not \" + actionType, { variant: \"error\" });\r\n        }\r\n      },\r\n      initialValues: formIntialState,\r\n      validate: (vals) => {\r\n        let errors: { [key: string]: string } = {};\r\n        if (!vals.name) {\r\n          errors.name = \"Collection name is required\";\r\n        } else {\r\n          const id = createId(vals.name);\r\n          const index = collections.findIndex((x) => x.id === id);\r\n          if (index !== -1 && collections[index].docId !== editingCollectionDocId) {\r\n            errors.name = \"There is collection with the same name\";\r\n          }\r\n        }\r\n        return errors;\r\n      },\r\n    });\r\n\r\n  return (\r\n    <Modal open={open} hideBackdrop>\r\n      <div className=\"w-full h-full flex overflow-auto bg-black bg-opacity-40 p-7\">\r\n        <div\r\n          className=\"m-auto rounded bg-white w-full p-7 relative animate-littlemoveup\"\r\n          style={{ maxWidth: 600 }}\r\n        >\r\n          <CloseRounded\r\n            className=\"absolute top-0 right-0 cursor-pointer\"\r\n            onClick={onClose}\r\n          ></CloseRounded>\r\n          <div className=\"text-22px font-medium mb-12\">\r\n            {editingCollectionDocId.length ? \"Edit\" : \"Create\"} collection type\r\n          </div>\r\n          <div className=\"flex flex-wrap mb-7\">\r\n            <div className=\"mb-3 sm:w-1/2 w-full sm:pr-2\">\r\n              <div className=\"mb-2\">Collection name</div>\r\n              <Input\r\n                groundColor=\"white\"\r\n                className=\"h-34px\"\r\n                data-testid={`collection-name-input`}\r\n                error={submitCount > 0 && errors.name ? errors.name : false}\r\n                value={values.name}\r\n                name=\"name\"\r\n                onChange={handleChange}\r\n                onKeyDown={(e) => {\r\n                  if (e.key === \"Enter\") {\r\n                    handleSubmit();\r\n                  }\r\n                }}\r\n              ></Input>\r\n            </div>\r\n            <div className=\"mb-3 sm:w-1/2 w-full sm:pl-2\">\r\n              <div className=\"mb-2\">UID</div>\r\n              <Input\r\n                className=\"h-34px\"\r\n                groundColor=\"white\"\r\n                disabled\r\n                value={createId(values.name)}\r\n                name=\"id\"\r\n              ></Input>\r\n            </div>\r\n          </div>\r\n          <ToupleInput\r\n            disabled={editingCollectionDocId.length > 0}\r\n            value={values.single}\r\n            options={[\r\n              { value: false, label: \"Multiple elements\" },\r\n              { value: true, label: \"Single element\" },\r\n            ]}\r\n            setValue={(val) => (!editingCollectionDocId ? setFieldValue(\"single\", val) : {})}\r\n          ></ToupleInput>\r\n          {editingCollectionDocId ? (\r\n            <Button\r\n              noMinWidth\r\n              data-testid=\"delete-collection-btn\"\r\n              onClick={async () => {\r\n                if (\r\n                  await confirm({\r\n                    confirmation: \"Delete collection type?\",\r\n                  })\r\n                ) {\r\n                  const deleteDocId = editingCollectionDocId;\r\n                  let res = await deleteCollectionType(deleteDocId);\r\n                  if (!res.error) {\r\n                    onClose();\r\n                    onDelete(deleteDocId);\r\n                    notify(\"Collection type deleted!\", { variant: \"success\" });\r\n                  } else {\r\n                    notify(\"Collection type was not deleted\", { variant: \"error\" });\r\n                  }\r\n                  onClose();\r\n                }\r\n              }}\r\n              className=\"border-2 h-34px px-4 border-red-FF0000 text-red-FF0000 mb-10 hover:bg-red-FF0000 hover:text-white\"\r\n            >\r\n              Delete collection\r\n            </Button>\r\n          ) : null}\r\n\r\n          <div className=\"flex justify-between\">\r\n            <Button onClick={() => onClose()} className=\"bg-blue-300 hover:bg-blue-400 text-white\">\r\n              Cancel\r\n            </Button>\r\n            <Button\r\n              data-testid=\"submit-btn\"\r\n              disabled={isSubmitting}\r\n              onClick={() => handleSubmit()}\r\n              className=\"bg-fireck-4 hover:bg-fireck-4-hover h-34px\"\r\n            >\r\n              {isSubmitting ? \"Loading...\" : \"Submit\"}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default AddNewCollection;\r\n","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSubcollection(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 11,\n    height: 11,\n    viewBox: \"0 0 19 19\",\n    fill: \"currentColor\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0.570312 0.778809H6.57031V4.77881H0.570312V0.778809ZM12.5703 7.77881H18.5703V11.7788H12.5703V7.77881ZM12.5703 14.7788H18.5703V18.7788H12.5703V14.7788ZM10.5703 10.7788H4.57031V15.7788H10.5703V17.7788H4.57031H2.57031V6.77881H4.57031V8.77881H10.5703V10.7788Z\",\n    fill: \"currentColor\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSubcollection);\nexport default __webpack_public_path__ + \"static/media/subcollection.7a823e1e.svg\";\nexport { ForwardRef as ReactComponent };","interface WrapperProps {}\r\n\r\nconst Wrapper: React.FC<WrapperProps> = (props) => {\r\n  return (\r\n    <div\r\n      {...props}\r\n      className=\"w-8 rounded h-5 bg-fireck-4 text-center flex justify-center items-center text-10px font-medium\"\r\n    ></div>\r\n  );\r\n};\r\n\r\nexport default Wrapper;\r\n","import Wrapper from \"./Wrapper\";\r\n\r\nconst String: React.FC = () => {\r\n  return <Wrapper>Ab</Wrapper>;\r\n};\r\n\r\nexport default String;\r\n","import Wrapper from \"./Wrapper\";\r\n\r\nconst Number: React.FC = () => {\r\n  return <Wrapper>123</Wrapper>;\r\n};\r\n\r\nexport default Number;\r\n","import Wrapper from \"./Wrapper\";\r\n\r\nconst Map: React.FC = () => {\r\n  return <Wrapper>{\"{ }\"}</Wrapper>;\r\n};\r\n\r\nexport default Map;\r\n","import Wrapper from \"./Wrapper\";\r\n\r\nconst Array: React.FC = () => {\r\n  return <Wrapper>[ ]</Wrapper>;\r\n};\r\n\r\nexport default Array;\r\n","import ToggleOnOutlinedIcon from \"@material-ui/icons/ToggleOnOutlined\";\r\nimport Wrapper from \"./Wrapper\";\r\n\r\nconst Boolean: React.FC = () => {\r\n  return (\r\n    <Wrapper>\r\n      <ToggleOnOutlinedIcon fontSize=\"inherit\" className=\"text-lg\"></ToggleOnOutlinedIcon>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Boolean;\r\n","import CalendarTodayOutlinedIcon from \"@material-ui/icons/CalendarTodayOutlined\";\r\nimport Wrapper from \"./Wrapper\";\r\n\r\nconst Boolean: React.FC = () => {\r\n  return (\r\n    <Wrapper>\r\n      <CalendarTodayOutlinedIcon fontSize=\"inherit\" className=\"text-sm\"></CalendarTodayOutlinedIcon>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Boolean;\r\n","import PanoramaOutlinedIcon from \"@material-ui/icons/PanoramaOutlined\";\r\nimport Wrapper from \"./Wrapper\";\r\n\r\nconst Media: React.FC = () => {\r\n  return (\r\n    <Wrapper>\r\n      <PanoramaOutlinedIcon fontSize=\"inherit\" className=\"text-base\"></PanoramaOutlinedIcon>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Media;\r\n","import NotesIcon from \"@material-ui/icons/Notes\";\r\nimport Wrapper from \"./Wrapper\";\r\n\r\nconst Media: React.FC = () => {\r\n  return (\r\n    <Wrapper>\r\n      <NotesIcon fontSize=\"inherit\" className=\"text-base\"></NotesIcon>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Media;\r\n","import Wrapper from \"./Wrapper\";\r\n\r\nconst Boolean: React.FC = () => {\r\n  return (\r\n    <Wrapper>\r\n      <span className=\"text-10px\">JSON</span>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Boolean;\r\n","import ListRounded from \"@material-ui/icons/ListRounded\";\r\nimport Wrapper from \"./Wrapper\";\r\n\r\nconst Enum: React.FC = () => {\r\n  return (\r\n    <Wrapper>\r\n      <ListRounded fontSize=\"inherit\" className=\"text-xl\"></ListRounded>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Enum;\r\n","import VpnKeyRounded from \"@material-ui/icons/VpnKeyRounded\";\r\nimport Wrapper from \"./Wrapper\";\r\n\r\nconst Password: React.FC = () => {\r\n  return (\r\n    <Wrapper>\r\n      <VpnKeyRounded fontSize=\"inherit\" className=\"text-base\"></VpnKeyRounded>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Password;\r\n","import Link from \"@material-ui/icons/Link\";\r\nimport Wrapper from \"./Wrapper\";\r\n\r\nconst Relation: React.FC = () => {\r\n  return (\r\n    <Wrapper>\r\n      <Link fontSize=\"inherit\" className=\"text-lg\"></Link>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Relation;\r\n","import String from \"./String\";\r\nimport Number from \"./Number\";\r\nimport Map from \"./Map\";\r\nimport Array from \"./Array\";\r\nimport Boolean from \"./Boolean\";\r\nimport Date from \"./Date\";\r\nimport Media from \"./Media\";\r\nimport RichText from \"./RichText\";\r\nimport Json from \"./Json\";\r\nimport Enum from \"./Enum\";\r\nimport Password from \"./Password\";\r\nimport Relation from \"./Relation\";\r\nimport Subcollection from \"./Subcollection\";\r\n\r\nconst fieldTypes = [\r\n  { type: \"string\", Badge: String },\r\n  { type: \"number\", Badge: Number },\r\n  { type: \"map\", Badge: Map },\r\n  { type: \"array\", Badge: Array },\r\n  { type: \"boolean\", Badge: Boolean },\r\n  { type: \"date\", Badge: Date },\r\n  { type: \"media\", Badge: Media },\r\n  { type: \"rich-text\", Badge: RichText },\r\n  { type: \"json\", Badge: Json },\r\n  { type: \"enum\", Badge: Enum },\r\n  { type: \"password\", Badge: Password },\r\n  { type: \"relation\", Badge: Relation },\r\n  { type: \"collection\", Badge: Subcollection },\r\n];\r\n\r\nexport default fieldTypes;\r\n","import { ReactComponent as SubColIcon } from \"assets/subcollection.svg\";\r\nimport Wrapper from \"./Wrapper\";\r\n\r\nconst Media: React.FC = () => {\r\n  return (\r\n    <Wrapper>\r\n      <SubColIcon className=\"m-auto\"></SubColIcon>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Media;\r\n","import FieldTypes from \"components/FieldTypes\";\r\nimport React from \"react\";\r\nimport { FieldInputType } from \"api/collectionTypes\";\r\nimport Button from \"components/Button\";\r\nimport CloseRounded from \"@material-ui/icons/CloseRounded\";\r\n\r\nexport interface SelectFieldTypeProps {\r\n  proceed: Function;\r\n}\r\n\r\nconst SelectFieldType: React.FC<SelectFieldTypeProps> = ({ proceed }) => {\r\n  const [fieldType, setFieldType] = React.useState(\"string\" as FieldInputType);\r\n\r\n  return (\r\n    <div className=\"fixed left-0 top-0 w-full h-full flex overflow-auto bg-black bg-opacity-40 p-7\">\r\n      <div\r\n        className=\"m-auto rounded bg-white p-7 w-full relative animate-littlemoveup\"\r\n        style={{ maxWidth: 550 }}\r\n      >\r\n        <CloseRounded\r\n          className=\"cursor-pointer absolute top-0 right-0\"\r\n          onClick={() => proceed(false)}\r\n        ></CloseRounded>\r\n        <div className=\"text-22px font-medium mb-7\">Select field type</div>\r\n        <div className=\"mb-6\">\r\n          <div className=\"flex flex-wrap\">\r\n            {FieldTypes.map((x, i) => (\r\n              <div\r\n                data-testid={`fieldtype-option-${x.type}`}\r\n                onClick={() => setFieldType(x.type as FieldInputType)}\r\n                key={`field-type-${i}`}\r\n                className={`flex md:w-1/3 sm:w-1/2 w-full select-none p-3 border-4 border-solid border-white items-center cursor-pointer rounded  ${\r\n                  fieldType === x.type\r\n                    ? \"border-orange-300\"\r\n                    : \"hover:border-gray-300 hover:bg-gray-300\"\r\n                }`}\r\n              >\r\n                <div className=\"flex items-center pointer-events-none\">\r\n                  <x.Badge></x.Badge>\r\n                  <span className=\"capitalize ml-2 line-clamp-1\">{x.type.replace(\"-\", \" \")}</span>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n        <div className=\"flex justify-between\">\r\n          <Button\r\n            data-testid=\"cancel-field-type-btn\"\r\n            onClick={() => {\r\n              proceed(false);\r\n            }}\r\n            className=\"bg-blue-300 hover:bg-blue-400 text-white h-34px\"\r\n          >\r\n            Cancel\r\n          </Button>\r\n          <Button\r\n            data-testid=\"submit-field-type-btn\"\r\n            onClick={() => {\r\n              proceed(fieldType);\r\n            }}\r\n            className=\"bg-fireck-4 hover:bg-fireck-4-hover h-34px\"\r\n          >\r\n            Submit\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SelectFieldType;\r\n","import { callComponent } from \"api/callComponent\";\r\nimport { FieldInputType, FieldType } from \"api/collectionTypes\";\r\nimport SelectFieldType, { SelectFieldTypeProps } from \"./SelectFieldType\";\r\nimport SpecifyFieldDetails, { SpecifyFieldDetailsProps } from \"./SpecifyFieldDetails\";\r\n\r\nexport const getCollectionField = async ({\r\n  editableField,\r\n  existingFieldNames,\r\n  zLevel,\r\n}: {\r\n  editableField?: FieldType;\r\n  existingFieldNames?: string[];\r\n  zLevel: number;\r\n}) => {\r\n  let res = editableField\r\n    ? editableField.type\r\n    : await callComponent<SelectFieldTypeProps, FieldInputType | boolean>({\r\n        Component: SelectFieldType,\r\n        props: {},\r\n      });\r\n\r\n  if (typeof res === \"boolean\") return null;\r\n\r\n  const fieldType = res;\r\n  let res1 = await callComponent<SpecifyFieldDetailsProps, Omit<FieldType, \"type\"> | boolean>({\r\n    Component: SpecifyFieldDetails,\r\n    props: {\r\n      fieldType,\r\n      editableField,\r\n      existingFieldNames,\r\n      zLevel,\r\n      goBack: (closer) => {\r\n        closer();\r\n        getCollectionField({ editableField, existingFieldNames, zLevel });\r\n      },\r\n    },\r\n  });\r\n  if (typeof res1 === \"boolean\") return null;\r\n\r\n  return { ...res1, type: res };\r\n};\r\n","import React from \"react\";\r\nimport Input from \"components/Input\";\r\nimport Button from \"components/Button\";\r\nimport { FieldInputType, FieldType } from \"api/collectionTypes\";\r\nimport FieldTypes from \"components/FieldTypes\";\r\nimport Select from \"components/Select\";\r\nimport { ReactComponent as OneToOneIcon } from \"assets/one-to-one.svg\";\r\nimport { ReactComponent as OneToManyIcon } from \"assets/one-to-many.svg\";\r\nimport Label from \"components/Label\";\r\nimport ToupleInput from \"components/ToupleInput\";\r\nimport { useFormik } from \"formik\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { RootState } from \"store\";\r\nimport AddCircleOutlineRounded from \"@material-ui/icons/AddCircleOutlineRounded\";\r\nimport IconButton from \"components/IconButton\";\r\nimport EditOutlined from \"@material-ui/icons/EditOutlined\";\r\nimport { confirm } from \"components/Confirm\";\r\nimport Delete from \"@material-ui/icons/DeleteOutlineOutlined\";\r\nimport { getCollectionField } from \"./GetCollectionField\";\r\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\r\nimport { reorder } from \".\";\r\nimport CloseRounded from \"@material-ui/icons/CloseRounded\";\r\n\r\nexport interface SpecifyFieldDetailsProps {\r\n  editableField?: FieldType;\r\n  existingFieldNames?: string[];\r\n  fieldType: FieldInputType;\r\n  proceed: Function;\r\n  zLevel: number;\r\n  goBack: (closer: () => void) => void;\r\n}\r\n\r\nconst SpecifyFieldDetails: React.FC<SpecifyFieldDetailsProps> = ({\r\n  editableField,\r\n  existingFieldNames,\r\n  proceed,\r\n  fieldType,\r\n  zLevel,\r\n  goBack,\r\n}) => {\r\n  const initialValues = {\r\n    id: \"\",\r\n    mediaSingle: false,\r\n    enumOptions: [] as Array<string>,\r\n    relatedCollectionTypeDocId: \"\",\r\n    relationOneToOne: true,\r\n    displayOnTable: true,\r\n    stringLong: false,\r\n    collectionFields: [] as FieldType[],\r\n  };\r\n  const { values, errors, handleChange, handleSubmit, setFieldValue, submitCount } = useFormik({\r\n    onSubmit: (vals) => {\r\n      proceed(vals);\r\n    },\r\n    initialValues: editableField ? { ...initialValues, ...editableField } : initialValues,\r\n    validate: (vals) => {\r\n      const errors: any = {};\r\n\r\n      if (!vals.id) {\r\n        errors.id = \"Field name is required\";\r\n      } else if (existingFieldNames && existingFieldNames.findIndex((x) => x === vals.id) > -1) {\r\n        errors.id = \"There is field with the same name\";\r\n      }\r\n\r\n      if (fieldType === \"enum\" && vals.enumOptions.length < 2) {\r\n        errors.enumOptions = \"Enum requires at least two options\";\r\n      }\r\n\r\n      if (fieldType === \"relation\" && vals.relatedCollectionTypeDocId === \"\") {\r\n        errors.relatedCollectionTypeDocId = \"Select related collection\";\r\n      }\r\n\r\n      return errors;\r\n    },\r\n  });\r\n  const [enumOption, setEnumOption] = React.useState(\"\");\r\n\r\n  const SelectedFieldType = FieldTypes.find((x) => x.type === fieldType);\r\n  const collections = useSelector((state: RootState) => state.collectionTypes);\r\n\r\n  const onDragEnd = async (result: any) => {\r\n    if (!result.destination) {\r\n      return;\r\n    }\r\n    const fields = reorder(values.collectionFields, result.source.index, result.destination.index);\r\n    setFieldValue(\"collectionFields\", fields);\r\n  };\r\n\r\n  const addEnumOption = () => {\r\n    if (enumOption) {\r\n      let arr = [...values.enumOptions];\r\n      arr.push(enumOption);\r\n      setFieldValue(\"enumOptions\", arr);\r\n      setEnumOption(\"\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed left-0 top-0 w-full h-full flex overflow-auto bg-black bg-opacity-40\">\r\n      <div\r\n        style={{ maxWidth: 550 }}\r\n        className=\"m-auto rounded bg-white p-7 w-full relative animate-littlemoveup\"\r\n      >\r\n        <CloseRounded\r\n          className=\"absolute top-0 right-0 cursor-pointer\"\r\n          onClick={() => proceed(false)}\r\n        ></CloseRounded>\r\n        <div className=\"text-22px font-medium mb-9 flex items-center\">\r\n          {SelectedFieldType ? <SelectedFieldType.Badge></SelectedFieldType.Badge> : null}\r\n          <span className=\"ml-3\">\r\n            {editableField ? \"Edit\" : \"Add\"} {SelectedFieldType ? SelectedFieldType.type : \"\"} field\r\n          </span>\r\n        </div>\r\n        <div className=\"mb-9\">\r\n          <div className=\"mb-2\">Field name</div>\r\n          <Input\r\n            groundColor=\"white\"\r\n            className=\"h-34px\"\r\n            data-testid={`field-id-input-${zLevel}`}\r\n            error={submitCount > 0 ? errors.id : \"\"}\r\n            value={values.id}\r\n            name=\"id\"\r\n            onChange={handleChange}\r\n            onKeyDown={(e) => {\r\n              if (e.key === \"Enter\") {\r\n                handleSubmit();\r\n              }\r\n            }}\r\n          ></Input>\r\n        </div>\r\n\r\n        {fieldType === \"media\" ? (\r\n          <ToupleInput\r\n            data-testid={`media-touple-${zLevel}`}\r\n            options={[\r\n              { value: false, label: \"Multiple media\" },\r\n              { value: true, label: \"Single media\" },\r\n            ]}\r\n            value={values.mediaSingle}\r\n            setValue={(val) => setFieldValue(\"mediaSingle\", val)}\r\n          ></ToupleInput>\r\n        ) : fieldType === \"enum\" ? (\r\n          <div className=\"mb-10\">\r\n            <div className=\"mb-2\">Options</div>\r\n            <div className=\"flex flex-wrap\">\r\n              {values.enumOptions.map((x, i) => (\r\n                <div\r\n                  data-testid={`enum-option-${x}-${zLevel}`}\r\n                  key={`enum-option-${i}`}\r\n                  className=\"bg-gray-300 rounded flex items-center px-3 h-34px mr-3 mb-3\"\r\n                >\r\n                  <div className=\"mr-4\">{x}</div>\r\n                  <div\r\n                    className=\"cursor-pointer text-xs\"\r\n                    onClick={() => {\r\n                      let arr = [...values.enumOptions];\r\n                      arr.splice(i, 1);\r\n                      setFieldValue(\"enumOptions\", arr);\r\n                    }}\r\n                  >\r\n                    \r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n            <div className=\"flex\">\r\n              <Input\r\n                data-testid={`enum-option-input-${zLevel}`}\r\n                className=\"mr-3\"\r\n                error={submitCount > 0 ? errors.enumOptions?.toString() : \"\"}\r\n                type=\"text\"\r\n                value={enumOption}\r\n                onChange={(e) => setEnumOption(e.target.value)}\r\n                onKeyDown={(e) => {\r\n                  if (e.key === \"Enter\") {\r\n                    addEnumOption();\r\n                  }\r\n                }}\r\n              ></Input>\r\n              <Button\r\n                data-testid={`add-enum-option-btn-${zLevel}`}\r\n                onClick={addEnumOption}\r\n                className=\"bg-orange-300 hover:bg-orange-301\"\r\n              >\r\n                Add option\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        ) : fieldType === \"relation\" ? (\r\n          <div className=\"mb-10\">\r\n            <div className=\"mb-9\">\r\n              <Label\r\n                groundColor=\"white\"\r\n                error={submitCount > 0 ? errors.relatedCollectionTypeDocId : \"\"}\r\n                className=\"mb-2\"\r\n              >\r\n                Related collection\r\n              </Label>\r\n              <Select\r\n                groundColor=\"white\"\r\n                data-testid={`related-collection-select-${zLevel}`}\r\n                options={[\r\n                  { value: \"\", label: \"Select\" },\r\n                  ...collections.map((c) => ({ label: c.id, value: c.docId })),\r\n                ]}\r\n                value={values.relatedCollectionTypeDocId}\r\n                onChange={(e) => setFieldValue(\"relatedCollectionTypeDocId\", e.target.value)}\r\n              ></Select>\r\n            </div>\r\n            <div className=\"mb-2\">Relation type</div>\r\n            <ToupleInput\r\n              data-testid={`relation-multiplicity-touple-${zLevel}`}\r\n              value={values.relationOneToOne}\r\n              setValue={(val) => setFieldValue(\"relationOneToOne\", val)}\r\n              options={[\r\n                { value: true, label: \"One to one\", icon: OneToOneIcon },\r\n                { value: false, label: \"One to many\", icon: OneToManyIcon },\r\n              ]}\r\n            ></ToupleInput>\r\n          </div>\r\n        ) : fieldType === \"string\" ? (\r\n          <ToupleInput\r\n            data-testid={`string-type-touple-${zLevel}`}\r\n            value={values.stringLong}\r\n            setValue={(val) => setFieldValue(\"stringLong\", val)}\r\n            options={[\r\n              { label: \"Short text\", value: false },\r\n              { label: \"Long text\", value: true },\r\n            ]}\r\n          ></ToupleInput>\r\n        ) : fieldType === \"collection\" ? (\r\n          <div className=\"mb-9\">\r\n            <div className=\"flex mb-2\">\r\n              <div className=\"mr-2\">Fields</div>\r\n              <AddCircleOutlineRounded\r\n                data-testid={`add-field-for-subcollection-btn-${zLevel}`}\r\n                className=\"cursor-pointer\"\r\n                onClick={async () => {\r\n                  const field = await getCollectionField({\r\n                    existingFieldNames: values.collectionFields.map((x) => x.id),\r\n                    zLevel: zLevel + 1,\r\n                  });\r\n                  if (!field) return;\r\n                  const fields = [...values.collectionFields, field];\r\n                  setFieldValue(\"collectionFields\", fields);\r\n                }}\r\n              ></AddCircleOutlineRounded>\r\n            </div>\r\n            <DragDropContext onDragEnd={onDragEnd}>\r\n              <Droppable droppableId=\"droppable-sub\">\r\n                {(provided, snapshot) => (\r\n                  <div\r\n                    className=\" max-h-247px overflow-auto\"\r\n                    {...provided.droppableProps}\r\n                    ref={provided.innerRef}\r\n                  >\r\n                    {values.collectionFields.map((x, i) => {\r\n                      const Badge = FieldTypes.find((t) => t.type === x.type)?.Badge;\r\n                      return (\r\n                        <Draggable key={x.id} draggableId={x.id + 1} index={i}>\r\n                          {(provided, snapshot) => (\r\n                            <div\r\n                              key={`field-${i}`}\r\n                              className=\"rounded bg-gray-300 px-3 py-2 flex mb-2 items-center\"\r\n                              ref={provided.innerRef}\r\n                              {...provided.draggableProps}\r\n                              {...provided.dragHandleProps}\r\n                            >\r\n                              <div className=\"line-clamp-1 w-5/12 px-3\">{x.id}</div>\r\n                              <div className=\"flex w-4/12 flex-shrink-0\">\r\n                                {Badge ? <Badge></Badge> : null}\r\n                                <span className=\"ml-3 hidden sm:block line-clamp-1\">{x.type}</span>\r\n                              </div>\r\n                              <div className=\"flex items-center flex-grow justify-end\">\r\n                                <IconButton\r\n                                  variant=\"transparent\"\r\n                                  onClick={async () => {\r\n                                    const field = await getCollectionField({\r\n                                      zLevel: zLevel + 1,\r\n                                      editableField: x,\r\n                                      existingFieldNames: values.collectionFields\r\n                                        .map((f) => f.id)\r\n                                        .filter((f) => f !== x.id),\r\n                                    });\r\n\r\n                                    if (!field) return;\r\n\r\n                                    let fields = [...values.collectionFields];\r\n                                    fields[i] = { ...x, ...field };\r\n                                    setFieldValue(\"collectionFields\", fields);\r\n                                  }}\r\n                                >\r\n                                  <EditOutlined fontSize=\"small\"></EditOutlined>\r\n                                </IconButton>\r\n                                <IconButton\r\n                                  variant=\"transparent\"\r\n                                  onClick={async () => {\r\n                                    let res = await confirm({\r\n                                      confirmation: \"Do you really want to delete the field?\",\r\n                                    });\r\n                                    if (res) {\r\n                                      const fields = [...values.collectionFields];\r\n                                      fields.splice(i, 1);\r\n                                      setFieldValue(\"collectionFields\", fields);\r\n                                    }\r\n                                  }}\r\n                                >\r\n                                  <Delete fontSize=\"small\"></Delete>\r\n                                </IconButton>\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n                        </Draggable>\r\n                      );\r\n                    })}\r\n                    {provided.placeholder}\r\n                  </div>\r\n                )}\r\n              </Droppable>\r\n            </DragDropContext>\r\n          </div>\r\n        ) : null}\r\n        <div className=\"flex justify-between\">\r\n          <Button\r\n            data-testid={`cancel-field-details-btn-${zLevel}`}\r\n            onClick={() => goBack(() => proceed(false))}\r\n            className=\"bg-blue-300 hover:bg-blue-400 text-white h-34px\"\r\n          >\r\n            {editableField ? \"Cancel\" : \"Back\"}\r\n          </Button>\r\n          <Button\r\n            data-testid={`submit-field-details-btn-${zLevel}`}\r\n            type=\"submit\"\r\n            onClick={() => handleSubmit()}\r\n            className=\"bg-fireck-4 hover:bg-fireck-4-hover h-34px\"\r\n          >\r\n            Submit\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SpecifyFieldDetails;\r\n","import { UnControlled as CodeMirror } from \"react-codemirror2\";\r\nimport \"codemirror/lib/codemirror.css\";\r\nimport \"codemirror/theme/material.css\";\r\nimport \"codemirror/addon/edit/closebrackets\";\r\nimport \"codemirror/mode/javascript/javascript\";\r\nimport \"codemirror/addon/lint/lint\";\r\nimport \"codemirror/addon/lint/lint.css\";\r\n\r\ninterface TypescriptSyntaxProps {\r\n  code: string;\r\n}\r\n\r\nconst TypescriptSyntax: React.FC<TypescriptSyntaxProps> = ({ code }) => {\r\n  return (\r\n    <CodeMirror\r\n      value={code}\r\n      options={{\r\n        theme: \"material\",\r\n        lineNumbers: true,\r\n        readOnly: true,\r\n        mode: \"text/typescript\",\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default TypescriptSyntax;\r\n","import Modal from \"@material-ui/core/Modal\";\r\nimport { CollectionType, FieldType } from \"api/collectionTypes\";\r\nimport CloseRounded from \"@material-ui/icons/CloseRounded\";\r\nimport { useState } from \"react\";\r\nimport Button from \"components/Button\";\r\nimport TypescriptSyntax from \"components/TypescriptSyntax\";\r\nimport SimpleBar from \"simplebar-react\";\r\n\r\nexport interface InterfaceModalProps {\r\n  open: boolean;\r\n  collectionType?: CollectionType;\r\n  onClose: () => void;\r\n}\r\n\r\nconst getGap = (count: number) => {\r\n  return new Array(count).fill(0).reduce((a, b) => a + \" \", \"\");\r\n};\r\n\r\nconst getType = (type: FieldType, ident: number, identStep: number = 3): string => {\r\n  const docType = (fields: FieldType[], multiple: boolean = false) => {\r\n    return fields.length\r\n      ? `{\\n${fields.reduce(\r\n          (a, b) =>\r\n            a +\r\n            `${getGap(ident)}${\r\n              b.id.includes(\" \") || b.id.includes(\"-\") ? `\"${b.id}\"` : b.id\r\n            }: ${getType(b, ident + identStep)};\\n`,\r\n          \"\"\r\n        )}${getGap(ident - identStep)}${multiple ? \"}[]\" : \"}\"}`\r\n      : multiple\r\n      ? \"any[]\"\r\n      : \"null\";\r\n  };\r\n\r\n  const types = {\r\n    password: () => \"string\",\r\n    string: () => \"string\",\r\n    \"rich-text\": () => \"string\",\r\n    json: () => \"object\",\r\n    map: () => \"object\",\r\n    array: () => \"any[]\",\r\n    media: (x: FieldType) => (x.mediaSingle ? \"string\" : \"string[]\"),\r\n    date: () => \"string\",\r\n    enum: () => \"string[]\",\r\n    number: () => \"number\",\r\n    boolean: () => \"boolean\",\r\n    relation: (x: FieldType) => (x.relationOneToOne ? \"string\" : \"string[]\"),\r\n    collection: (x: FieldType) => docType(x.collectionFields, true),\r\n    document: (x: FieldType) => docType(x.documentFields),\r\n    script: () => \"object\",\r\n    \"script-V2\": () => \"object\",\r\n  };\r\n  return `${types[type.type](type)}`;\r\n};\r\n\r\nexport const generateInterface = (colType: CollectionType) => {\r\n  const docType: any = {\r\n    type: \"document\",\r\n    documentFields: colType.fields,\r\n  };\r\n\r\n  const intface = `interface Document ${getType(docType, 3)}`;\r\n  return intface;\r\n};\r\n\r\nconst InterfaceModal: React.FC<InterfaceModalProps> = ({ open, collectionType, onClose }) => {\r\n  const [copied, setCopied] = useState(false);\r\n\r\n  const interfaceString = collectionType ? generateInterface(collectionType) : \"\";\r\n\r\n  return !collectionType ? null : (\r\n    <Modal open={open} hideBackdrop>\r\n      <div\r\n        className=\"fixed left-0 top-0 w-full h-full flex overflow-auto bg-black bg-opacity-40 p-9\"\r\n        onMouseDown={onClose}\r\n      >\r\n        <div\r\n          className=\"bg-white p-7 m-auto rounded md:max-w-lg max-w-sm w-full relative animate-littlemoveup\"\r\n          onMouseDown={(e) => e.stopPropagation()}\r\n        >\r\n          <CloseRounded\r\n            className=\"absolute top-0 right-0 cursor-pointer\"\r\n            onClick={onClose}\r\n          ></CloseRounded>\r\n          <div className=\"mb-7 text-22px capitalize font-medium\">\r\n            {collectionType.name} interface\r\n          </div>\r\n          <div className=\"relative rounded overflow-hidden\">\r\n            {copied ? (\r\n              <div className=\"absolute z-20 text-white top-1 animate-littlemoveup right-1 cursor-pointer h-6 px-2 text-sm font-medium\">\r\n                Copied!\r\n              </div>\r\n            ) : (\r\n              <Button\r\n                noMinWidth\r\n                onClick={() => {\r\n                  navigator.clipboard.writeText(interfaceString);\r\n                  setCopied(true);\r\n                  setTimeout(() => {\r\n                    setCopied(false);\r\n                  }, 2000);\r\n                }}\r\n                className=\"absolute z-20 top-1 right-1 text-xs cursor-pointer h-6 px-3 bg-fireck-4 hover:bg-fireck-4-hover\"\r\n              >\r\n                Copy\r\n              </Button>\r\n            )}\r\n\r\n            <TypescriptSyntax code={interfaceString}></TypescriptSyntax>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default InterfaceModal;\r\n","import Button from \"components/Button\";\r\nimport React, { useEffect } from \"react\";\r\nimport {\r\n  updateCollectionType,\r\n  FieldInputType,\r\n  FieldType,\r\n  CollectionType,\r\n} from \"api/collectionTypes\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { RootState } from \"store\";\r\nimport EditOutlined from \"@material-ui/icons/EditOutlined\";\r\nimport DeleteOutlineOutlined from \"@material-ui/icons/DeleteOutlineOutlined\";\r\nimport CollectionModal from \"./CollectionModal\";\r\nimport FieldTypes from \"components/FieldTypes\";\r\nimport { confirm } from \"components/Confirm\";\r\nimport { useNotify } from \"components/NotificationsProvider\";\r\nimport SpecifyFieldDetails, { SpecifyFieldDetailsProps } from \"./SpecifyFieldDetails\";\r\nimport SelectFieldType, { SelectFieldTypeProps } from \"./SelectFieldType\";\r\nimport { callComponent } from \"api/callComponent\";\r\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\r\nimport DragIndicatorRounded from \"@material-ui/icons/DragIndicatorRounded\";\r\nimport InterfaceModal from \"./InterfaceModal\";\r\nimport SimpleBar from \"simplebar-react\";\r\nimport AddRounded from \"@material-ui/icons/AddRounded\";\r\nimport SettingsPage from \"components/SettingsPage\";\r\n\r\nexport interface CollectionsBuilderProps {}\r\n\r\nexport const reorder = (list: any[], startIndex: number, endIndex: number) => {\r\n  const result = Array.from(list);\r\n  const [removed] = result.splice(startIndex, 1);\r\n  result.splice(endIndex, 0, removed);\r\n\r\n  return result;\r\n};\r\n\r\nconst CollectionsBuilder: React.FC<CollectionsBuilderProps> = () => {\r\n  const [collectionModalOpen, setCollectionModalOpen] = React.useState(false as boolean);\r\n  const dispatch = useDispatch();\r\n  const notify = useNotify();\r\n  const [editingCollectionDocId, setEditingCollectionDocId] = React.useState(\"\");\r\n  const [selectedCollection, setSelectedCollection] = React.useState(\"\");\r\n  const [interfaceColType, setInterfaceColType] = React.useState<CollectionType>();\r\n\r\n  const { collections } = useSelector((state: RootState) => ({\r\n    collections: state.collectionTypes,\r\n  }));\r\n\r\n  useEffect(() => {\r\n    if (collections.length) {\r\n      setSelectedCollection(collections[0].docId);\r\n    }\r\n  }, [collections]);\r\n\r\n  const editField = async (fieldType: FieldInputType, selectedField: number) => {\r\n    const collection = collections.find((x) => x.docId === selectedCollection);\r\n    if (!collection) return;\r\n    let res = await callComponent<SpecifyFieldDetailsProps, FieldType | boolean>({\r\n      Component: SpecifyFieldDetails,\r\n      props: {\r\n        fieldType,\r\n        editableField: collection.fields[selectedField],\r\n        zLevel: 0,\r\n        goBack: (closer) => closer(),\r\n      },\r\n    });\r\n\r\n    if (!(typeof res === \"boolean\")) {\r\n      let newFields = JSON.parse(JSON.stringify(collection.fields));\r\n      newFields[selectedField] = { ...res };\r\n      dispatch({ type: \"UPDATE_COLLECTION_FIELDS\", payload: newFields, docId: collection.docId });\r\n      let res1 = await updateCollectionType(collection.docId, {\r\n        ...collection,\r\n        fields: newFields,\r\n      });\r\n      if (!res1.error) {\r\n        return { success: true };\r\n      }\r\n    }\r\n\r\n    return { success: false };\r\n  };\r\n\r\n  const addField = async () => {\r\n    const collection = collections.find((x) => x.docId === selectedCollection);\r\n    if (!collection) return;\r\n    let res = await callComponent<SelectFieldTypeProps, FieldInputType | boolean>({\r\n      Component: SelectFieldType,\r\n      props: {},\r\n    });\r\n\r\n    if (!(typeof res === \"boolean\")) {\r\n      const fieldType = res;\r\n      let res1 = await callComponent<SpecifyFieldDetailsProps, Omit<FieldType, \"type\"> | boolean>({\r\n        Component: SpecifyFieldDetails,\r\n        props: {\r\n          fieldType,\r\n          existingFieldNames: collection.fields.map((x) => x.id),\r\n          zLevel: 0,\r\n          goBack: (closer) => {\r\n            closer();\r\n            addField();\r\n          },\r\n        },\r\n      });\r\n      if (!(typeof res1 === \"boolean\")) {\r\n        const newFields = [...collection.fields, { type: fieldType, ...res1 }];\r\n        dispatch({ type: \"UPDATE_COLLECTION_FIELDS\", payload: newFields, docId: collection.docId });\r\n        let res2 = await updateCollectionType(collection.docId, {\r\n          ...collection,\r\n          fields: newFields,\r\n        });\r\n        if (!res2.error) {\r\n          notify(\"Field added!\", { variant: \"success\" });\r\n          return { success: true };\r\n        } else {\r\n          notify(\"Field was not added\", { variant: \"error\" });\r\n        }\r\n      }\r\n    }\r\n\r\n    return { success: false };\r\n  };\r\n\r\n  const onDragEnd = async (result: any) => {\r\n    if (!result.destination) {\r\n      return;\r\n    }\r\n\r\n    let col = collections.find((x) => x.docId === selectedCollection);\r\n    if (!col) return;\r\n\r\n    const fields = reorder(col.fields, result.source.index, result.destination.index);\r\n\r\n    dispatch({ type: \"UPDATE_COLLECTION_FIELDS\", payload: fields, docId: col.docId });\r\n    updateCollectionType(col.docId, {\r\n      ...col,\r\n      fields,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <SettingsPage\r\n        entityContent={\r\n          <div className=\"h-full bg-white rounded overflow-hidden\">\r\n            <DragDropContext onDragEnd={onDragEnd}>\r\n              <Droppable droppableId=\"droppable\">\r\n                {(provided, snapshot) => (\r\n                  <SimpleBar\r\n                    className=\"overflow-auto w-full h-full scrollbar-light scrollbar-thin py-0.5\"\r\n                    autoHide={false}\r\n                  >\r\n                    <div\r\n                      className=\"min-w-430px\"\r\n                      {...provided.droppableProps}\r\n                      ref={provided.innerRef as any}\r\n                    >\r\n                      {collections\r\n                        .find((x) => x.docId === selectedCollection)\r\n                        ?.fields.map((x, i) => {\r\n                          const Badge = FieldTypes.find((t) => t.type === x.type)?.Badge;\r\n                          return (\r\n                            <Draggable key={x.id} draggableId={x.id} index={i}>\r\n                              {(provided, snapshot) => (\r\n                                <div\r\n                                  data-testid={`field-id-${x.id}`}\r\n                                  key={`field-${i}`}\r\n                                  className=\"bg-white hover:bg-fireck-4 flex mb-2 items-center px-2 py-0.5\"\r\n                                  ref={provided.innerRef}\r\n                                  {...provided.draggableProps}\r\n                                >\r\n                                  <div {...provided.dragHandleProps}>\r\n                                    <DragIndicatorRounded fontSize=\"inherit\" className=\"text-lg\" />\r\n                                  </div>\r\n\r\n                                  <div className=\"line-clamp-1 w-5/12 px-3\">{x.id}</div>\r\n                                  <div className=\"flex w-4/12 flex-shrink-0 items-center\">\r\n                                    {Badge ? <Badge></Badge> : null}\r\n                                    <span className=\"ml-3 hidden sm:block line-clamp-1\">\r\n                                      {x.type}\r\n                                    </span>\r\n                                  </div>\r\n                                  {x.isDefault ? null : (\r\n                                    <div className=\"flex items-center flex-grow justify-end\">\r\n                                      <div\r\n                                        data-testid={`edit-for-field-${x.id}`}\r\n                                        className=\"h-5 w-5 flex items-center justify-center rounded cursor-pointer hover:bg-white\"\r\n                                        onClick={() => {\r\n                                          editField(x.type, i);\r\n                                        }}\r\n                                      >\r\n                                        <EditOutlined\r\n                                          fontSize=\"inherit\"\r\n                                          classes={{ root: \"pointer-events-none text-lg\" }}\r\n                                        ></EditOutlined>\r\n                                      </div>\r\n                                      <div\r\n                                        className=\"h-5 w-5 flex items-center justify-center rounded cursor-pointer hover:bg-red-FF0000 hover:text-white\"\r\n                                        data-testid={`delete-for-field-${x.id}`}\r\n                                        onClick={async () => {\r\n                                          let res = await confirm({\r\n                                            confirmation: \"Delete field?\",\r\n                                          });\r\n                                          if (res) {\r\n                                            let updatedCollection = JSON.parse(\r\n                                              JSON.stringify(\r\n                                                collections.find(\r\n                                                  (x) => x.docId === selectedCollection\r\n                                                )\r\n                                              )\r\n                                            );\r\n                                            updatedCollection.fields.splice(i, 1);\r\n                                            dispatch({\r\n                                              type: \"UPDATE_COLLECTION_FIELDS\",\r\n                                              payload: updatedCollection.fields,\r\n                                              docId: selectedCollection,\r\n                                            });\r\n\r\n                                            updateCollectionType(\r\n                                              selectedCollection,\r\n                                              updatedCollection\r\n                                            );\r\n                                          }\r\n                                        }}\r\n                                      >\r\n                                        <DeleteOutlineOutlined\r\n                                          classes={{ root: \"pointer-events-none text-lg\" }}\r\n                                          fontSize=\"inherit\"\r\n                                        ></DeleteOutlineOutlined>\r\n                                      </div>\r\n                                    </div>\r\n                                  )}\r\n                                </div>\r\n                              )}\r\n                            </Draggable>\r\n                          );\r\n                        })}\r\n                      {provided.placeholder}\r\n                    </div>\r\n                  </SimpleBar>\r\n                )}\r\n              </Droppable>\r\n            </DragDropContext>\r\n          </div>\r\n        }\r\n        selectedEntityId={selectedCollection}\r\n        entity=\"collection\"\r\n        enitityPlural=\"collections\"\r\n        entities={collections}\r\n        onSelectEntity={(docId) => setSelectedCollection(docId)}\r\n        onAddEntity={() => setCollectionModalOpen(true)}\r\n        onInvokeEntityEdit={() => {\r\n          setEditingCollectionDocId(selectedCollection);\r\n          setCollectionModalOpen(true);\r\n        }}\r\n        entityButtons={\r\n          <div className=\"flex flex-wrap\">\r\n            <Button\r\n              data-testid=\"view-interface-btn\"\r\n              onClick={() =>\r\n                setInterfaceColType(collections.find((x) => x.docId === selectedCollection))\r\n              }\r\n              noMinWidth\r\n              className=\"border border-white h-28px text-white mr-3 mb-3 px-5\"\r\n            >\r\n              <div className=\"flex items-center pointer-events-none\">Interface</div>\r\n            </Button>\r\n            <Button\r\n              noMinWidth\r\n              data-testid=\"add-new-field-btn\"\r\n              onClick={async () => {\r\n                addField();\r\n              }}\r\n              className=\"bg-fireck-4 hover:bg-fireck-4-hover mb-3 h-28px pl-3\"\r\n            >\r\n              <div className=\"flex items-center pointer-events-none\">\r\n                <AddRounded className=\"mr-2 text-lg\" fontSize=\"inherit\"></AddRounded>\r\n                <span>Add field</span>\r\n              </div>\r\n            </Button>\r\n          </div>\r\n        }\r\n      ></SettingsPage>\r\n\r\n      <CollectionModal\r\n        editingCollectionDocId={editingCollectionDocId}\r\n        collections={collections}\r\n        onCreate={(val) => dispatch({ type: \"ADD_COLLECTION_TYPE\", payload: val })}\r\n        onUpdate={(val) => {\r\n          dispatch({ type: \"UPDATE_COLLECTION_TYPE\", payload: val, docId: val.docId });\r\n        }}\r\n        onDelete={(docId) => {\r\n          setSelectedCollection(\"\");\r\n          setEditingCollectionDocId(\"\");\r\n          dispatch({ type: \"DELETE_COLLECTION_TYPE\", payload: docId });\r\n        }}\r\n        open={collectionModalOpen}\r\n        onClose={() => {\r\n          setCollectionModalOpen(false);\r\n          setEditingCollectionDocId(\"\");\r\n        }}\r\n      ></CollectionModal>\r\n      <InterfaceModal\r\n        onClose={() => setInterfaceColType(undefined)}\r\n        open={interfaceColType ? true : false}\r\n        collectionType={interfaceColType}\r\n      ></InterfaceModal>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CollectionsBuilder;\r\n"],"sourceRoot":""}