{"version":3,"sources":["api/collections.ts","api/callComponent.tsx","components/Select.tsx","../node_modules/@material-ui/icons/AddRounded.js","../node_modules/@material-ui/icons/OpenInNew.js","components/Label.tsx","components/TableElements/FilesCell.tsx","../node_modules/@material-ui/icons/ExpandMoreRounded.js","components/TableElements/AddFilter.tsx","components/TableElements/CreateIndex.tsx","hooks/useFetch.ts","components/TableElements/CollectionTable.tsx","pages/Collection.tsx"],"names":["getAuthHeader","user","store","getState","token","getCollection","collectionId","orderBy","startAt","startAfter","where","limit","populateRef","url","window","location","origin","fetch","headers","Authorization","then","x","json","addDocument","doc","method","body","JSON","stringify","error","deleteDocument","docId","getDocument","updateDocument","collectionType","callComponent","Component","props","Promise","resolve","reject","wrapper","document","getElementById","appendChild","createElement","ReactDOM","render","proceed","val","unmountComponentAtNode","parentNode","removeChild","WarningIcon","React","forwardRef","ref","className","size","Select","options","white","classNames","spellCheck","map","i","data-testid","value","label","title","placement","_interopRequireDefault","require","_interopRequireWildcard","Object","defineProperty","exports","default","_default","d","fontSize","Label","children","Image","rest","style","backgroundImage","src","alt","Files","files","file","id","useRef","Math","random","useState","active","setActive","slice","f","marginLeft","onMouseEnter","onMouseLeave","length","AddFilterModal","onValue","open","setOpen","useFormik","onSubmit","vals","a","resetForm","initialValues","operator","fieldId","validate","errors","keys","forEach","values","handleChange","submitCount","handleSubmit","isSubmitting","Button","noMinWidth","onClick","Modal","onMouseDown","e","stopPropagation","name","onChange","fields","placeholder","includes","disabled","CreateIndexModal","useFetch","filters","inView","docs","setDocs","inViewRef","endReached","notify","useNotify","console","log","getOptions","useCallback","data","direction","onError","message","split","variant","useEffect","current","newData","prev","fetcher","Table","onPick","blackList","singleSelect","history","useHistory","setFilters","filter","field","displayOnTable","selected","setSelected","setOrderBy","endIsInView","setEndIsInView","onDeleteSelected","confirm","confirmation","onOrder","undefined","selectHandler","checked","arr","index","findIndex","splice","AddFilter","autoHide","Checkbox","classes","root","select","target","push","onEdit","j","type","mediaSingle","FilesCell","toString","substring","Collection","match","params","useSelector","state","collectionTypes","find"],"mappings":"iHAAA,sLAEMA,EAAgB,WACpB,IAAMC,EAAOC,IAAMC,WAAWF,KAE9B,MAAO,WADOA,EAAOA,EAAKG,MAAQ,OAoBvBC,EAAgB,SAAC,GAQD,IAP3BC,EAO0B,EAP1BA,aACAC,EAM0B,EAN1BA,QACAC,EAK0B,EAL1BA,QACAC,EAI0B,EAJ1BA,WACAC,EAG0B,EAH1BA,MAG0B,IAF1BC,aAE0B,MAFlB,GAEkB,MAD1BC,mBAC0B,SACpBC,EAAG,UACPC,OAAOC,SAASC,OADT,gBAEDV,EAFC,kBAEqBK,EAFrB,wBAE0CC,GAF1C,OAGPL,EAAO,mBAAeA,GAAY,IAH3B,OAINC,EAAO,mBAAeA,GAAYC,EAAU,sBAAkBA,GAAe,IAJvE,OAKPC,EAAK,iBAAaA,GAAU,IAE9B,OAAOO,MAAMJ,EAAK,CAAEK,QAAS,CAAEC,cAAenB,OAAqBoB,MAAK,SAACC,GAAD,OAAOA,EAAEC,WAGtEC,EAAc,SAACjB,EAAsBkB,GAChD,IACE,OAAOP,MAAMH,OAAOC,SAASC,OAAhB,eAAiCV,GAAgB,CAC5DmB,OAAQ,OACRP,QAAS,CAAEC,cAAenB,KAC1B0B,KAAMC,KAAKC,UAAUJ,KACpBJ,MAAK,SAACC,GAAD,OAAOA,EAAEC,UACjB,MAAOO,GACP,MAAO,CAAEA,WAIAC,EAAiB,SAACxB,EAAsByB,GACnD,IACE,OAAOd,MAAMH,OAAOC,SAASC,OAAhB,eAAiCV,EAAjC,YAAiDyB,GAAS,CACrEN,OAAQ,SACRP,QAAS,CAAEC,cAAenB,OACzBoB,MAAK,SAACC,GAAD,OAAOA,EAAEC,UACjB,MAAOO,GACP,MAAO,CAAEA,WAIAG,EAAc,SAAC1B,EAAsByB,GAChD,IACE,OAAOd,MACLH,OAAOC,SAASC,OAAhB,eAAiCV,GAAjC,OAAgDyB,EAAK,WAAOA,GAAU,GAAtE,sBACA,CACEb,QAAS,CAAEC,cAAenB,OAE5BoB,MAAK,SAACC,GAAD,OAAOA,EAAEC,UAChB,MAAOO,GACP,MAAO,CAAEA,WAIAI,EAAiB,SAC5BC,EACAH,EACAP,GAEA,IACE,OAAOP,MAAMH,OAAOC,SAASC,OAAhB,eAAiCkB,EAAjC,YAAmDH,GAAS,CACvEN,OAAQ,MACRP,QAAS,CAAEC,cAAenB,KAC1B0B,KAAMC,KAAKC,UAAUJ,KACpBJ,MAAK,SAACC,GAAD,OAAOA,EAAEC,UACjB,MAAOO,GACP,MAAO,CAAEA,Y,8HC7EN,SAASM,EAAT,GAAwF,IAAxDC,EAAuD,EAAvDA,UAAWC,EAA4C,EAA5CA,MAChD,OAAO,IAAIC,SAAQ,SAACC,EAASC,GAAY,IAAD,EAChCC,EAAO,UAAGC,SAASC,eAAe,eAA3B,aAAG,EAAiCC,YAAYF,SAASG,cAAc,QAChFJ,GACFK,IAASC,OACP,cAAC,IAAD,CAAU7C,MAAOA,IAAjB,SACE,cAACkC,EAAD,2BACMC,GADN,IAEEW,QAAS,SAACC,GAAa,IAAD,EACpBH,IAASI,uBAAuBT,GAChC,UAAAA,EAAQU,kBAAR,SAAoBC,YAAYX,GAChCF,EAAQU,SAIdR,Q,iHCxBFY,EAAcC,IAAMC,YAAW,SAAqBlB,EAAYmB,GACpE,OACE,+CAASnB,GAAT,IAAgBmB,IAAKA,EAArB,SACE,cAAC,IAAD,CAAsBC,UAAU,eAAeC,KAAM,WA8C5CC,IAlCuB,SAAC,GAMhC,IAAD,IALJF,iBAKI,MALQ,GAKR,EAJJG,EAII,EAJJA,QACA/B,EAGI,EAHJA,MAGI,IAFJgC,aAEI,SADDxB,EACC,uDACJ,OACE,sBAAKoB,UAAS,UAAKA,EAAL,+BAAd,UACE,gDACEA,UAAWK,IAAW,gEAAiE,CACrF,iBAAkBjC,EAClB,yBAA0BA,EAC1B,+BAAgCgC,EAChC,wBAAyBA,KAEvBxB,GAPN,IAQE0B,YAAY,EARd,SAUGH,EAAQI,KAAI,SAAC3C,EAAG4C,GAAJ,OACX,wBAAQC,cAAA,wBAA8B7C,EAAE8C,OAA0BA,MAAO9C,EAAE8C,MAA3E,SACG9C,EAAE+C,OADiD,OAASH,SAKlEpC,EACC,cAAC,IAAD,CAASwC,MAAOxC,EAAOyC,UAAU,MAAjC,SACE,cAACjB,EAAD,CAAaI,UAAU,sCAEvB,U,iCC/CV,IAAIc,EAAyBC,EAAQ,IAEjCC,EAA0BD,EAAQ,IAEtCE,OAAOC,eAAeC,EAAS,aAAc,CAC3CT,OAAO,IAETS,EAAQC,aAAU,EAElB,IAAIvB,EAAQmB,EAAwBD,EAAQ,IAIxCM,GAAW,EAFMP,EAAuBC,EAAQ,KAElBK,SAAuBvB,EAAMT,cAAc,OAAQ,CACnFkC,EAAG,wIACD,cAEJH,EAAQC,QAAUC,G,iCCjBlB,IAAIP,EAAyBC,EAAQ,IAEjCC,EAA0BD,EAAQ,IAEtCE,OAAOC,eAAeC,EAAS,aAAc,CAC3CT,OAAO,IAETS,EAAQC,aAAU,EAElB,IAAIvB,EAAQmB,EAAwBD,EAAQ,IAIxCM,GAAW,EAFMP,EAAuBC,EAAQ,KAElBK,SAAuBvB,EAAMT,cAAc,OAAQ,CACnFkC,EAAG,uIACD,aAEJH,EAAQC,QAAUC,G,+FCTZzB,EAAcC,IAAMC,YAAW,SAAqBlB,EAAYmB,GACpE,OACE,+CAASnB,GAAT,IAAgBmB,IAAKA,EAArB,SACE,cAAC,IAAD,CAAcC,UAAU,uBAAuBuB,SAAS,kBAkB/CC,IAbqB,SAAC,GAAyC,IAAD,IAAtCxB,iBAAsC,MAA1B,GAA0B,EAAtByB,EAAsB,EAAtBA,SAAUrD,EAAY,EAAZA,MAC/D,OACE,sBAAK4B,UAAS,mDAA8CA,GAA5D,UACE,8BAAMyB,IACLrD,EACC,cAAC,IAAD,CAASwC,MAAOxC,EAAOyC,UAAU,MAAjC,SACE,cAACjB,EAAD,CAAaI,UAAU,sCAEvB,U,oFCxBJ0B,EAAQ,SAAC,GAA6E,IAA3EtE,EAA0E,EAA1EA,IAA0E,IAArE4C,iBAAqE,MAAzD,GAAyD,EAAlD2B,EAAkD,mCACzF,OACE,gDACMA,GADN,IAEE3B,UAAW,2DAA6DA,EAF1E,UAIE,qBACEA,UAAW,gDACX4B,MAAO,CAAEC,gBAAgB,OAAD,OAASzE,EAAT,QAE1B,qBAAK0E,IAAK1E,EAAK2E,IAAI,GAAG/B,UAAU,gBAgDvBgC,IAtCqB,SAAC,GAAqB,IAAnBC,EAAkB,EAAlBA,MAAOC,EAAW,EAAXA,KACtCC,EAAKtC,IAAMuC,OAAeC,KAAKC,UACrC,EAA4BzC,IAAM0C,UAAU,GAA5C,mBAAOC,EAAP,KAAeC,EAAf,KAEA,OACE,sBAAKzC,UAAU,sBAAf,WACIiC,IAAgBC,EAAO,CAACA,GAAQ,KAAIQ,MAAM,EAAG,GAAGnC,KAAI,SAACoC,EAAGnC,GAAJ,OACpD,sBAEEoB,MAAO,CAAEgB,WAAkB,IAANpC,EAAU,EAAI,SACnCR,UAAU,WAHZ,UAKE,cAAC0B,EAAD,CACE1B,UAAU,UACV6C,aAAc,kBAAMJ,EAAUjC,IAC9BsC,aAAc,kBAAML,GAAW,IAC/BrF,IAAKuF,IAEP,qBACE3C,UAAS,UACPwC,IAAWhC,EAAI,GAAK,SADb,iDADX,SAKE,cAACkB,EAAD,CAAOtE,IAAKuF,EAAG3C,UAAU,+CAhB7B,UACUmC,EADV,iBACqB3B,OAmBtByB,GAASA,EAAMc,OAAS,EACvB,qBAAKnB,MAAO,CAAEgB,WAAY,SAAW5C,UAAU,WAA/C,SACE,sBAAKA,UAAU,yHAAf,UACGiC,EAAMc,OAAS,EADlB,SAIA,U,iCCrDV,IAAIjC,EAAyBC,EAAQ,IAEjCC,EAA0BD,EAAQ,IAEtCE,OAAOC,eAAeC,EAAS,aAAc,CAC3CT,OAAO,IAETS,EAAQC,aAAU,EAElB,IAAIvB,EAAQmB,EAAwBD,EAAQ,IAIxCM,GAAW,EAFMP,EAAuBC,EAAQ,KAElBK,SAAuBvB,EAAMT,cAAc,OAAQ,CACnFkC,EAAG,4KACD,qBAEJH,EAAQC,QAAUC,G,qOC4GH2B,EAjHuC,SAAC,GAAiC,IAA/BvE,EAA8B,EAA9BA,eAAgBwE,EAAc,EAAdA,QAcvE,EAAwBpD,IAAM0C,UAAS,GAAvC,mBAAOW,EAAP,KAAaC,EAAb,KAEA,EAAkFC,YAAU,CAC1FC,SAAS,WAAD,4BAAE,WAAOC,EAAP,kBAAAC,EAAA,sDAAeC,EAAf,EAAeA,UACvBP,EAAQK,GACRH,GAAQ,GACRK,IAHQ,2CAAF,qDAAC,GAKTC,cAAe,CACb/C,MAAO,GACPgD,SAAU,GACVC,QAAS,IAEXC,SAAU,SAACN,GACT,IAAIO,EAAc,GAMlB,OALA5C,OAAO6C,KAAKR,GAAMS,SAAQ,SAACnG,GACpB0F,EAAK1F,KACRiG,EAAOjG,GAAK,eAGTiG,KAlBHG,EAAR,EAAQA,OAAQH,EAAhB,EAAgBA,OAAQI,EAAxB,EAAwBA,aAAcC,EAAtC,EAAsCA,YAAaC,EAAnD,EAAmDA,aAAcC,EAAjE,EAAiEA,aAsBjE,OACE,qCACE,cAACC,EAAA,EAAD,CACEC,YAAU,EACVC,QAAS,kBAAMpB,GAAQ,IACvBnD,UAAU,6GAHZ,qBAOA,cAACwE,EAAA,EAAD,CAAOtB,KAAMA,EAAb,SACE,qBAAKlD,UAAU,wCAAwCyE,YAAa,kBAAMtB,GAAQ,IAAlF,SACE,sBAAKsB,YAAa,SAACC,GAAD,OAAOA,EAAEC,mBAAmB3E,UAAU,+BAAxD,UACE,sBAAKA,UAAU,4BAAf,UACE,sBAAKA,UAAU,4BAAf,UACE,cAACwB,EAAA,EAAD,CAAOxB,UAAU,OAAO5B,MAAO8F,EAAc,EAAIL,EAAOF,QAAU,KAAlE,mBAGA,cAACzD,EAAA,EAAD,CACE0E,KAAK,UACLC,SAAUZ,EACVvD,MAAOsD,EAAOL,QACdxD,QAAO,CACL,CAAEO,MAAO,GAAIC,MAAO,WADf,mBAEFlC,EAAeqG,OAAOvE,KAAI,SAAC3C,GAAD,MAAQ,CAAE8C,MAAO9C,EAAEuE,GAAIxB,MAAO/C,EAAEuE,cAInE,sBAAKnC,UAAU,4BAAf,UACE,cAACwB,EAAA,EAAD,CAAOxB,UAAU,OAAO5B,MAAO8F,EAAc,EAAIL,EAAOH,SAAW,KAAnE,sBAGA,cAACxD,EAAA,EAAD,CACE0E,KAAK,WACLC,SAAUZ,EACVvD,MAAOsD,EAAON,SACdvD,QAAO,CACL,CAAEO,MAAO,GAAIC,MAAO,WADf,mBAxEL,CAChB,IACA,KACA,KACA,IACA,KACA,KACA,iBACA,qBACA,KACA,UAgE6BJ,KAAI,SAAC3C,GAAD,MAAQ,CAAE8C,MAAO9C,EAAG+C,MAAO/C,aAIlD,sBAAKoC,UAAU,4BAAf,UACE,cAACwB,EAAA,EAAD,CAAOxB,UAAU,OAAO5B,MAAO8F,EAAc,EAAIL,EAAOnD,MAAQ,KAAhE,mBAGA,cAAC,IAAD,CACEqE,YACE,CAAC,KAAM,SAAU,sBAAsBC,SAAShB,EAAON,UACnD,sBACA,QAEN1D,UAAU,oBACVU,MAAOsD,EAAOtD,MACdmE,SAAUZ,EACVW,KAAK,gBAIX,qBAAK5E,UAAU,mBAAf,SACE,cAACqE,EAAA,EAAD,CACEY,SAAUb,EACVG,QAAS,kBAAMJ,KACfG,YAAU,EACVtE,UAAU,oCAJZ,8B,8DCvGRkF,EAAoD,SAAC,GAAsB,IAApB3F,EAAmB,EAAnBA,QAASnC,EAAU,EAAVA,IACpE,OACE,qBACE4C,UAAU,+DACVyE,YAAa,kBAAMlF,GAAQ,IAF7B,SAIE,sBAAKkF,YAAa,SAACC,GAAD,OAAOA,EAAEC,mBAAmB3E,UAAU,+BAAxD,UACE,qBAAKA,UAAU,QAAf,oDACA,sBAAKA,UAAU,uBAAf,UACE,cAACqE,EAAA,EAAD,CACEC,YAAU,EACVtE,UAAU,kDACVuE,QAAS,kBAAMhF,GAAQ,IAHzB,mBAOA,cAAC8E,EAAA,EAAD,CACEC,YAAU,EACVtE,UAAU,6CACVuE,QAAS,WACPlH,OAAO6F,KAAK9F,EAAK,UACjBmC,GAAQ,IALZ,6BCmFK4F,EArGE,SACftI,EACAuI,EACAtI,EACAuI,GAEA,MAAwB9C,mBAAqB,IAA7C,mBAAO+C,EAAP,KAAaC,EAAb,KACMC,EAAYpD,kBAAO,GACnBqD,EAAarD,kBAAO,GACpBsD,EAASC,cAEfC,QAAQC,IAAI,4BAA6BR,EAAQvI,EAASsI,GAE1D,IAAMU,EAAaC,uBACjB,SAACC,GACC,IAAI7F,EAAgC,CAAEtD,eAEtCsD,MAAgB,GAChBA,QAAkB,IAqBlB,OAnBAiF,EAAQrB,SAAQ,SAACpB,EAAGnC,GAClBL,EAAQlD,QAAUuD,EAAI,EAAI,IAAM,IAAMmC,EAAEgB,QAAU,IAAMhB,EAAEe,SAAW,IAAMf,EAAEjC,MACzE5D,GAAWA,EAAQ6G,UAAYhB,EAAEgB,UACnCxD,EAAQrD,UAAYqD,EAAQrD,QAAU,IAAM,IAAM6F,EAAEgB,YAIpD7G,IACFqD,EAAQrD,UAAYqD,EAAQrD,QAAU,IAAM,IAAzB,UAAkCA,EAAQ6G,QAA1C,YAAqD7G,EAAQmJ,YAE7EnJ,GAAYsI,EAAQrC,SACvB5C,EAAQrD,QAAU,iBAGhBkJ,EAAKjD,SACP5C,EAAQnD,WAAagJ,EAAKA,EAAKjD,OAAS,GAAGjG,EAAUA,EAAQ6G,QAAU,cAEzExD,EAAQhD,aAAc,EAEfgD,IAET,CAACrD,EAASsI,EAASvI,IAGfqJ,EAAU,SAACC,GDRQ,IAAC/I,ECSpB+I,EAAQnB,SAAS,wBDTG5H,ECUV+I,EAAQC,MAAM,YAAY,GDT1C1H,YAA8C,CAAEC,UAAWuG,EAAkBtG,MAAO,CAAExB,UCWlFsI,EAAOS,EAAS,CAAEE,QAAS,WAkD/B,OA9CAC,qBAAU,WACR,sBAAC,8BAAA/C,EAAA,mEAEOzG,IAAWsI,EAAQrC,OAF1B,uBAGK0C,EAAWc,SAAU,EACjBpG,EAAU2F,EAAW,IAJ9B,SAK2BlJ,YAAcuD,GALzC,QAKWqG,EALX,QAMiBpI,MACV8H,EAAQM,EAAQpI,QAEhBmH,EAAQiB,GACJA,EAAQzD,QAAU5C,EAAQjD,OAAS,MACrCuI,EAAWc,SAAU,IAX9B,yDAgBGX,QAAQC,IAAR,MAhBH,yDAAD,KAmBC,CAAC/I,EAASsI,IAEbkB,qBAAU,WACRd,EAAUe,QAAUlB,EACP,uCAAG,8BAAA9B,EAAA,yDACTkC,EAAWc,UAAWf,EAAUe,QADvB,uBAERpG,EAAU2F,EAAWR,GACzBM,QAAQC,IAAI1F,GAHA,SAIUvD,YAAcuD,GAJxB,SAINqG,EAJM,QAMDzD,QACPuC,EAAKvC,QACLyD,EAAQA,EAAQzD,OAAS,GAAGzE,QAAUgH,EAAKA,EAAKvC,OAAS,GAAGzE,QAC7DgH,EAAKvC,SAENwC,GAAQ,SAACkB,GAAD,4BAAcA,GAAd,YAAuBD,OAG7BA,EAAQzD,QAAU5C,EAAQjD,OAAS,MACrCuI,EAAWc,SAAU,GAfX,2CAAH,oDAmBbG,KACC,CAACrB,EAAQC,IAEL,CAAEA,OAAMC,Y,SCqKFoB,IAjPqB,SAAC,GAK9B,IAJLlI,EAII,EAJJA,eACAmI,EAGI,EAHJA,OAGI,IAFJC,iBAEI,MAFQ,GAER,MADJC,oBACI,SACJlB,QAAQC,IAAI,eAAgBiB,GAC5B,IAOMC,EAAUC,cAEhB,EAA8BnH,IAAM0C,SAAuB,IAA3D,mBAAO6C,EAAP,KAAgB6B,EAAhB,KACMnC,EAASrG,EAAeqG,OAAOoC,QAAO,SAACC,GAAD,OAAWA,EAAMC,kBAC7D,EAAgCvH,IAAM0C,SAAmB,IAAzD,mBAAO8E,EAAP,KAAiBC,EAAjB,KACA,EAA8BzH,IAAM0C,WAApC,mBAAOzF,EAAP,KAAgByK,EAAhB,KACA,EAAsC1H,IAAM0C,UAAS,GAArD,mBAAOiF,EAAP,KAAoBC,EAApB,KAEA,EAA0BtC,EAAS1G,EAAe0D,GAAIiD,EAAStI,EAAS0K,GAAhElC,EAAR,EAAQA,KAAMC,EAAd,EAAcA,QACdK,QAAQC,IAAIpH,EAAgB6G,GAE5B,IAIMoC,EAAgB,uCAAG,sBAAAnE,EAAA,sEAEfoE,YAAQ,CAAEC,aAAa,gCAAD,OAAkCP,EAAStE,OAA3C,iBAFP,kCAIrBsE,EAAStD,SAAQ,SAACnG,GAChBS,YAAeI,EAAe0D,GAAIvE,MAEpC2H,GAAQ,SAACkB,GAAD,OAAUA,EAAKS,QAAO,SAACtJ,GAAD,OAAQyJ,EAASrC,SAASpH,EAAEU,aAC1DgJ,EAAY,IARS,2CAAH,qDAgChBO,EAAU,SAACV,GAAD,OACP,OAAPrK,QAAO,IAAPA,OAAA,EAAAA,EAAS6G,WAAYwD,EAAMhF,GACvB,WACEoF,EAAW,CAAE5D,QAASwD,EAAMhF,GAAI8D,UAAW,SAEtB,SAAhB,OAAPnJ,QAAO,IAAPA,OAAA,EAAAA,EAASmJ,WACT,kBAAMsB,OAAWO,IACjB,kBAAMP,EAAW,CAAE5D,QAASwD,EAAMhF,GAAI8D,UAAW,WAIjD8B,EAAgB,SAACzJ,EAAe0J,GAGhCV,EAFAU,EACElB,EACU,CAACxI,GAED,SAACmI,GAAD,4BAAcA,GAAd,CAAoBnI,KAKxB,SAACmI,GACX,IAAIwB,EAAG,YAAOxB,GACVyB,EAAQD,EAAIE,WAAU,SAACvK,GAAD,OAAOA,IAAMU,KAIvC,OAHa,MAAT4J,GACFD,EAAIG,OAAOF,EAAO,GAEbD,KAIX,OACE,sBAAKjI,UAAU,8BAAf,UACE,sBAAKA,UAAU,4BAAf,UACE,sBAAKA,UAAU,iBAAf,UACE,cAACqI,EAAD,CACE5J,eAAgBA,EAChBwE,QAAS,SAACzD,GAAD,OAAqByH,GAAW,SAACR,GAAD,OAAWjH,GAAX,mBAAmBiH,UAE7DrB,EAAQ7E,KAAI,SAACoC,EAAGnC,GAAJ,OACX,sBAEER,UAAU,2GAFZ,UAIG2C,EAAEgB,QAJL,IAIehB,EAAEe,SAJjB,IAI4Bf,EAAEjC,MAAO,IACnC,sBACE6D,QAAS,kBACP0C,GAAW,SAACR,GACV,IAAIwB,EAAG,YAAOxB,GAEd,OADAwB,EAAIG,OAAO5H,EAAG,GACPyH,MAGXjI,UAAU,2CARZ,sBALF,YACYQ,UAoBdoG,EAcA,cAACvC,EAAA,EAAD,CACEC,YAAU,EACVC,QAAS,kBAAMqC,EAAOtB,EAAK4B,QAAO,SAACtJ,GAAD,OAAOyJ,EAASrC,SAASpH,EAAEU,YAC7D0B,UAAS,sBACa,IAApBqH,EAAStE,OACL,2CACA,sCAHG,KAHX,oBAbA,cAACsB,EAAA,EAAD,CACEC,YAAU,EACVC,QAASmD,EACTzC,SAA8B,IAApBoC,EAAStE,OACnB/C,UAAS,sBACa,IAApBqH,EAAStE,OACL,iDACA,qDAHG,KAJX,uBA0BJ,qBAAK/C,UAAU,uDAAf,SACE,eAAC,IAAD,CAAWA,UAAU,kCAAkCsI,UAAU,EAAjE,UACE,wBAAOtI,UAAU,qBAAjB,UACE,gCACE,qBAAIA,UAAU,oBAAd,UACE,oBAAIA,UAAU,wCAAd,SACG8G,EAAe,KACd,cAACyB,EAAA,EAAD,CACEtI,KAAK,QACLuI,QAAS,CAAER,QAAS,gBAAiBS,KAAM,OAC3CT,QAASX,EAAStE,SAAWuC,EAAKvC,OAClC8B,SAAU,SAACH,GAAD,OA1FXgE,EA0F4BhE,EAAEiE,OAAOX,QA1FjBV,EAAYoB,EAASpD,EAAK/E,KAAI,SAAC3C,GAAD,OAAOA,EAAEU,SAAS,IAArE,IAACoK,OA8FJ5D,EAAOvE,KAAI,SAAC4G,EAAO3G,GAAR,OACV,oBAAIR,UAAU,4CAAd,SACE,sBAAKA,UAAU,mCAAf,UACE,qBAAKA,UAAU,QACf,qBAAKA,UAAU,6BAA6BuE,QAASsD,EAAQV,GAA7D,SACGA,EAAMhF,KAET,qBAAKnC,UAAU,MAAf,UACU,OAAPlD,QAAO,IAAPA,OAAA,EAAAA,EAAS6G,WAAYwD,EAAMhF,GAC1B,cAAC,IAAD,CACEZ,SAAS,QACTvB,UAAS,UACgB,UAAhB,OAAPlD,QAAO,IAAPA,OAAA,EAAAA,EAASmJ,WAAuB,uBAAyB,MAG3D,WAdV,aAAqEzF,YAqB3E,gCACG8E,EAAK/E,KAAI,SAACxC,EAAKyC,GAAN,OACRqG,EAAU7B,SAASjH,EAAIO,OAAS,KAC9B,qBACEiG,QAAS,kBACPqC,EAASmB,EAAchK,EAAIO,OAAQ+I,EAASrC,SAASjH,EAAIO,QAtK9D,SAACP,GACdgJ,EAAQ6B,KAAR,uBAA6BnK,EAAe0D,GAA5C,iBAAuDpE,EAAIO,QAqK0BuK,CAAO9K,IAG5EiC,UAAWK,IAAW,6CALxB,UAOE,oBAAIL,UAAU,OAAd,SACE,cAACuI,EAAA,EAAD,CACEtI,KAAK,QACLuI,QAAS,CAAER,QAAS,gBAAiBS,KAAM,OAC3CT,QAASX,EAASrC,SAASjH,EAAIO,OAC/BiG,QAAS,SAACG,GAAD,OAAOA,EAAEC,mBAClBE,SAAU,SAACH,GAAD,OAAOqD,EAAchK,EAAIO,MAAOoG,EAAEiE,OAAOX,cAGtDlD,EAAOvE,KAAI,SAAC4G,EAAO2B,GAAR,OACV,oBAA8B9I,UAAU,OAAxC,SACGjC,EAAIoJ,EAAMhF,IACM,UAAfgF,EAAM4B,KACJ5B,EAAM6B,YACJ,cAACC,EAAA,EAAD,CAAW/G,KAAMnE,EAAIoJ,EAAMhF,MAE3B,cAAC8G,EAAA,EAAD,CAAWhH,MAAOlE,EAAIoJ,EAAMhF,MAG9B,qBAAKnC,UAAU,oBAAf,SACGjC,EAAIoJ,EAAMhF,IAAI+G,WAAWC,UAAU,EAAG,MAGzC,MAbN,cAAgB3I,EAAhB,gBAAyBsI,SAjB7B,cAIctI,YAkCtB,cAAC,IAAD,CACEqE,SAAQ,uCAAE,WAAOQ,GAAP,SAAA9B,EAAA,sDACRkE,EAAepC,GADP,2CAAF,sDADV,SAKE,qBAAKrF,UAAU,aAEjB,kC,iCCtQV,4FA8DeoJ,UAjD+B,SAAC,GAAe,IACtDjH,EADqD,EAAZkH,MAC9BC,OAAOnH,GAChB1D,EAAmB8K,aAAY,SAACC,GACtC,MAAO,CACL/K,eAAgB+K,EAAMC,gBAAgBC,MAAK,SAAC9L,GAAD,OAAOA,EAAEuE,KAAOA,SAFvD1D,eAMFsI,EAAUC,cAEhB,OACE,sBAAKhH,UAAU,8BAAf,UACE,sBAAKA,UAAU,sCAAf,UACE,qBAAKA,UAAU,qEAAf,SACIvB,EACA,sBAAKuB,UAAU,oBAAf,UACGvB,EAAemG,KAChB,qBACEL,QAAS,kBACPlH,OAAO6F,KAAK7F,OAAOC,SAASC,OAAhB,eAAiCkB,EAAe0D,IAAM,WAEpEnC,UAAU,0EAJZ,SAME,cAAC,IAAD,CAAWA,UAAU,gBATR,OAcrB,cAAC,IAAD,CACEsE,YAAU,EACVC,QAAS,kBAAMwC,EAAQ6B,KAAR,uBAA6BzG,EAA7B,UACfnC,UAAU,kDAHZ,SAKE,sBAAKA,UAAU,oBAAf,UACE,cAAC,IAAD,CAAYuB,SAAS,UAAUvB,UAAU,oBACzC,sBAAMA,UAAU,kBAAhB,kCAKLvB,EACC,qBAAKuB,UAAU,gBAAf,SACE,cAAC,IAAD,CAA+BvB,eAAgBA,GAAnCA,EAAe0D,MAE3B","file":"static/js/12.e13498da.chunk.js","sourcesContent":["import store from \"store\";\r\n\r\nconst getAuthHeader = () => {\r\n  const user = store.getState().user;\r\n  const token = user ? user.token : null;\r\n  return \"Bearer \" + token;\r\n};\r\n\r\nexport interface Document {\r\n  docId: string;\r\n  created_at: string;\r\n  [index: string]: any;\r\n}\r\n\r\nexport interface GetCollectionOptions {\r\n  collectionId: string;\r\n  orderBy?: string;\r\n  startAt?: number | string;\r\n  startAfter?: number | string;\r\n  where?: string;\r\n  limit?: number;\r\n  populateRef?: boolean;\r\n}\r\n\r\nexport const getCollection = ({\r\n  collectionId,\r\n  orderBy,\r\n  startAt,\r\n  startAfter,\r\n  where,\r\n  limit = 10,\r\n  populateRef = true,\r\n}: GetCollectionOptions) => {\r\n  const url = `${\r\n    window.location.origin\r\n  }/api/${collectionId}?limit=${limit}&populateRef=${populateRef}${\r\n    orderBy ? `&orderBy=${orderBy}` : \"\"\r\n  }${startAt ? `&startAt=${startAt}` : startAfter ? `&startAfter=${startAfter}` : \"\"}${\r\n    where ? `&where=${where}` : \"\"\r\n  }`;\r\n  return fetch(url, { headers: { Authorization: getAuthHeader() } }).then((x) => x.json());\r\n};\r\n\r\nexport const addDocument = (collectionId: string, doc: { [index: string]: any }) => {\r\n  try {\r\n    return fetch(window.location.origin + `/api/${collectionId}`, {\r\n      method: \"POST\",\r\n      headers: { Authorization: getAuthHeader() },\r\n      body: JSON.stringify(doc),\r\n    }).then((x) => x.json());\r\n  } catch (error) {\r\n    return { error };\r\n  }\r\n};\r\n\r\nexport const deleteDocument = (collectionId: string, docId: string) => {\r\n  try {\r\n    return fetch(window.location.origin + `/api/${collectionId}/${docId}`, {\r\n      method: \"DELETE\",\r\n      headers: { Authorization: getAuthHeader() },\r\n    }).then((x) => x.json());\r\n  } catch (error) {\r\n    return { error };\r\n  }\r\n};\r\n\r\nexport const getDocument = (collectionId: string, docId: string) => {\r\n  try {\r\n    return fetch(\r\n      window.location.origin + `/api/${collectionId}${docId ? `/${docId}` : \"\"}?populateRef=false`,\r\n      {\r\n        headers: { Authorization: getAuthHeader() },\r\n      }\r\n    ).then((x) => x.json());\r\n  } catch (error) {\r\n    return { error };\r\n  }\r\n};\r\n\r\nexport const updateDocument = (\r\n  collectionType: string,\r\n  docId: string,\r\n  doc: { [index: string]: any }\r\n) => {\r\n  try {\r\n    return fetch(window.location.origin + `/api/${collectionType}/${docId}`, {\r\n      method: \"PUT\",\r\n      headers: { Authorization: getAuthHeader() },\r\n      body: JSON.stringify(doc),\r\n    }).then((x) => x.json());\r\n  } catch (error) {\r\n    return { error };\r\n  }\r\n};\r\n","import ReactDOM from \"react-dom\";\r\nimport React from \"react\";\r\nimport { Provider } from \"react-redux\";\r\nimport store from \"store\";\r\n\r\nexport interface CallableComponent<T> {\r\n  proceed: (v: T) => void;\r\n}\r\n\r\ninterface callComponentArgs<T> {\r\n  Component: React.FC<any>;\r\n  props: Omit<T, \"proceed\">;\r\n}\r\n\r\nexport function callComponent<T, RT>({ Component, props }: callComponentArgs<T>): Promise<RT> {\r\n  return new Promise((resolve, reject) => {\r\n    const wrapper = document.getElementById(\"root\")?.appendChild(document.createElement(\"div\"));\r\n    if (wrapper) {\r\n      ReactDOM.render(\r\n        <Provider store={store}>\r\n          <Component\r\n            {...props}\r\n            proceed={(val: RT) => {\r\n              ReactDOM.unmountComponentAtNode(wrapper);\r\n              wrapper.parentNode?.removeChild(wrapper);\r\n              resolve(val);\r\n            }}\r\n          />\r\n        </Provider>,\r\n        wrapper\r\n      );\r\n    }\r\n  });\r\n}\r\n","import { IoAlertCircleOutline } from \"react-icons/io5\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport React, { SelectHTMLAttributes } from \"react\";\r\nimport classNames from \"classnames\";\r\n\r\nconst WarningIcon = React.forwardRef(function MyComponent(props: any, ref: any) {\r\n  return (\r\n    <div {...props} ref={ref}>\r\n      <IoAlertCircleOutline className=\"text-red-500\" size={20}></IoAlertCircleOutline>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport interface SelectProps extends SelectHTMLAttributes<HTMLSelectElement> {\r\n  className?: string;\r\n  options: { label: string; value: string | number }[];\r\n  error?: string | boolean;\r\n  white?: boolean;\r\n}\r\n\r\nconst Select: React.FC<SelectProps> = ({\r\n  className = \"\",\r\n  options,\r\n  error,\r\n  white = false,\r\n  ...props\r\n}) => {\r\n  return (\r\n    <div className={`${className} relative flex items-center`}>\r\n      <select\r\n        className={classNames(\"px-3 h-34px border-2 border-solid w-full rounded outline-none\", {\r\n          \"border-red-400\": error,\r\n          \"focus:border-blue-300\": !error,\r\n          \"border-gray-300 bg-gray-300\": !white,\r\n          \"border-white bg-white\": white,\r\n        })}\r\n        {...props}\r\n        spellCheck={false}\r\n      >\r\n        {options.map((x, i) => (\r\n          <option data-testid={`select-option-${x.value}`} key={\"opt-\" + i} value={x.value}>\r\n            {x.label}\r\n          </option>\r\n        ))}\r\n      </select>\r\n      {error ? (\r\n        <Tooltip title={error} placement=\"top\">\r\n          <WarningIcon className=\"absolute right-2 my-auto w-auto\"></WarningIcon>\r\n        </Tooltip>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Select;\r\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M18 13h-5v5c0 .55-.45 1-1 1s-1-.45-1-1v-5H6c-.55 0-1-.45-1-1s.45-1 1-1h5V6c0-.55.45-1 1-1s1 .45 1 1v5h5c.55 0 1 .45 1 1s-.45 1-1 1z\"\n}), 'AddRounded');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z\"\n}), 'OpenInNew');\n\nexports.default = _default;","import React from \"react\";\r\nimport ErrorRounded from \"@material-ui/icons/ErrorRounded\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\n\r\nexport interface LabelProps {\r\n  error?: string | undefined | null;\r\n  className?: string;\r\n  children: any;\r\n}\r\n\r\nconst WarningIcon = React.forwardRef(function MyComponent(props: any, ref: any) {\r\n  return (\r\n    <div {...props} ref={ref}>\r\n      <ErrorRounded className=\"text-red-500 text-xl\" fontSize=\"inherit\"></ErrorRounded>\r\n    </div>\r\n  );\r\n});\r\n\r\nconst Label: React.FC<LabelProps> = ({ className = \"\", children, error }) => {\r\n  return (\r\n    <div className={`flex justify-between text-white relative ${className}`}>\r\n      <div>{children}</div>\r\n      {error ? (\r\n        <Tooltip title={error} placement=\"top\">\r\n          <WarningIcon className=\"absolute right-2 my-auto w-auto\"></WarningIcon>\r\n        </Tooltip>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Label;\r\n","import React from \"react\";\r\n\r\nconst Image = ({ url, className = \"\", ...rest }: { url: string; [index: string]: any }) => {\r\n  return (\r\n    <div\r\n      {...rest}\r\n      className={\"bg-white rounded-full border-2 border-white box-content \" + className}\r\n    >\r\n      <div\r\n        className={\"w-full h-full rounded-full bg-center bg-cover\"}\r\n        style={{ backgroundImage: `url(${url})` }}\r\n      ></div>\r\n      <img src={url} alt=\"\" className=\"hidden\"></img>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport interface FilesProps {\r\n  files?: string[];\r\n  file?: string;\r\n}\r\n\r\nconst Files: React.FC<FilesProps> = ({ files, file }) => {\r\n  const id = React.useRef<number>(Math.random());\r\n  const [active, setActive] = React.useState(-1);\r\n\r\n  return (\r\n    <div className=\"flex justify-center\">\r\n      {(files ? files : file ? [file] : []).slice(0, 4).map((f, i) => (\r\n        <div\r\n          key={`${id}-file-${i}`}\r\n          style={{ marginLeft: i === 0 ? 0 : \"-10px\" }}\r\n          className=\"relative\"\r\n        >\r\n          <Image\r\n            className=\"w-7 h-7\"\r\n            onMouseEnter={() => setActive(i)}\r\n            onMouseLeave={() => setActive(-1)}\r\n            url={f}\r\n          ></Image>\r\n          <div\r\n            className={`${\r\n              active === i ? \"\" : \"hidden\"\r\n            } absolute bottom-full flex justify-center w-9`}\r\n          >\r\n            <Image url={f} className=\"w-16 h-16 flex-shrink-0 -translate-y-7\"></Image>\r\n          </div>\r\n        </div>\r\n      ))}\r\n      {files && files.length > 4 ? (\r\n        <div style={{ marginLeft: \"-10px\" }} className=\"relative\">\r\n          <div className=\"w-7 h-7 rounded-full bg-blue-300 text-sm text-white flex items-center justify-center border-2 box-content border-white\">\r\n            {files.length - 4}+\r\n          </div>\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Files;\r\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M15.88 9.29L12 13.17 8.12 9.29a.9959.9959 0 00-1.41 0c-.39.39-.39 1.02 0 1.41l4.59 4.59c.39.39 1.02.39 1.41 0l4.59-4.59c.39-.39.39-1.02 0-1.41-.39-.38-1.03-.39-1.42 0z\"\n}), 'ExpandMoreRounded');\n\nexports.default = _default;","import Modal from \"@material-ui/core/Modal\";\r\nimport Input from \"components/GrayInput\";\r\nimport Select from \"components/Select\";\r\nimport Button from \"components/Button\";\r\nimport { CollectionType } from \"api/collectionTypes\";\r\nimport React from \"react\";\r\nimport { useFormik } from \"formik\";\r\nimport Label from \"components/Label\";\r\n\r\nexport interface AddFilterModalProps {\r\n  collectionType: CollectionType;\r\n  onValue: Function;\r\n}\r\n\r\nconst AddFilterModal: React.FC<AddFilterModalProps> = ({ collectionType, onValue }) => {\r\n  const operators = [\r\n    \"<\",\r\n    \"<=\",\r\n    \"==\",\r\n    \">\",\r\n    \">=\",\r\n    \"!=\",\r\n    \"array-contains\",\r\n    \"array-contains-any\",\r\n    \"in\",\r\n    \"not-in\",\r\n  ];\r\n\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const { values, errors, handleChange, submitCount, handleSubmit, isSubmitting } = useFormik({\r\n    onSubmit: async (vals, { resetForm }) => {\r\n      onValue(vals);\r\n      setOpen(false);\r\n      resetForm();\r\n    },\r\n    initialValues: {\r\n      value: \"\",\r\n      operator: \"\",\r\n      fieldId: \"\",\r\n    },\r\n    validate: (vals: any) => {\r\n      let errors: any = {};\r\n      Object.keys(vals).forEach((x) => {\r\n        if (!vals[x]) {\r\n          errors[x] = \"Required\";\r\n        }\r\n      });\r\n      return errors;\r\n    },\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        noMinWidth\r\n        onClick={() => setOpen(true)}\r\n        className=\"bg-fireck-4 hover:bg-fireck-4-hover flex items-center justify-center h-28px px-7 rounded text-sm mr-3 mb-3\"\r\n      >\r\n        Filters\r\n      </Button>\r\n      <Modal open={open}>\r\n        <div className=\"fixed left-0 top-0 w-full h-full flex\" onMouseDown={() => setOpen(false)}>\r\n          <div onMouseDown={(e) => e.stopPropagation()} className=\"bg-white rounded p-7  m-auto\">\r\n            <div className=\"flex flex-wrap -mx-2 mb-4\">\r\n              <div className=\"sm:w-1/3 w-full mb-3 px-2\">\r\n                <Label className=\"mb-2\" error={submitCount > 0 ? errors.fieldId : null}>\r\n                  Field\r\n                </Label>\r\n                <Select\r\n                  name=\"fieldId\"\r\n                  onChange={handleChange}\r\n                  value={values.fieldId}\r\n                  options={[\r\n                    { value: \"\", label: \"Select\" },\r\n                    ...collectionType.fields.map((x) => ({ value: x.id, label: x.id })),\r\n                  ]}\r\n                ></Select>\r\n              </div>\r\n              <div className=\"sm:w-1/3 w-full mb-3 px-2\">\r\n                <Label className=\"mb-2\" error={submitCount > 0 ? errors.operator : null}>\r\n                  Operator\r\n                </Label>\r\n                <Select\r\n                  name=\"operator\"\r\n                  onChange={handleChange}\r\n                  value={values.operator}\r\n                  options={[\r\n                    { value: \"\", label: \"Select\" },\r\n                    ...operators.map((x) => ({ value: x, label: x })),\r\n                  ]}\r\n                ></Select>\r\n              </div>\r\n              <div className=\"sm:w-1/3 w-full mb-3 px-2\">\r\n                <Label className=\"mb-2\" error={submitCount > 0 ? errors.value : null}>\r\n                  Value\r\n                </Label>\r\n                <Input\r\n                  placeholder={\r\n                    [\"in\", \"not in\", \"array-contains-any\"].includes(values.operator)\r\n                      ? \"value, value, value\"\r\n                      : \"value\"\r\n                  }\r\n                  className=\"placeholder-black\"\r\n                  value={values.value}\r\n                  onChange={handleChange}\r\n                  name=\"value\"\r\n                ></Input>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex justify-end\">\r\n              <Button\r\n                disabled={isSubmitting}\r\n                onClick={() => handleSubmit()}\r\n                noMinWidth\r\n                className=\"bg-orange-300 hover:bg-orange-301\"\r\n              >\r\n                Add\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AddFilterModal;\r\n","import { callComponent } from \"api/callComponent\";\r\nimport Button from \"components/Button\";\r\n\r\nexport interface CreateIndexModalProps {\r\n  proceed: Function;\r\n  url: string;\r\n}\r\n\r\nconst CreateIndexModal: React.FC<CreateIndexModalProps> = ({ proceed, url }) => {\r\n  return (\r\n    <div\r\n      className=\"fixed left-0 top-0 w-full h-full flex bg-black bg-opacity-40\"\r\n      onMouseDown={() => proceed(false)}\r\n    >\r\n      <div onMouseDown={(e) => e.stopPropagation()} className=\"bg-white rounded p-7  m-auto\">\r\n        <div className=\"mb-12\">This query requires creating an index.</div>\r\n        <div className=\"flex justify-between\">\r\n          <Button\r\n            noMinWidth\r\n            className=\"bg-blue-300 hover:bg-blue-400 text-white h-28px\"\r\n            onClick={() => proceed(false)}\r\n          >\r\n            Later\r\n          </Button>\r\n          <Button\r\n            noMinWidth\r\n            className=\"bg-fireck-4 hover:bg-fireck-4-hover h-28px\"\r\n            onClick={() => {\r\n              window.open(url, \"_blank\");\r\n              proceed(false);\r\n            }}\r\n          >\r\n            Create\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateIndexModal;\r\n\r\nexport const createIndex = (url: string) => {\r\n  callComponent<CreateIndexModalProps, boolean>({ Component: CreateIndexModal, props: { url } });\r\n};\r\n","import { Document, getCollection, GetCollectionOptions } from \"api/collections\";\r\nimport { useNotify } from \"components/NotificationsProvider\";\r\nimport { FilterType } from \"components/TableElements/CollectionTable\";\r\nimport { createIndex } from \"components/TableElements/CreateIndex\";\r\nimport { useEffect, useRef, useState, useCallback } from \"react\";\r\n\r\nconst useFetch = (\r\n  collectionId: string,\r\n  filters: FilterType[],\r\n  orderBy: { fieldId: string; direction: \"asc\" | \"desc\" } | undefined,\r\n  inView: boolean\r\n) => {\r\n  const [docs, setDocs] = useState<Document[]>([]);\r\n  const inViewRef = useRef(false);\r\n  const endReached = useRef(false);\r\n  const notify = useNotify();\r\n\r\n  console.log(\"in view, orderBy, filters\", inView, orderBy, filters);\r\n\r\n  const getOptions = useCallback(\r\n    (data: Document[]) => {\r\n      let options: GetCollectionOptions = { collectionId };\r\n\r\n      options.where = \"\";\r\n      options.orderBy = \"\";\r\n\r\n      filters.forEach((f, i) => {\r\n        options.where += (i > 0 ? \";\" : \"\") + f.fieldId + \",\" + f.operator + \",\" + f.value;\r\n        if (orderBy && orderBy.fieldId !== f.fieldId) {\r\n          options.orderBy += (options.orderBy ? \";\" : \"\") + f.fieldId;\r\n        }\r\n      });\r\n\r\n      if (orderBy) {\r\n        options.orderBy += (options.orderBy ? \";\" : \"\") + `${orderBy.fieldId},${orderBy.direction}`;\r\n      }\r\n      if (!orderBy && !filters.length) {\r\n        options.orderBy = \"createdAt,asc\";\r\n      }\r\n\r\n      if (data.length) {\r\n        options.startAfter = data[data.length - 1][orderBy ? orderBy.fieldId : \"createdAt\"];\r\n      }\r\n      options.populateRef = false;\r\n\r\n      return options;\r\n    },\r\n    [orderBy, filters, collectionId]\r\n  );\r\n\r\n  const onError = (message: string) => {\r\n    if (message.includes(\"FAILED_PRECONDITION\")) {\r\n      createIndex(message.split(\"it here:\")[1]);\r\n    } else {\r\n      notify(message, { variant: \"error\" });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        if (orderBy || filters.length) {\r\n          endReached.current = false;\r\n          let options = getOptions([]);\r\n          const newData = await getCollection(options);\r\n          if (newData.error) {\r\n            onError(newData.error);\r\n          } else {\r\n            setDocs(newData);\r\n            if (newData.length < (options.limit || 10)) {\r\n              endReached.current = true;\r\n            }\r\n          }\r\n        }\r\n      } catch (er) {\r\n        console.log(er);\r\n      }\r\n    })();\r\n  }, [orderBy, filters]);\r\n\r\n  useEffect(() => {\r\n    inViewRef.current = inView;\r\n    const fetcher = async () => {\r\n      if (!endReached.current && inViewRef.current) {\r\n        let options = getOptions(docs);\r\n        console.log(options);\r\n        const newData = await getCollection(options);\r\n        if (\r\n          (newData.length &&\r\n            docs.length &&\r\n            newData[newData.length - 1].docId !== docs[docs.length - 1].docId) ||\r\n          !docs.length\r\n        ) {\r\n          setDocs((prev) => [...prev, ...newData]);\r\n        }\r\n\r\n        if (newData.length < (options.limit || 10)) {\r\n          endReached.current = true;\r\n        }\r\n      }\r\n    };\r\n    fetcher();\r\n  }, [inView, docs]);\r\n\r\n  return { docs, setDocs };\r\n};\r\n\r\nexport default useFetch;\r\n","import { Document } from \"api/collections\";\r\nimport { CollectionType, FieldType, updateCollectionType } from \"api/collectionTypes\";\r\nimport { getCollection, GetCollectionOptions, deleteDocument } from \"api/collections\";\r\nimport FilesCell from \"./FilesCell\";\r\nimport InViewFetcher from \"components/InViewFetcher\";\r\nimport React from \"react\";\r\nimport ExpandMoreRounded from \"@material-ui/icons/ExpandMoreRounded\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { confirm } from \"components/Confirm\";\r\nimport store from \"store\";\r\nimport AddFilter from \"./AddFilter\";\r\nimport Button from \"components/Button\";\r\nimport { configureView } from \"components/TableViewConfig\";\r\nimport SimpleBar from \"simplebar-react\";\r\nimport classNames from \"classnames\";\r\nimport useFetch from \"hooks/useFetch\";\r\nimport { InView } from \"react-intersection-observer\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\n\r\nexport interface TableProps {\r\n  collectionType: CollectionType;\r\n  onPick?: (a: Document[]) => void;\r\n  blackList?: string[];\r\n  singleSelect?: boolean;\r\n}\r\n\r\nexport type FilterType = { fieldId: string; operator: string; value: string };\r\n\r\nconst Table: React.FC<TableProps> = ({\r\n  collectionType,\r\n  onPick,\r\n  blackList = [],\r\n  singleSelect = false,\r\n}) => {\r\n  console.log(\"SINGLE SELCT\", singleSelect);\r\n  const _configureView = async () => {\r\n    configureView({\r\n      fields: collectionType.fields,\r\n      callback: onConfigureView,\r\n    });\r\n  };\r\n\r\n  const history = useHistory();\r\n\r\n  const [filters, setFilters] = React.useState<FilterType[]>([]);\r\n  const fields = collectionType.fields.filter((field) => field.displayOnTable);\r\n  const [selected, setSelected] = React.useState<string[]>([]);\r\n  const [orderBy, setOrderBy] = React.useState<{ fieldId: string; direction: \"asc\" | \"desc\" }>();\r\n  const [endIsInView, setEndIsInView] = React.useState(false);\r\n\r\n  const { docs, setDocs } = useFetch(collectionType.id, filters, orderBy, endIsInView);\r\n  console.log(collectionType, docs);\r\n\r\n  const onEdit = (doc: Document) => {\r\n    history.push(`/collections/${collectionType.id}/edit/${doc.docId}`);\r\n  };\r\n\r\n  const onDeleteSelected = async () => {\r\n    if (\r\n      await confirm({ confirmation: `Do you really want to delete ${selected.length} documents?` })\r\n    ) {\r\n      selected.forEach((x) => {\r\n        deleteDocument(collectionType.id, x);\r\n      });\r\n      setDocs((prev) => prev.filter((x) => !selected.includes(x.docId)));\r\n      setSelected([]);\r\n    }\r\n  };\r\n\r\n  const onConfigureView = ({\r\n    fields,\r\n    displayDocIdOnTable,\r\n  }: {\r\n    fields: FieldType[];\r\n    displayDocIdOnTable?: boolean;\r\n  }) => {\r\n    const display = displayDocIdOnTable != null ? displayDocIdOnTable : true;\r\n    updateCollectionType(collectionType.docId, {\r\n      ...collectionType,\r\n      fields,\r\n    });\r\n\r\n    store.dispatch({\r\n      type: \"UPDATE_COLLECTION\",\r\n      docId: collectionType.docId,\r\n      payload: { fields, displayDocIdOnTable: display },\r\n    });\r\n  };\r\n\r\n  const onOrder = (field: FieldType) =>\r\n    orderBy?.fieldId !== field.id\r\n      ? () => {\r\n          setOrderBy({ fieldId: field.id, direction: \"asc\" });\r\n        }\r\n      : orderBy?.direction !== \"asc\"\r\n      ? () => setOrderBy(undefined)\r\n      : () => setOrderBy({ fieldId: field.id, direction: \"desc\" });\r\n\r\n  const selectAll = (select: boolean) => setSelected(select ? docs.map((x) => x.docId) : []);\r\n\r\n  const selectHandler = (docId: string, checked: boolean) => {\r\n    if (checked) {\r\n      if (singleSelect) {\r\n        setSelected([docId]);\r\n      } else {\r\n        setSelected((prev) => [...prev, docId]);\r\n      }\r\n\r\n      return;\r\n    }\r\n    setSelected((prev) => {\r\n      let arr = [...prev];\r\n      let index = arr.findIndex((x) => x === docId);\r\n      if (index != null) {\r\n        arr.splice(index, 1);\r\n      }\r\n      return arr;\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"h-full w-full flex-col flex\">\r\n      <div className=\"flex justify-between mb-3\">\r\n        <div className=\"flex flex-wrap\">\r\n          <AddFilter\r\n            collectionType={collectionType}\r\n            onValue={(val: FilterType) => setFilters((prev) => [val, ...prev])}\r\n          ></AddFilter>\r\n          {filters.map((f, i) => (\r\n            <div\r\n              key={`f-${i}`}\r\n              className=\"text-white border border-white rounded min-h-28px leading-28px pl-3 text-sm pr-3 flex mr-3 mb-3 relative\"\r\n            >\r\n              {f.fieldId} {f.operator} {f.value}{\" \"}\r\n              <span\r\n                onClick={() =>\r\n                  setFilters((prev) => {\r\n                    let arr = [...prev];\r\n                    arr.splice(i, 1);\r\n                    return arr;\r\n                  })\r\n                }\r\n                className=\"text-xs leading-28px ml-3 cursor-pointer\"\r\n              >\r\n                ✕\r\n              </span>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {!onPick ? (\r\n          <Button\r\n            noMinWidth\r\n            onClick={onDeleteSelected}\r\n            disabled={selected.length === 0}\r\n            className={`px-7 h-28px ${\r\n              selected.length === 0\r\n                ? \"bg-gray-E1E1E1 text-gray-6C6C6C cursor-default\"\r\n                : \"bg-red-FF0000 hover:bg-red-FF0000-hover text-white\"\r\n            } `}\r\n          >\r\n            Delete\r\n          </Button>\r\n        ) : (\r\n          <Button\r\n            noMinWidth\r\n            onClick={() => onPick(docs.filter((x) => selected.includes(x.docId)))}\r\n            className={`h-28px px-7 ${\r\n              selected.length === 0\r\n                ? \"bg-gray-300 text-gray-500 cursor-default\"\r\n                : \"bg-fireck-4 hover:bg-fireck-4-hover\"\r\n            } `}\r\n          >\r\n            Select\r\n          </Button>\r\n        )}\r\n      </div>\r\n      <div className=\"flex-grow h-0 -mt-3 bg-white rounded overflow-hidden\">\r\n        <SimpleBar className=\"relative scrollbar-light h-full\" autoHide={false}>\r\n          <table className=\"w-full text-center\">\r\n            <thead>\r\n              <tr className=\"whitespace-nowrap\">\r\n                <th className=\"sticky top-0 bg-gray-E1E1E1 z-10 px-1\">\r\n                  {singleSelect ? null : (\r\n                    <Checkbox\r\n                      size=\"small\"\r\n                      classes={{ checked: \"text-fireck-1\", root: \"p-0\" }}\r\n                      checked={selected.length === docs.length}\r\n                      onChange={(e) => selectAll(e.target.checked)}\r\n                    ></Checkbox>\r\n                  )}\r\n                </th>\r\n                {fields.map((field, i) => (\r\n                  <th className=\"font-semibold sticky top-0 bg-gray-E1E1E1\" key={`th-${i}`}>\r\n                    <div className=\"flex items-center justify-center\">\r\n                      <div className=\"w-5\"></div>\r\n                      <div className=\"cursor-pointer select-none\" onClick={onOrder(field)}>\r\n                        {field.id}\r\n                      </div>\r\n                      <div className=\"w-5\">\r\n                        {orderBy?.fieldId === field.id ? (\r\n                          <ExpandMoreRounded\r\n                            fontSize=\"small\"\r\n                            className={`${\r\n                              orderBy?.direction === \"desc\" ? \"transform rotate-180\" : \"\"\r\n                            }`}\r\n                          ></ExpandMoreRounded>\r\n                        ) : null}\r\n                      </div>\r\n                    </div>\r\n                  </th>\r\n                ))}\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {docs.map((doc, i) =>\r\n                blackList.includes(doc.docId) ? null : (\r\n                  <tr\r\n                    onClick={() =>\r\n                      onPick ? selectHandler(doc.docId, !selected.includes(doc.docId)) : onEdit(doc)\r\n                    }\r\n                    key={`row-${i}`}\r\n                    className={classNames(\"cursor-pointer bg-white hover:bg-fireck-4\")}\r\n                  >\r\n                    <td className=\"px-1\">\r\n                      <Checkbox\r\n                        size=\"small\"\r\n                        classes={{ checked: \"text-fireck-1\", root: \"p-0\" }}\r\n                        checked={selected.includes(doc.docId)}\r\n                        onClick={(e) => e.stopPropagation()}\r\n                        onChange={(e) => selectHandler(doc.docId, e.target.checked)}\r\n                      ></Checkbox>\r\n                    </td>\r\n                    {fields.map((field, j) => (\r\n                      <td key={`row-${i}-col-${j}`} className=\"px-2\">\r\n                        {doc[field.id] ? (\r\n                          field.type === \"media\" ? (\r\n                            field.mediaSingle ? (\r\n                              <FilesCell file={doc[field.id]}></FilesCell>\r\n                            ) : (\r\n                              <FilesCell files={doc[field.id]} />\r\n                            )\r\n                          ) : (\r\n                            <div className=\"whitespace-nowrap\">\r\n                              {doc[field.id].toString().substring(0, 40)}\r\n                            </div>\r\n                          )\r\n                        ) : null}\r\n                      </td>\r\n                    ))}\r\n                  </tr>\r\n                )\r\n              )}\r\n            </tbody>\r\n          </table>\r\n          <InView\r\n            onChange={async (inView) => {\r\n              setEndIsInView(inView);\r\n            }}\r\n          >\r\n            <div className=\"w-full\"></div>\r\n          </InView>\r\n          <div></div>\r\n        </SimpleBar>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Table;\r\n","import React from \"react\";\r\nimport { RouteComponentProps } from \"react-router-dom\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { RootState } from \"store\";\r\nimport Button from \"components/Button\";\r\nimport AddRounded from \"@material-ui/icons/AddRounded\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Table from \"components/TableElements/CollectionTable\";\r\nimport OpenInNew from \"@material-ui/icons/OpenInNew\";\r\n\r\ntype CollectionParams = { id: string };\r\nexport interface CollectionProps extends RouteComponentProps<CollectionParams> {}\r\n\r\nconst Collection: React.FC<CollectionProps> = ({ match }) => {\r\n  const id = match.params.id;\r\n  const { collectionType } = useSelector((state: RootState) => {\r\n    return {\r\n      collectionType: state.collectionTypes.find((x) => x.id === id),\r\n    };\r\n  });\r\n\r\n  const history = useHistory();\r\n\r\n  return (\r\n    <div className=\"h-full flex flex-col w-full\">\r\n      <div className=\"flex flex-wrap justify-between mb-5\">\r\n        <div className=\"mr-3 mb-3 text-27px font-medium capitalize leading-none text-white\">\r\n          {!collectionType ? null : (\r\n            <div className=\"flex items-center\">\r\n              {collectionType.name}\r\n              <div\r\n                onClick={() =>\r\n                  window.open(window.location.origin + `/api/${collectionType.id}`, \"_blank\")\r\n                }\r\n                className=\"hover:bg-fireck-1-hover rounded h-8 w-8 ml-3 inline-flex cursor-pointer\"\r\n              >\r\n                <OpenInNew className=\"m-auto\"></OpenInNew>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n        <Button\r\n          noMinWidth\r\n          onClick={() => history.push(`/collections/${id}/add`)}\r\n          className=\"bg-fireck-4 hover:bg-fireck-4-hover mb-3 h-34px\"\r\n        >\r\n          <div className=\"flex items-center\">\r\n            <AddRounded fontSize=\"inherit\" className=\"text-lg sm:mr-3\"></AddRounded>\r\n            <span className=\"sm:block hidden\">Add Document</span>\r\n          </div>\r\n        </Button>\r\n      </div>\r\n\r\n      {collectionType ? (\r\n        <div className=\"flex-grow h-0\">\r\n          <Table key={collectionType.id} collectionType={collectionType}></Table>\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Collection;\r\n"],"sourceRoot":""}