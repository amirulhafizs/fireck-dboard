(this["webpackJsonpfireck-cms"]=this["webpackJsonpfireck-cms"]||[]).push([[12],{726:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return l}));var r=n(13),a=function(){var e=r.b.getState().user;return"Bearer "+(e?e.token:null)},c=function(e){var t=e.collectionId,n=e.orderBy,r=e.startAt,c=e.startAfter,o=e.where,i=e.limit,s=void 0===i?10:i,l=e.populateRef,d=void 0===l||l,u="".concat(window.location.origin,"/api/").concat(t,"?limit=").concat(s,"&populateRef=").concat(d).concat(n?"&orderBy=".concat(n):"").concat(r?"&startAt=".concat(r):c?"&startAfter=".concat(c):"").concat(o?"&where=".concat(o):"");return fetch(u,{headers:{Authorization:a()}}).then((function(e){return e.json()}))},o=function(e,t){try{return fetch(window.location.origin+"/api/".concat(e),{method:"POST",headers:{Authorization:a()},body:JSON.stringify(t)}).then((function(e){return e.json()}))}catch(n){return{error:n}}},i=function(e,t){try{return fetch(window.location.origin+"/api/".concat(e,"/").concat(t),{method:"DELETE",headers:{Authorization:a()}}).then((function(e){return e.json()}))}catch(n){return{error:n}}},s=function(e,t){try{return fetch(window.location.origin+"/api/".concat(e).concat(t?"/".concat(t):"","?populateRef=false"),{headers:{Authorization:a()}}).then((function(e){return e.json()}))}catch(n){return{error:n}}},l=function(e,t,n){try{return fetch(window.location.origin+"/api/".concat(e,"/").concat(t),{method:"PUT",headers:{Authorization:a()},body:JSON.stringify(n)}).then((function(e){return e.json()}))}catch(r){return{error:r}}}},727:function(e,t,n){"use strict";var r=n(10),a=n(142),c=n(88),o=n.n(c),i=n(1);t.a=function(e){var t=e.className,n=Object(a.a)(e,["className"]);return Object(i.jsx)("div",Object(r.a)(Object(r.a)({},n),{},{className:o()("text-27px text-white font-medium capitalize leading-none",t)}))}},729:function(e,t,n){"use strict";var r=n(45),a=n(46);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=a(n(0)),o=(0,r(n(47)).default)(c.createElement("path",{d:"M18 13h-5v5c0 .55-.45 1-1 1s-1-.45-1-1v-5H6c-.55 0-1-.45-1-1s.45-1 1-1h5V6c0-.55.45-1 1-1s1 .45 1 1v5h5c.55 0 1 .45 1 1s-.45 1-1 1z"}),"AddRounded");t.default=o},746:function(e,t,n){"use strict";var r=n(39),a=n(1);t.a=function(e){var t=e.title,n=e.onCreate,c=e.buttonTitle;return Object(a.jsx)("div",{className:"h-96 bg-gray-300 rounded-md flex w-full p-12",children:Object(a.jsxs)("div",{className:"m-auto",children:[Object(a.jsx)("div",{className:"text-22px mb-5 font-medium text-center",children:t}),Object(a.jsx)(r.a,{"data-testid":"empty-screen-btn",className:"mx-auto bg-orange-300 hover:bg-orange-301 block",onClick:n,children:c})]})})}},771:function(e,t,n){"use strict";var r=n(45),a=n(46);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=a(n(0)),o=(0,r(n(47)).default)(c.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.default=o},772:function(e,t,n){"use strict";var r=n(45),a=n(46);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=a(n(0)),o=(0,r(n(47)).default)(c.createElement("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Create");t.default=o},898:function(e){e.exports=JSON.parse('{"name":"react-email-editor","version":"1.3.0","description":"Unlayer\'s Email Editor Component for React.js","main":"lib/index.js","module":"es/index.js","files":["css","es","lib","umd"],"scripts":{"build":"nwb build-react-component","clean":"nwb clean-module && nwb clean-demo","start":"nwb serve-react-demo","test":"nwb test-react","test:coverage":"nwb test-react --coverage","test:watch":"nwb test-react --server","release":"npm run build && npm publish"},"dependencies":{},"peerDependencies":{"react":"15.x || 16.x"},"devDependencies":{"nwb":"^0.22.0","react":"^16.13.1","react-dom":"^16.13.1","react-router-dom":"^5.2.0","styled-components":"^4.2.0"},"author":"","homepage":"https://github.com/unlayer/react-email-editor#readme","license":"MIT","repository":"https://github.com/unlayer/react-email-editor.git","keywords":["react-component"]}')},917:function(e,t,n){"use strict";n.r(t);var r=n(19),a=n(7),c=n.n(a),o=n(14),i=n(5),s=n(39),l=n(727),d=n(0),u=n.n(d),f=n(22),p=n(251),m=n(746),b=n(726),h=n(10),j=n(714),v="//editor.unlayer.com/embed.js?2",x=[],O=!1,g=function(){if(O)for(var e=void 0;e=x.shift();)e()},w=function(e){if(function(e){x.push(e)}(e),function(){var e=document.querySelectorAll("script"),t=!1;return e.forEach((function(e){e.src.includes(v)&&(t=!0)})),t}())g();else{var t=document.createElement("script");t.setAttribute("src",v),t.onload=function(){O=!0,g()},document.head.appendChild(t)}},y=n(898),N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var E=0,C=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this,n));return r.loadEditor=function(){var e=r.props.options||{};r.props.projectId&&(e.projectId=r.props.projectId),r.props.tools&&(e.tools=r.props.tools),r.props.appearance&&(e.appearance=r.props.appearance),r.props.locale&&(e.locale=r.props.locale),r.editor=unlayer.createEditor(N({},e,{id:r.editorId,displayMode:"email",source:{name:y.name,version:y.version}}));var t=Object.entries(r.props),n=Array.isArray(t),a=0;for(t=n?t:t[Symbol.iterator]();;){var c;if(n){if(a>=t.length)break;c=t[a++]}else{if((a=t.next()).done)break;c=a.value}var o=c,i=o[0],s=o[1];/^on/.test(i)&&"onLoad"!=i&&r.addEventListener(i,s)}var l=r.props.onLoad;l&&l()},r.registerCallback=function(e,t){r.editor.registerCallback(e,t)},r.addEventListener=function(e,t){r.editor.addEventListener(e,t)},r.loadDesign=function(e){r.editor.loadDesign(e)},r.saveDesign=function(e){r.editor.saveDesign(e)},r.exportHtml=function(e){r.editor.exportHtml(e)},r.setMergeTags=function(e){r.editor.setMergeTags(e)},r.editorId=n.editorId||"editor-"+ ++E,r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){w(this.loadEditor)},t.prototype.render=function(){var e=this.props,t=e.minHeight,n=void 0===t?500:t,r=e.style,a=void 0===r?{}:r;return u.a.createElement("div",{style:{flex:1,display:"flex",minHeight:n}},u.a.createElement("div",{id:this.editorId,style:N({},a,{flex:1})}))},t}(d.Component),k=n(89),T=n(1),D=function(e){var t=e.onClose,n=e.onSave,r=e.editTemplate,a=Object(d.useRef)(),c=Object(d.useState)(""),o=Object(i.a)(c,2),l=o[0],u=o[1];Object(d.useEffect)((function(){r&&u(r.name)}),[r]);return Object(T.jsx)(j.a,{open:!0,children:Object(T.jsx)("div",{className:"fixed left-0 top-0 w-full h-full overflow-auto flex p-12",children:Object(T.jsxs)("div",{className:"m-auto bg-white",children:[Object(T.jsxs)("div",{className:"flex justify-between p-4 items-center",children:[Object(T.jsxs)("div",{className:"flex",children:[Object(T.jsx)(k.a,{placeholder:"Type name",value:l,onChange:function(e){return u(e.target.value)},className:"mr-3"}),Object(T.jsx)(s.a,{className:"bg-orange-300 hover:bg-orange-301 mr-3",onClick:function(e){l?(e.currentTarget.innerHTML="Saving...",a.current&&a.current.editor.saveDesign((function(e){a.current.editor.exportHtml((function(t){n(Object(h.a)(Object(h.a)({},r),{},{template:e||(null===r||void 0===r?void 0:r.template),html:t.html||(null===r||void 0===r?void 0:r.html),name:l})),u("")}))}))):alert("Name is empty")},children:"Save"}),Object(T.jsx)(s.a,{onClick:function(){a.current&&a.current.editor.exportHtml((function(e){var t="data:text/html;charset=utf-8,"+escape(e.html),n=document.createElement("a");n.setAttribute("href",t),n.setAttribute("download",l||"email-template.html"),document.body.appendChild(n),n.click(),n.remove()}))},className:"bg-gray-301 hover:bg-gray-302",children:"Download"})]}),Object(T.jsx)(s.a,{className:"bg-blue-300 hover:bg-blue-400 text-white",onClick:t,children:"Close"})]}),Object(T.jsx)(C,{onLoad:function(){r&&(a.current&&Object.keys(r.template).length?a.current.editor.loadDesign(r.template):setTimeout((function(){a.current&&Object.keys(r.template).length&&a.current.editor.loadDesign(r.template)}),3e3))},ref:a})]})})})},A=n(729),S=n.n(A),I=n(772),z=n.n(I),R=n(771),M=n.n(R),L=n(715),_=function(e){var t=e.html,n=e.name,r=e.windowWidth,a=e.onOpen,c=e.onDelete,o=Object(d.useRef)(),s=Object(d.useState)(0),l=Object(i.a)(s,2),u=l[0],f=l[1];Object(d.useEffect)((function(){var e=o.current.getBoundingClientRect().width;f(e)}),[r]);var p=(u-56)/616;return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"w-full pt-110%"}),Object(T.jsxs)("div",{className:"absolute left-0 top-0 w-full h-full flex flex-col rounded-md overflow-hidden",ref:o,children:[Object(T.jsx)("div",{className:"flex-grow h-0 pt-7 px-7 bg-blue-300",children:Object(T.jsx)("iframe",{src:"data:text/html;charset=utf-8,"+escape(t),style:{width:616,height:677,transform:"scale(".concat(p,")")},className:"origin-top-left"})}),Object(T.jsx)("div",{className:"flex-shrink-0 w-full flex items-center justify-center bg-gray-301 h-39px relative text-sm",children:n||"Template name"})]}),Object(T.jsx)("div",{className:"absolute w-full h-full left-0 top-0 z-20 group cursor-pointer",onClick:a,children:Object(T.jsxs)("div",{className:"absolute top-0 left-0 justify-between p-3 w-full z-20 group-hover:opacity-100 opacity-0 transition duration-200 flex",children:[Object(T.jsx)(L.a,{className:"outline-none h-26px w-26px rounded bg-orange-300 hover:bg-orange-301",children:Object(T.jsx)(z.a,{fontSize:"small",onClick:function(e){e.stopPropagation(),a()}})}),Object(T.jsx)(L.a,{className:"outline-none h-26px w-26px rounded bg-orange-300 hover:bg-orange-301",children:Object(T.jsx)(M.a,{fontSize:"small",onClick:function(e){e.stopPropagation(),c()}})})]})})]})},H=function(){var e=Object(d.useState)({width:0,height:0}),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(d.useEffect)((function(){function e(){r({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),n},P=n(143);t.default=function(){var e=Object(d.useState)([]),t=Object(i.a)(e,2),n=t[0],a=t[1],u=Object(d.useState)(!1),h=Object(i.a)(u,2),j=h[0],v=h[1],x=Object(d.useState)(),O=Object(i.a)(x,2),g=O[0],w=O[1],y=H().width;Object(d.useEffect)((function(){Object(o.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(b.c)({collectionId:"EmailTemplatesReservedCollection"});case 3:t=e.sent,a(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[]);var N=Object(f.d)((function(e){return e.systemCollectionTypes.find((function(e){return"EmailTemplatesReservedCollection"===e.id}))})),E=Object(f.c)(),C=function(){v(!1),w(void 0)};return N?Object(T.jsxs)("div",{children:[Object(T.jsxs)("div",{className:"flex justify-between flex-wrap mb-7",children:[Object(T.jsx)(l.a,{className:"mb-4 mr-4",children:"Emails"}),Object(T.jsx)(s.a,{onClick:function(){return v(!0)},className:"bg-orange-300 hover:bg-orange-301 mb-4",noMinWidth:!0,children:Object(T.jsxs)("div",{className:"flex items-center",children:[Object(T.jsx)(S.a,{className:"mr-3 text-xl"}),Object(T.jsx)("span",{children:"Add template"})]})})]}),n.length?Object(T.jsx)("div",{className:"flex flex-wrap -mx-3",children:n.map((function(e,t){return Object(T.jsx)("div",{className:"lg:w-3/12 md:w-4/12 w-6/12 px-3",children:Object(T.jsx)("div",{className:"w-full relative",children:Object(T.jsx)(_,{onOpen:function(){w(e),v(!0)},onDelete:Object(o.a)(c.a.mark((function n(){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(P.a)({confirmation:"Do you really want to delete template?"});case 2:if(!n.sent){n.next=5;break}a((function(e){var n=Object(r.a)(e);return n.splice(t,1),n})),Object(b.b)("EmailTemplatesReservedCollection",e.docId);case 5:case"end":return n.stop()}}),n)}))),windowWidth:y,name:e.name,html:e.html})})},"email-template-".concat(t))}))}):Object(T.jsx)(m.a,{title:"There are no templates",buttonTitle:"Create",onCreate:function(){return v(!0)}}),j?Object(T.jsx)(D,{onSave:function(){var e=Object(o.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("template on save",t),!t.docId){e.next=6;break}Object(b.e)("EmailTemplatesReservedCollection",t.docId,t),a((function(e){var n=Object(r.a)(e),a=n.findIndex((function(e){return e.docId===t.docId}));return-1===a?e:(n[a]=t,n)})),e.next=16;break;case 6:return e.prev=6,e.next=9,Object(b.a)("EmailTemplatesReservedCollection",t);case 9:n=e.sent,a((function(e){return[n].concat(Object(r.a)(e))})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),console.log(e.t0);case 16:C();case 17:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}(),onClose:C,editTemplate:g}):null]}):Object(T.jsx)("div",{className:"w-full h-full flex",children:Object(T.jsxs)("div",{className:"m-auto",children:[Object(T.jsx)("div",{className:"text-center mb-4 text-28px font-medium",children:"Emails"}),Object(T.jsx)(s.a,{onClick:function(){var e={id:"EmailTemplatesReservedCollection",name:"EmailTemplatesReservedCollection",fields:[{type:"string",id:"name"},{type:"string",id:"html"},{type:"json",id:"template"},{id:"createdAt",type:"date",displayOnTable:!0,isDefault:!0},{id:"modifiedAt",type:"date",displayOnTable:!0,isDefault:!0},{id:"docId",type:"string",displayOnTable:!0,isDefault:!0}]};Object(p.a)(e),E({type:"ADD_COLLECTION_TYPE",payload:e})},className:"bg-orange-300 hover:bg-orange-301",children:"Enable"})]})})}}}]);
//# sourceMappingURL=12.201374c6.chunk.js.map