(this["webpackJsonpfirebase-cms1"]=this["webpackJsonpfirebase-cms1"]||[]).push([[15],{920:function(e,t,n){"use strict";n.r(t);var a=n(13),c=n(10),r=n(7),o=n.n(r),s=n(15),i=n(6),l=n(16),p=function(){var e=l.a.getState().user;return"Bearer "+(e?e.token:null)};function d(e,t){var n="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e)),a=document.createElement("a");a.setAttribute("href",n),a.setAttribute("download",t+".json"),document.body.appendChild(a),a.click(),a.remove()}var u=function(){var e=Object(s.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(window.location.origin+"/private/import-export/export",{method:"POST",headers:{Authorization:p()},body:JSON.stringify(t)}).then((function(e){return e.json()}));case 2:d(e.sent,"FireckDatabaseSchema");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(e){return fetch(window.location.origin+"/private/import-export/import",{method:"POST",headers:{Authorization:p()},body:JSON.stringify(e)}).then((function(e){return e.json()}))},f=n(0),j=n(96),m=n(249),x=n(69),h=n(708),O=n(917),g=n(918),v=n(62),N=n(373),w=n(1);t.default=function(){var e=Object(f.useRef)(null),t=Object(j.b)(),n=[{title:"Export JSON",btnText:"Export",description:"Export database JSON schema. This JSON file is meant to be imported into other Fireck app",onClick:function(){return y(!0)}},{title:"Import JSON",btnText:"Import",description:"Import database JSON schema file that was exported from other Fireck app.",onClick:function(){e.current.click()}}],r=Object(f.useState)(!1),p=Object(i.a)(r,2),d=p[0],y=p[1],k=Object(f.useState)({collections:!0,collectionTypes:!0,roles:!0,appearance:!0}),S=Object(i.a)(k,2),E=S[0],T=S[1],A=Object(f.useState)(!1),C=Object(i.a)(A,2),J=C[0],I=C[1];return Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"font-medium text-36px leading-none mb-12",children:"Import & Export"}),Object(w.jsx)("input",{className:"hidden",ref:e,type:"file",onChange:function(e){var n=e.target.files;if(n&&n.length){var a=new FileReader;a.onload=Object(s.a)(o.a.mark((function e(){var n,c,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.a.dispatch({type:"SET_LOADING",payload:"Importing database..."}),n=JSON.parse(a.result),e.next=4,b(n);case 4:if(c=e.sent,l.a.dispatch({type:"SET_LOADING",payload:!1}),c.error){e.next=16;break}return t("Database imported!",{variant:"success"}),e.next=10,Object(m.c)();case 10:return(r=e.sent).error||l.a.dispatch({type:"SET_COLLECTION_TYPES",payload:r}),e.next=14,Object(v.b)();case 14:(s=e.sent).error||(l.a.dispatch({type:"SET_APPEARANCE",payload:s}),l.a.dispatch({type:"SET_NEW_APPEARANCE",payload:s}),Object(N.b)(s.colors));case 16:case"end":return e.stop()}}),e)}))),a.readAsText(n[0])}}}),Object(w.jsx)(h.a,{open:d,hideBackdrop:!0,children:Object(w.jsx)("div",{className:"w-full h-full overflow-auto flex bg-black bg-opacity-40",onMouseDown:function(){return y(!1)},children:Object(w.jsxs)("div",{className:"bg-white p-9 rounded m-auto",onMouseDown:function(e){return e.stopPropagation()},children:[Object(w.jsx)("div",{className:"flex flex-wrap max-w-422px w-full mb-9",children:Object.keys(E).map((function(e){return Object(w.jsx)("div",{className:"flex w-1/2 px-2 items-center select-none",children:Object(w.jsx)(O.a,{classes:{label:"font-poppins line-clamp-1"},control:Object(w.jsx)(g.a,{classes:{root:"text-blue-300"},className:"mr-3",checked:E[e],onChange:function(t){T((function(n){return Object(c.a)(Object(c.a)({},n),{},Object(a.a)({},e,t.target.checked))})),"collections"===e&&t.target.checked?T((function(e){return Object(c.a)(Object(c.a)({},e),{},{collectionTypes:!0})})):"collectionTypes"!==e||t.target.checked||T((function(e){return Object(c.a)(Object(c.a)({},e),{},{collections:!1})}))}}),label:e})},e)}))}),Object(w.jsx)("div",{className:"flex justify-end",children:Object(w.jsx)(x.a,{onClick:Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(!0),e.next=3,u(E);case 3:I(!1),y(!1);case 5:case"end":return e.stop()}}),e)}))),className:"bg-orange-300 hover:bg-orange-301",children:J?"Exporting...":"Export"})})]})})}),Object(w.jsx)("div",{className:"flex flex-wrap",children:n.map((function(e,t){return Object(w.jsxs)("div",{className:"p-7 bg-gray-300 rounded mr-3 mb-3 max-w-sm w-full flex flex-col",children:[Object(w.jsx)("div",{className:"font-medium text-22px mb-3",children:e.title}),Object(w.jsx)("div",{className:"mb-7",children:e.description}),Object(w.jsx)("div",{className:"flex justify-end flex-grow items-end",children:Object(w.jsx)(x.a,{onClick:e.onClick,className:"bg-orange-300 hover:bg-orange-301",children:e.btnText})})]},"section-".concat(t))}))})]})}}}]);
//# sourceMappingURL=15.62de2a3f.chunk.js.map