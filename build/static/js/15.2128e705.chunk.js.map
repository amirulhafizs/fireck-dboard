{"version":3,"sources":["../node_modules/@material-ui/icons/AddRounded.js","components/PageTitle.tsx","../node_modules/@material-ui/icons/Delete.js","../node_modules/@material-ui/icons/Create.js","components/EmptyScreen.tsx","../node_modules/react-email-editor/es/loadScript.js","../node_modules/react-email-editor/es/index.js","components/EmailEditorModal.tsx","components/EmailTemplateCard.tsx","hooks/useWindowSize.ts","pages/Emails/index.tsx"],"names":["_interopRequireDefault","require","_interopRequireWildcard","Object","defineProperty","exports","value","default","React","_default","createElement","d","PageTitle","className","rest","classNames","EmptyScreen","title","onCreate","buttonTitle","Button","data-testid","onClick","scriptUrl","callbacks","loaded","runCallbacks","callback","shift","loadScript","push","addCallback","scripts","document","querySelectorAll","injected","forEach","script","src","includes","isScriptInjected","embedScript","setAttribute","onload","head","appendChild","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","lastEditorId","_Component","props","instance","Constructor","TypeError","_classCallCheck","this","_this","self","ReferenceError","_possibleConstructorReturn","loadEditor","options","projectId","tools","appearance","locale","editor","unlayer","createEditor","id","editorId","displayMode","name","pkg","version","_iterator","entries","_isArray","Array","isArray","_i","Symbol","iterator","_ref2","next","done","_ref","test","addEventListener","onLoad","registerCallback","type","loadDesign","design","saveDesign","exportHtml","setMergeTags","mergeTags","subClass","superClass","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","_inherits","componentDidMount","render","_props","_props$minHeight","minHeight","undefined","_props$style","style","flex","display","Component","EmailEditorModal","onClose","onSave","editTemplate","emailEditorRef","useRef","useState","setName","useEffect","Modal","open","Input","groundColor","placeholder","onChange","e","currentTarget","innerHTML","current","res","data","template","html","alert","dataStr","escape","downloadAnchorNode","body","click","remove","keys","setTimeout","ref","EmailTemplateCard","windowWidth","onOpen","onDelete","cardRef","cardWidth","setCardWidth","width","getBoundingClientRect","scale","height","transform","ButtonBase","fontSize","stopPropagation","useWindowSize","windowSize","setWindowSize","handleResize","window","innerWidth","innerHeight","removeEventListener","COLLECTION_ID","Emails","templates","setTemplates","openEditor","setOpenEditor","setEditTemplate","a","getCollection","collectionId","console","log","emailsColType","useSelector","state","collectionTypes","find","x","dispatch","useDispatch","closeEditor","map","confirm","confirmation","prev","arr","splice","deleteDocument","docId","updateDocument","index","findIndex","addDocument","colType","isSystem","fields","displayOnTable","isDefault","payload"],"mappings":"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","file":"static/js/15.2128e705.chunk.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M18 13h-5v5c0 .55-.45 1-1 1s-1-.45-1-1v-5H6c-.55 0-1-.45-1-1s.45-1 1-1h5V6c0-.55.45-1 1-1s1 .45 1 1v5h5c.55 0 1 .45 1 1s-.45 1-1 1z\"\n}), 'AddRounded');\n\nexports.default = _default;","import classNames from \"classnames\";\r\n\r\nexport interface PageTitleProps\r\n  extends React.DetailedHTMLProps<React.HTMLAttributes<HTMLDivElement>, HTMLDivElement> {}\r\n\r\nconst PageTitle: React.FC<PageTitleProps> = ({ className, ...rest }) => {\r\n  return (\r\n    <div\r\n      {...rest}\r\n      className={classNames(\"text-27px text-white font-medium capitalize leading-none\", className)}\r\n    ></div>\r\n  );\r\n};\r\n\r\nexport default PageTitle;\r\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\"\n}), 'Delete');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\"\n}), 'Create');\n\nexports.default = _default;","import Button from \"components/Button\";\r\n\r\nexport interface EmptyScreenProps {\r\n  title: string;\r\n  buttonTitle: string;\r\n  onCreate: () => void;\r\n}\r\n\r\nconst EmptyScreen: React.FC<EmptyScreenProps> = ({ title, onCreate, buttonTitle }) => {\r\n  return (\r\n    <div className=\"h-96 bg-fireck-3 rounded-md flex w-full p-12\">\r\n      <div className=\"m-auto\">\r\n        <div className=\"text-22px mb-5 font-medium text-center text-white\">{title}</div>\r\n        <Button\r\n          data-testid=\"empty-screen-btn\"\r\n          className=\"mx-auto bg-fireck-4 hover:bg-fireck-4-hover h-34px block\"\r\n          onClick={onCreate}\r\n        >\r\n          {buttonTitle}\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EmptyScreen;\r\n","var scriptUrl = '//editor.unlayer.com/embed.js?2';\nvar callbacks = [];\nvar loaded = false;\n\nvar isScriptInjected = function isScriptInjected() {\n  var scripts = document.querySelectorAll('script');\n  var injected = false;\n\n  scripts.forEach(function (script) {\n    if (script.src.includes(scriptUrl)) {\n      injected = true;\n    }\n  });\n\n  return injected;\n};\n\nvar addCallback = function addCallback(callback) {\n  callbacks.push(callback);\n};\n\nvar runCallbacks = function runCallbacks() {\n  if (loaded) {\n    var callback = void 0;\n\n    while (callback = callbacks.shift()) {\n      callback();\n    }\n  }\n};\n\nexport var loadScript = function loadScript(callback) {\n  addCallback(callback);\n\n  if (!isScriptInjected()) {\n    var embedScript = document.createElement('script');\n    embedScript.setAttribute('src', scriptUrl);\n    embedScript.onload = function () {\n      loaded = true;\n      runCallbacks();\n    };\n    document.head.appendChild(embedScript);\n  } else {\n    runCallbacks();\n  }\n};","var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nimport React, { Component } from 'react';\nimport { loadScript } from './loadScript';\nimport pkg from '../package.json';\n\nvar lastEditorId = 0;\n\nvar _default = function (_Component) {\n  _inherits(_default, _Component);\n\n  function _default(props) {\n    _classCallCheck(this, _default);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _this.loadEditor = function () {\n      var options = _this.props.options || {};\n\n      if (_this.props.projectId) {\n        options.projectId = _this.props.projectId;\n      }\n\n      if (_this.props.tools) {\n        options.tools = _this.props.tools;\n      }\n\n      if (_this.props.appearance) {\n        options.appearance = _this.props.appearance;\n      }\n\n      if (_this.props.locale) {\n        options.locale = _this.props.locale;\n      }\n\n      _this.editor = unlayer.createEditor(_extends({}, options, {\n        id: _this.editorId,\n        displayMode: 'email',\n        source: {\n          name: pkg.name,\n          version: pkg.version\n        }\n      }));\n\n      // All properties starting with on[Name] are registered as event listeners.\n      for (var _iterator = Object.entries(_this.props), _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n        var _ref2;\n\n        if (_isArray) {\n          if (_i >= _iterator.length) break;\n          _ref2 = _iterator[_i++];\n        } else {\n          _i = _iterator.next();\n          if (_i.done) break;\n          _ref2 = _i.value;\n        }\n\n        var _ref = _ref2;\n        var key = _ref[0];\n        var value = _ref[1];\n\n        if (/^on/.test(key) && key != 'onLoad') {\n          _this.addEventListener(key, value);\n        }\n      }\n\n      var onLoad = _this.props.onLoad;\n\n      onLoad && onLoad();\n    };\n\n    _this.registerCallback = function (type, callback) {\n      _this.editor.registerCallback(type, callback);\n    };\n\n    _this.addEventListener = function (type, callback) {\n      _this.editor.addEventListener(type, callback);\n    };\n\n    _this.loadDesign = function (design) {\n      _this.editor.loadDesign(design);\n    };\n\n    _this.saveDesign = function (callback) {\n      _this.editor.saveDesign(callback);\n    };\n\n    _this.exportHtml = function (callback) {\n      _this.editor.exportHtml(callback);\n    };\n\n    _this.setMergeTags = function (mergeTags) {\n      _this.editor.setMergeTags(mergeTags);\n    };\n\n    _this.editorId = props.editorId || 'editor-' + ++lastEditorId;\n    return _this;\n  }\n\n  _default.prototype.componentDidMount = function componentDidMount() {\n    loadScript(this.loadEditor);\n  };\n\n  _default.prototype.render = function render() {\n    var _props = this.props,\n        _props$minHeight = _props.minHeight,\n        minHeight = _props$minHeight === undefined ? 500 : _props$minHeight,\n        _props$style = _props.style,\n        style = _props$style === undefined ? {} : _props$style;\n\n\n    return React.createElement(\n      'div',\n      {\n        style: {\n          flex: 1,\n          display: 'flex',\n          minHeight: minHeight\n        }\n      },\n      React.createElement('div', { id: this.editorId, style: _extends({}, style, { flex: 1 }) })\n    );\n  };\n\n  return _default;\n}(Component);\n\nexport { _default as default };","import Modal from \"@material-ui/core/Modal\";\r\nimport EmailEditor from \"react-email-editor\";\r\nimport Button from \"components/Button\";\r\nimport Input from \"components/Input\";\r\nimport { useState, useRef, useEffect } from \"react\";\r\nimport { Template } from \"pages/Emails\";\r\n\r\nexport interface EmailEditorModalProps {\r\n  onClose: () => void;\r\n  onSave: (template: any) => void;\r\n  editTemplate?: Template;\r\n}\r\n\r\nconst EmailEditorModal: React.FC<EmailEditorModalProps> = ({ onClose, onSave, editTemplate }) => {\r\n  const emailEditorRef = useRef<any>();\r\n  const [name, setName] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (!editTemplate) return;\r\n    setName(editTemplate.name);\r\n  }, [editTemplate]);\r\n\r\n  const onSaveClick = () => {\r\n    if (emailEditorRef.current) {\r\n      emailEditorRef.current.editor.saveDesign((res: any) => {\r\n        emailEditorRef.current.editor.exportHtml((data: any) => {\r\n          onSave({\r\n            ...editTemplate,\r\n            template: res || editTemplate?.template,\r\n            html: data.html || editTemplate?.html,\r\n            name,\r\n          });\r\n          setName(\"\");\r\n        });\r\n      });\r\n    }\r\n  };\r\n\r\n  const onLoad = () => {\r\n    if (editTemplate) {\r\n      if (emailEditorRef.current && Object.keys(editTemplate.template).length) {\r\n        emailEditorRef.current.editor.loadDesign(editTemplate.template);\r\n      } else {\r\n        setTimeout(() => {\r\n          if (emailEditorRef.current && Object.keys(editTemplate.template).length) {\r\n            emailEditorRef.current.editor.loadDesign(editTemplate.template);\r\n          }\r\n        }, 3000);\r\n      }\r\n    }\r\n  };\r\n\r\n  const onDownload = () => {\r\n    if (emailEditorRef.current) {\r\n      emailEditorRef.current.editor.exportHtml((data: any) => {\r\n        var dataStr = \"data:text/html;charset=utf-8,\" + escape(data.html);\r\n        var downloadAnchorNode = document.createElement(\"a\");\r\n        downloadAnchorNode.setAttribute(\"href\", dataStr);\r\n        downloadAnchorNode.setAttribute(\"download\", name || \"email-template\" + \".html\");\r\n        document.body.appendChild(downloadAnchorNode); // required for firefox\r\n        downloadAnchorNode.click();\r\n        downloadAnchorNode.remove();\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Modal open={true}>\r\n      <div className=\"fixed left-0 top-0 w-full h-full overflow-auto flex p-12\">\r\n        <div className=\"m-auto bg-white\">\r\n          <div className=\"flex justify-between p-4 items-center\">\r\n            <div className=\"flex\">\r\n              <Input\r\n                groundColor=\"white\"\r\n                placeholder=\"Type name\"\r\n                value={name}\r\n                onChange={(e) => setName(e.target.value)}\r\n                className=\"mr-3 h-28px\"\r\n              ></Input>\r\n              <Button\r\n                className=\"bg-fireck-4 hover:bg-fireck-4-hover mr-3 h-28px\"\r\n                onClick={(e) => {\r\n                  if (!name) {\r\n                    alert(\"Name is empty\");\r\n                    return;\r\n                  }\r\n\r\n                  e.currentTarget.innerHTML = \"Saving...\";\r\n                  onSaveClick();\r\n                }}\r\n              >\r\n                Save\r\n              </Button>\r\n              <Button onClick={onDownload} className=\"bg-gray-301 hover:bg-gray-302 h-28px\">\r\n                Download\r\n              </Button>\r\n            </div>\r\n            <Button\r\n              className=\"bg-fireck-5 hover:bg-fireck-5-hover text-white h-28px\"\r\n              onClick={onClose}\r\n            >\r\n              Close\r\n            </Button>\r\n          </div>\r\n          <EmailEditor onLoad={onLoad} ref={emailEditorRef}></EmailEditor>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default EmailEditorModal;\r\n","import { useEffect, useRef, useState } from \"react\";\r\nimport EditIcon from \"@material-ui/icons/Create\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport ButtonBase from \"@material-ui/core/ButtonBase\";\r\n\r\nexport interface EmailTemplateCardProps {\r\n  name: string;\r\n  html: string;\r\n  windowWidth: number;\r\n  onOpen: () => void;\r\n  onDelete: () => void;\r\n}\r\n\r\nconst EmailTemplateCard: React.FC<EmailTemplateCardProps> = ({\r\n  html,\r\n  name,\r\n  windowWidth,\r\n  onOpen,\r\n  onDelete,\r\n}) => {\r\n  const cardRef = useRef<any>();\r\n\r\n  const [cardWidth, setCardWidth] = useState<number>(0);\r\n\r\n  useEffect(() => {\r\n    const { width } = cardRef.current.getBoundingClientRect();\r\n    setCardWidth(width);\r\n  }, [windowWidth]);\r\n\r\n  const scale = (cardWidth - 56) / 616;\r\n\r\n  return (\r\n    <>\r\n      <div className=\"w-full pt-110%\"></div>\r\n      <div\r\n        className=\"absolute left-0 top-0 w-full h-full flex flex-col rounded-md overflow-hidden\"\r\n        ref={cardRef}\r\n      >\r\n        <div className=\"flex-grow h-0 pt-7 px-7 bg-blue-300\">\r\n          <iframe\r\n            src={\"data:text/html;charset=utf-8,\" + escape(html)}\r\n            style={{ width: 616, height: 677, transform: `scale(${scale})` }}\r\n            className=\"origin-top-left\"\r\n          ></iframe>\r\n        </div>\r\n        <div className=\"flex-shrink-0 w-full flex items-center justify-center bg-gray-301 h-39px relative text-sm\">\r\n          {name || \"Template name\"}\r\n        </div>\r\n      </div>\r\n      <div\r\n        className=\"absolute w-full h-full left-0 top-0 z-20 group cursor-pointer\"\r\n        onClick={onOpen}\r\n      >\r\n        <div className=\"absolute top-0 left-0 justify-between p-3 w-full z-20 group-hover:opacity-100 opacity-0 transition duration-200 flex\">\r\n          <ButtonBase className=\"outline-none h-26px w-26px rounded bg-orange-300 hover:bg-orange-301\">\r\n            <EditIcon\r\n              fontSize=\"small\"\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                onOpen();\r\n              }}\r\n            ></EditIcon>\r\n          </ButtonBase>\r\n          <ButtonBase className=\"outline-none h-26px w-26px rounded bg-orange-300 hover:bg-orange-301\">\r\n            <DeleteIcon\r\n              fontSize=\"small\"\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                onDelete();\r\n              }}\r\n            ></DeleteIcon>\r\n          </ButtonBase>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default EmailTemplateCard;\r\n","import { useState, useEffect } from \"react\";\r\n\r\nconst useWindowSize = () => {\r\n  // Initialize state with undefined width/height so server and client renders match\r\n  // Learn more here: https://joshwcomeau.com/react/the-perils-of-rehydration/\r\n  const [windowSize, setWindowSize] = useState({\r\n    width: 0,\r\n    height: 0,\r\n  });\r\n  useEffect(() => {\r\n    // Handler to call on window resize\r\n    function handleResize() {\r\n      // Set window width/height to state\r\n      setWindowSize({\r\n        width: window.innerWidth,\r\n        height: window.innerHeight,\r\n      });\r\n    }\r\n    // Add event listener\r\n    window.addEventListener(\"resize\", handleResize);\r\n    // Call handler right away so state gets updated with initial window size\r\n    handleResize();\r\n    // Remove event listener on cleanup\r\n    return () => window.removeEventListener(\"resize\", handleResize);\r\n  }, []); // Empty array ensures that effect is only run on mount\r\n  return windowSize;\r\n};\r\n\r\nexport default useWindowSize;\r\n","import Button from \"components/Button\";\r\nimport PageTitle from \"components/PageTitle\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { RootState } from \"store\";\r\nimport { CollectionType } from \"api/collectionTypes\";\r\nimport EmptyScreen from \"components/EmptyScreen\";\r\nimport { addDocument, updateDocument, getCollection } from \"api/collections\";\r\nimport EmailEditorModal from \"components/EmailEditorModal\";\r\nimport AddRounded from \"@material-ui/icons/AddRounded\";\r\nimport EmailTemplateCard from \"components/EmailTemplateCard\";\r\nimport useWindowSize from \"hooks/useWindowSize\";\r\nimport { deleteDocument } from \"api/collections\";\r\n\r\nimport { confirm } from \"components/Confirm\";\r\n\r\nexport interface EmailsProps {}\r\n\r\nexport type Template = { name: string; html: string; template: Object; docId: string };\r\n\r\nconst COLLECTION_ID = \"EmailsTemplatesReservedCollection\";\r\n\r\nconst Emails: React.FC<EmailsProps> = () => {\r\n  const [templates, setTemplates] = useState<Template[]>([]);\r\n  const [openEditor, setOpenEditor] = useState(false);\r\n  const [editTemplate, setEditTemplate] = useState<Template>();\r\n  const { width: windowWidth } = useWindowSize();\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const res = await getCollection({ collectionId: COLLECTION_ID });\r\n\r\n        setTemplates(res);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  const emailsColType = useSelector((state: RootState) =>\r\n    state.collectionTypes.find((x) => x.id === COLLECTION_ID)\r\n  );\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const onEnable = () => {\r\n    const colType = {\r\n      id: COLLECTION_ID,\r\n      name: COLLECTION_ID,\r\n      docId: COLLECTION_ID,\r\n      isSystem: true,\r\n      fields: [\r\n        { type: \"string\", id: \"name\" },\r\n        { type: \"string\", id: \"html\" },\r\n        { type: \"json\", id: \"template\" },\r\n        { id: \"createdAt\", type: \"date\", displayOnTable: true, isDefault: true },\r\n        { id: \"modifiedAt\", type: \"date\", displayOnTable: true, isDefault: true },\r\n        { id: \"docId\", type: \"string\", displayOnTable: true, isDefault: true },\r\n      ],\r\n    } as CollectionType;\r\n\r\n    addDocument(COLLECTION_ID, colType);\r\n\r\n    dispatch({ type: \"ADD_COLLECTION_TYPE\", payload: colType });\r\n  };\r\n\r\n  const closeEditor = () => {\r\n    setOpenEditor(false);\r\n    setEditTemplate(undefined);\r\n  };\r\n\r\n  return !emailsColType ? (\r\n    <div className=\"w-full h-full flex\">\r\n      <div className=\"m-auto\">\r\n        <div className=\"text-center mb-4 text-28px font-medium text-white\">Emails</div>\r\n        <Button onClick={onEnable} className=\"bg-fireck-4 hover:bg-fireck-4-hover h-34px\">\r\n          Enable\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  ) : (\r\n    <div>\r\n      <div className=\"flex justify-between flex-wrap mb-7\">\r\n        <PageTitle className=\"mb-4 mr-4\">Emails</PageTitle>\r\n        <Button\r\n          onClick={() => setOpenEditor(true)}\r\n          className=\"bg-fireck-4 hover:bg-fireck-4-hover h-34px mb-4 min-w-unset\"\r\n        >\r\n          <div className=\"flex items-center\">\r\n            <AddRounded className=\"mr-3 text-xl\"></AddRounded>\r\n            <span>Add template</span>\r\n          </div>\r\n        </Button>\r\n      </div>\r\n      {!templates.length ? (\r\n        <EmptyScreen\r\n          title=\"There are no templates\"\r\n          buttonTitle=\"Create\"\r\n          onCreate={() => setOpenEditor(true)}\r\n        ></EmptyScreen>\r\n      ) : (\r\n        <div className=\"flex flex-wrap -mx-3\">\r\n          {templates.map((x, i) => (\r\n            <div key={`email-template-${i}`} className=\"lg:w-3/12 md:w-4/12 w-6/12 px-3\">\r\n              <div className=\"w-full relative\">\r\n                <EmailTemplateCard\r\n                  onOpen={() => {\r\n                    setEditTemplate(x);\r\n                    setOpenEditor(true);\r\n                  }}\r\n                  onDelete={async () => {\r\n                    if (\r\n                      await confirm({\r\n                        confirmation: \"Do you really want to delete template?\",\r\n                      })\r\n                    ) {\r\n                      setTemplates((prev) => {\r\n                        let arr = [...prev];\r\n                        arr.splice(i, 1);\r\n                        return arr;\r\n                      });\r\n                      deleteDocument(\"EmailTemplatesReservedCollection\", x.docId);\r\n                    }\r\n                  }}\r\n                  windowWidth={windowWidth}\r\n                  name={x.name}\r\n                  html={x.html}\r\n                ></EmailTemplateCard>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n      {!openEditor ? null : (\r\n        <EmailEditorModal\r\n          onSave={async (template: any) => {\r\n            if (template.docId) {\r\n              updateDocument(\"EmailTemplatesReservedCollection\", template.docId, template);\r\n              setTemplates((prev) => {\r\n                let arr = [...prev];\r\n                const index = arr.findIndex((x) => x.docId === template.docId);\r\n                if (index === -1) return prev;\r\n                arr[index] = template;\r\n                return arr;\r\n              });\r\n            } else {\r\n              try {\r\n                const res = await addDocument(\"EmailTemplatesReservedCollection\", template);\r\n                setTemplates((prev) => [res, ...prev]);\r\n              } catch (error) {\r\n                console.log(error);\r\n              }\r\n            }\r\n\r\n            closeEditor();\r\n          }}\r\n          onClose={closeEditor}\r\n          editTemplate={editTemplate}\r\n        ></EmailEditorModal>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Emails;\r\n"],"sourceRoot":""}