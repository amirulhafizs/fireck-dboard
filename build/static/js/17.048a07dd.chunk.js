(this["webpackJsonpfireck-cms"]=this["webpackJsonpfireck-cms"]||[]).push([[17],{1025:function(e,t,c){"use strict";c.r(t);var n=c(8),a=c(12),r=c(9),i=c.n(r),o=c(19),s=c(6),l=c(20),u=function(){var e=l.a.getState().user;return"Bearer "+(e?e.token:null)};function p(e,t){var c="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e)),n=document.createElement("a");n.setAttribute("href",c),n.setAttribute("download",t+".json"),document.body.appendChild(n),n.click(),n.remove()}var d=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(window.location.origin+"/private/import-export/export",{method:"POST",headers:{Authorization:u()},body:JSON.stringify(t)}).then((function(e){return e.json()}));case 2:p(e.sent,"FireckDatabaseSchema");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(e){return fetch(window.location.origin+"/private/import-export/import",{method:"POST",headers:{Authorization:u()},body:JSON.stringify(e)}).then((function(e){return e.json()}))},f=c(0),j=c(97),m=c(44),x=c(836),h=c(1022),O=c(999),v=c(84),k=c(225),N=c(852),w=c(194),g=c(329),y=c.n(g),S=c(1);t.default=function(){var e=Object(f.useRef)(null),t=Object(j.b)(),c=[{title:"Export JSON",btnText:"Export",description:"Export database JSON schema. This JSON file is meant to be imported into other Fireck app",onClick:function(){return g(!0)}},{title:"Import JSON",btnText:"Import",description:"Import database JSON schema file that was exported from other Fireck app.",onClick:function(){e.current.click()}}],r=Object(f.useState)(!1),u=Object(s.a)(r,2),p=u[0],g=u[1],E=Object(f.useState)({collections:!0,collectionTypes:!0,roles:!0,appearance:!0}),T=Object(s.a)(E,2),C=T[0],A=T[1],J=Object(f.useState)(!1),I=Object(s.a)(J,2),P=I[0],_=I[1];return Object(S.jsxs)("div",{children:[Object(S.jsx)(N.a,{className:"mb-12",children:"Import & Export"}),Object(S.jsx)("input",{className:"hidden",ref:e,type:"file",onChange:function(e){var c=e.target.files;if(c&&c.length){var n=new FileReader;n.onload=Object(o.a)(i.a.mark((function e(){var c,a,r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.a.dispatch({type:"SET_LOADING",payload:"Importing database..."}),c=JSON.parse(n.result),e.next=4,b(c);case 4:if(a=e.sent,l.a.dispatch({type:"SET_LOADING",payload:!1}),a.error){e.next=16;break}return t("Database imported!",{variant:"success"}),e.next=10,Object(w.c)({collectionId:"CollectionTypesReservedCollection",limit:1e3});case 10:return(r=e.sent).error||l.a.dispatch({type:"SET_COLLECTION_TYPES",payload:r}),e.next=14,Object(v.c)();case 14:(o=e.sent).error||(l.a.dispatch({type:"SET_APPEARANCE",payload:o}),l.a.dispatch({type:"SET_NEW_APPEARANCE",payload:o}),Object(k.b)(o.colors));case 16:case"end":return e.stop()}}),e)}))),n.readAsText(c[0])}}}),p?Object(S.jsx)(x.a,{open:p,hideBackdrop:!0,children:Object(S.jsx)("div",{className:"w-full h-full overflow-auto flex bg-black bg-opacity-40",onMouseDown:function(){return g(!1)},children:Object(S.jsxs)("div",{className:"bg-white p-7 rounded m-auto animate-littlemoveup relative",onMouseDown:function(e){return e.stopPropagation()},children:[Object(S.jsx)(y.a,{className:"absolute top-0 right-0 cursor-pointer",onClick:function(){return g(!1)}}),Object(S.jsx)("div",{className:"flex flex-wrap max-w-422px w-full mb-9",children:Object.keys(C).map((function(e){return Object(S.jsx)("div",{className:"flex w-1/2 px-2 items-center select-none",children:Object(S.jsx)(h.a,{classes:{label:"font-poppins line-clamp-1"},control:Object(S.jsx)(O.a,{classes:{root:"text-fireck-1"},className:"mr-3",checked:C[e],onChange:function(t){A((function(c){return Object(a.a)(Object(a.a)({},c),{},Object(n.a)({},e,t.target.checked))})),"collections"===e&&t.target.checked?A((function(e){return Object(a.a)(Object(a.a)({},e),{},{collectionTypes:!0})})):"collectionTypes"!==e||t.target.checked||A((function(e){return Object(a.a)(Object(a.a)({},e),{},{collections:!1})}))}}),label:e})},e)}))}),Object(S.jsx)("div",{className:"flex justify-end",children:Object(S.jsx)(m.a,{onClick:Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),e.next=3,d(C);case 3:_(!1),g(!1);case 5:case"end":return e.stop()}}),e)}))),className:"bg-fireck-4 hover:bg-fireck-4-hover h-34px",children:P?"Exporting...":"Export"})})]})})}):null,Object(S.jsx)("div",{className:"flex flex-wrap",children:c.map((function(e,t){return Object(S.jsxs)("div",{className:"p-7 bg-fireck-3 text-white rounded mr-3 mb-3 max-w-sm w-full flex flex-col",children:[Object(S.jsx)("div",{className:"font-medium text-lg mb-2",children:e.title}),Object(S.jsx)("div",{className:"mb-7 text-sm",children:e.description}),Object(S.jsx)("div",{className:"flex justify-end flex-grow items-end",children:Object(S.jsx)(m.a,{onClick:e.onClick,className:"bg-fireck-4 min-w-unset hover:bg-fireck-4-hover h-34px w-140px text-black",children:e.btnText})})]},"section-".concat(t))}))})]})}},852:function(e,t,c){"use strict";var n=c(12),a=c(98),r=c(108),i=c.n(r),o=c(1),s=["className"];t.a=function(e){var t=e.className,c=Object(a.a)(e,s);return Object(o.jsx)("div",Object(n.a)(Object(n.a)({},c),{},{className:i()("text-27px text-white font-medium capitalize leading-none",t)}))}}}]);
//# sourceMappingURL=17.048a07dd.chunk.js.map