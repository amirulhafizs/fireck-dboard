{"version":3,"sources":["components/PageTitle.tsx","components/EmptyScreen.tsx","components/InViewFetcher.tsx","api/files.ts","pages/Media/index.tsx"],"names":["PageTitle","className","rest","classNames","EmptyScreen","title","onCreate","buttonTitle","onClick","InViewFetcher","fetcher","onValue","limit","onError","React","useState","endReached","setEndReached","onChange","inView","a","res","error","length","size","uploadFileToStorage","file","Promise","resolve","reject","storage","firebase","metadata","contentType","type","nameParts","name","split","fileName","v4","uploadTask","ref","put","on","snapshot","message","getDownloadURL","then","downloadUrl","uploadFile","fileDetails","url","storagePath","user","store","getState","token","fetch","window","location","origin","method","body","JSON","stringify","headers","Authorization","x","json","getFiles","orderBy","startAt","startAfter","deleteFile","docId","formatBytes","b","c","d","Math","floor","log","parseFloat","pow","toFixed","Media","uploadRef","useRef","assets","setAssets","notify","useNotify","useEffect","dispatch","payload","console","multiple","e","files","target","uploaded","variant","prev","noMinWidth","current","click","map","i","open","fontSize","confirm","confirmation","arr","splice","style","paddingTop","backgroundImage","slice","pop","results","uploaded_at"],"mappings":"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","file":"static/js/14.afae3b04.chunk.js","sourcesContent":["import classNames from \"classnames\";\r\n\r\nexport interface PageTitleProps\r\n  extends React.DetailedHTMLProps<React.HTMLAttributes<HTMLDivElement>, HTMLDivElement> {}\r\n\r\nconst PageTitle: React.FC<PageTitleProps> = ({ className, ...rest }) => {\r\n  return (\r\n    <div\r\n      {...rest}\r\n      className={classNames(\"text-34px font-medium capitalize leading-none\", className)}\r\n    ></div>\r\n  );\r\n};\r\n\r\nexport default PageTitle;\r\n","import Button from \"components/Button\";\r\n\r\nexport interface EmptyScreenProps {\r\n  title: string;\r\n  buttonTitle: string;\r\n  onCreate: () => void;\r\n}\r\n\r\nconst EmptyScreen: React.FC<EmptyScreenProps> = ({ title, onCreate, buttonTitle }) => {\r\n  return (\r\n    <div className=\"h-96 bg-gray-300 rounded-md flex w-full p-12\">\r\n      <div className=\"m-auto\">\r\n        <div className=\"text-22px mb-5 font-medium text-center\">{title}</div>\r\n        <Button className=\"mx-auto bg-orange-300 hover:bg-orange-301 block\" onClick={onCreate}>\r\n          {buttonTitle}\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EmptyScreen;\r\n","import Loader from \"components/Loader\";\r\nimport { InView } from \"react-intersection-observer\";\r\nimport React from \"react\";\r\n\r\nexport interface InViewFetcherProps {\r\n  fetcher: () => Promise<Array<any> | { error: any }>;\r\n  onValue: (a: Array<any>) => void;\r\n  onError?: (val: string) => void;\r\n  limit: number;\r\n}\r\n\r\nconst InViewFetcher: React.FC<InViewFetcherProps> = ({\r\n  fetcher,\r\n  onValue,\r\n  limit,\r\n  onError = () => {},\r\n}) => {\r\n  const [endReached, setEndReached] = React.useState(false);\r\n  return (\r\n    <InView\r\n      className=\"w-full\"\r\n      onChange={async (inView) => {\r\n        if (inView && !endReached) {\r\n          let res = await fetcher();\r\n          if (!(\"error\" in res)) {\r\n            onValue(res);\r\n            if (!res.length || res.length < limit) {\r\n              setEndReached(true);\r\n            }\r\n          } else {\r\n            onError(res.error);\r\n            setEndReached(true);\r\n          }\r\n        }\r\n      }}\r\n    >\r\n      {!endReached ? (\r\n        <div className=\"flex justify-center py-3\">\r\n          <Loader size=\"small\"></Loader>\r\n        </div>\r\n      ) : (\r\n        \"\"\r\n      )}\r\n    </InView>\r\n  );\r\n};\r\n\r\nexport default InViewFetcher;\r\n","import firebase from \"firebase\";\r\nimport store from \"store\";\r\nimport { v4 } from \"uuid\";\r\nimport mime from \"mime-types\";\r\n\r\nexport const uploadFileToStorage = (\r\n  file: File\r\n): Promise<{ downloadUrl: string; fileName: string } | { error: string }> => {\r\n  return new Promise((resolve, reject) => {\r\n    try {\r\n      const storage = firebase.storage();\r\n\r\n      const metadata = {\r\n        contentType: file.type,\r\n      };\r\n\r\n      const nameParts = file.name.split(\".\");\r\n\r\n      const fileName = v4() + \".\" + nameParts[nameParts.length - 1];\r\n      let ref = storage.ref(fileName);\r\n      const uploadTask = ref.put(file, metadata);\r\n      uploadTask.on(\r\n        \"state_changed\",\r\n        (snapshot) => {},\r\n        (error) => {\r\n          resolve({ error: error.message });\r\n        },\r\n        () => {\r\n          uploadTask.snapshot.ref.getDownloadURL().then((downloadUrl) => {\r\n            resolve({ downloadUrl, fileName });\r\n          });\r\n        }\r\n      );\r\n    } catch (error: any) {\r\n      resolve({ error });\r\n    }\r\n  });\r\n};\r\n\r\nexport const uploadFile = async (file: File): Promise<{ error: string } | any> => {\r\n  try {\r\n    const res = await uploadFileToStorage(file);\r\n    if (\"error\" in res) {\r\n      return res;\r\n    } else {\r\n      const fileDetails = {\r\n        name: file.name,\r\n        size: file.size,\r\n        url: res.downloadUrl,\r\n        storagePath: res.fileName,\r\n      };\r\n      const user = store.getState().user;\r\n      const token = user ? user.token : null;\r\n      return fetch(window.location.origin + \"/private/files\", {\r\n        method: \"POST\",\r\n        body: JSON.stringify(fileDetails),\r\n        headers: { Authorization: \"Bearer \" + token },\r\n      }).then((x) => x.json());\r\n    }\r\n  } catch (error) {\r\n    return { error };\r\n  }\r\n};\r\n\r\nexport type FileDocument = {\r\n  docId: string;\r\n  name: string;\r\n  size: number;\r\n  storagePath: string;\r\n  uploaded_at: number;\r\n  url: string;\r\n};\r\n\r\nexport const getFiles = async ({\r\n  limit = 10,\r\n  orderBy,\r\n  startAt,\r\n  startAfter,\r\n}: {\r\n  limit?: number;\r\n  orderBy: string;\r\n  startAt?: string | number;\r\n  startAfter?: string | number;\r\n}): Promise<Array<FileDocument> | { error: string }> => {\r\n  try {\r\n    const user = store.getState().user;\r\n    const token = user ? user.token : null;\r\n    return fetch(\r\n      window.location.origin +\r\n        `/private/files?limit=${limit}${\r\n          startAt ? \"&startAt=\" + startAt : \"\"\r\n        }&orderBy=${orderBy},desc${startAfter ? `&startAfter=${startAfter}` : \"\"}`,\r\n      {\r\n        headers: { Authorization: \"Bearer \" + token },\r\n      }\r\n    ).then((x) => x.json());\r\n  } catch (error: any) {\r\n    return { error };\r\n  }\r\n};\r\n\r\nexport const getFilesCount = async () => {\r\n  try {\r\n    const user = store.getState().user;\r\n    const token = user ? user.token : null;\r\n    return fetch(window.location.origin + `/private/files/count`, {\r\n      headers: { Authorization: \"Bearer \" + token },\r\n    }).then((x) => x.json());\r\n  } catch (error) {\r\n    return { error };\r\n  }\r\n};\r\n\r\nexport const deleteFile = (docId: string, storagePath: string) => {\r\n  try {\r\n    const user = store.getState().user;\r\n    const token = user ? user.token : null;\r\n    return fetch(window.location.origin + `/private/files`, {\r\n      method: \"DELETE\",\r\n      headers: { Authorization: \"Bearer \" + token },\r\n      body: JSON.stringify({ docId, storagePath }),\r\n    }).then((x) => x.json());\r\n  } catch (error) {\r\n    return { error };\r\n  }\r\n};\r\n","import Button from \"components/Button\";\r\nimport { IoAdd } from \"react-icons/io5\";\r\nimport React from \"react\";\r\nimport { uploadFile, getFiles, FileDocument, deleteFile } from \"api/files\";\r\nimport store from \"store\";\r\nimport InViewFetcher from \"components/InViewFetcher\";\r\nimport ButtonBase from \"@material-ui/core/ButtonBase\";\r\nimport OpenInNew from \"@material-ui/icons/OpenInNew\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport { confirm } from \"components/Confirm\";\r\nimport { useNotify } from \"components/NotificationsProvider\";\r\nimport PageTitle from \"components/PageTitle\";\r\nimport EmptyScreen from \"components/EmptyScreen\";\r\n\r\nexport function formatBytes(a: number, b = 2) {\r\n  if (0 === a) return \"0 Bytes\";\r\n  const c = 0 > b ? 0 : b,\r\n    d = Math.floor(Math.log(a) / Math.log(1024));\r\n  return (\r\n    parseFloat((a / Math.pow(1024, d)).toFixed(c)) +\r\n    \" \" +\r\n    [\"Bytes\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"][d]\r\n  );\r\n}\r\n\r\nexport interface MediaProps {}\r\n\r\nconst Media: React.FC<MediaProps> = () => {\r\n  const uploadRef = React.useRef(null as any);\r\n  const [assets, setAssets] = React.useState<Array<FileDocument>>([]);\r\n  const notify = useNotify();\r\n\r\n  React.useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        store.dispatch({ type: \"SET_LOADING\", payload: true });\r\n        const res = await getFiles({ orderBy: \"uploaded_at\" });\r\n        if (\"error\" in res) {\r\n        } else {\r\n          setAssets(res);\r\n        }\r\n\r\n        store.dispatch({ type: \"SET_LOADING\", payload: false });\r\n      } catch (er) {\r\n        console.log(er);\r\n      }\r\n    })();\r\n  }, []);\r\n  return (\r\n    <div>\r\n      <div className=\"flex justify-between flex-wrap mb-7\">\r\n        <PageTitle className=\"mb-4 mr-4\">Media</PageTitle>\r\n        <input\r\n          type=\"file\"\r\n          multiple\r\n          className=\"hidden\"\r\n          ref={uploadRef}\r\n          onChange={async (e) => {\r\n            const files = e.target.files;\r\n            if (files && files.length) {\r\n              store.dispatch({\r\n                type: \"SET_LOADING\",\r\n                payload: `Uploading ${files.length} file${files.length > 1 ? \"s\" : \"\"}...`,\r\n              });\r\n              let uploaded = 0;\r\n              for (let file of files) {\r\n                const res = await uploadFile(file);\r\n                console.log(\"Response of file upload\", res);\r\n                if (!(\"error\" in res)) {\r\n                  uploaded++;\r\n                  store.dispatch({\r\n                    type: \"SET_LOADING\",\r\n                    payload: `${uploaded}/${files.length} uploaded.`,\r\n                  });\r\n                  setAssets((prev) => [res, ...prev]);\r\n                } else {\r\n                  notify(\"Permission denied. Try reload the app\", { variant: \"error\" });\r\n                }\r\n              }\r\n\r\n              store.dispatch({ type: \"SET_LOADING\", payload: false });\r\n            }\r\n          }}\r\n        />\r\n        <Button\r\n          noMinWidth\r\n          onClick={() => uploadRef.current.click()}\r\n          className=\"bg-orange-300 hover:bg-orange-301 mb-4\"\r\n        >\r\n          <div className=\"flex items-center\">\r\n            <IoAdd className=\"mr-2\" size={18}></IoAdd>\r\n            <span>Upload</span>\r\n          </div>\r\n        </Button>\r\n      </div>\r\n      {/* <div className=\"mb-6 text-gray-600 leading-none\">{count} files in total</div> */}\r\n      {!assets.length ? (\r\n        <EmptyScreen\r\n          buttonTitle=\"Upload the first one\"\r\n          title=\"There are no media files yet\"\r\n          onCreate={() => uploadRef.current.click()}\r\n        ></EmptyScreen>\r\n      ) : (\r\n        <div className=\"flex flex-wrap -mx-3\">\r\n          {assets.map((x, i) => (\r\n            <div key={`asset-${i}`} className=\"xl:w-3/12 lg:w-4/12 xs:w-6/12 w-full px-3 mb-6\">\r\n              <div className=\"w-full relative rounded-sm overflow-hidden group\">\r\n                <div className=\"absolute top-0 left-0 justify-between p-3 w-full z-20 group-hover:opacity-100 opacity-0 transition duration-200 flex\">\r\n                  <ButtonBase\r\n                    onClick={() => window.open(x.url, \"_blank\")}\r\n                    className=\"outline-none h-26px w-26px rounded bg-orange-300 hover:bg-orange-301\"\r\n                  >\r\n                    <OpenInNew fontSize=\"small\"></OpenInNew>\r\n                  </ButtonBase>\r\n                  <ButtonBase className=\"outline-none h-26px w-26px rounded bg-orange-300 hover:bg-orange-301\">\r\n                    <DeleteIcon\r\n                      fontSize=\"small\"\r\n                      onClick={async () => {\r\n                        if (\r\n                          await confirm({\r\n                            confirmation: \"Do you really want to delete this file?\",\r\n                          })\r\n                        ) {\r\n                          setAssets((prev) => {\r\n                            let arr = [...prev];\r\n                            arr.splice(i, 1);\r\n                            return arr;\r\n                          });\r\n                          const res = await deleteFile(x.docId, x.storagePath);\r\n                          if (!(\"error\" in res)) {\r\n                            notify(\"File deleted!\", { variant: \"success\" });\r\n                          }\r\n                        }\r\n                      }}\r\n                    ></DeleteIcon>\r\n                  </ButtonBase>\r\n                </div>\r\n\r\n                <div style={{ paddingTop: \"61%\" }} className=\"bg-blue-300\"></div>\r\n                <div\r\n                  style={{ paddingTop: \"61%\", backgroundImage: `url(${x.url})` }}\r\n                  className=\"bg-center bg-contain bg-no-repeat absolute left-0 top-0 z-10 w-full\"\r\n                ></div>\r\n\r\n                <div className=\"p-4 bg-gray-300\">\r\n                  <div className=\"line-clamp-1 font-medium mb-3\">{x.name}</div>\r\n                  <div className=\"flex justify-between\">\r\n                    <div>{formatBytes(x.size)}</div>\r\n                    <div>\r\n                      <div className=\"bg-orange-300 rounded px-2 py-0.5 text-sm\">\r\n                        {x.name.split(\".\").slice(-1).pop()}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n\r\n          {assets.length ? (\r\n            <InViewFetcher\r\n              limit={10}\r\n              onValue={(results: Array<FileDocument>) => {\r\n                setAssets((prev) => [...prev, ...results]);\r\n              }}\r\n              fetcher={() =>\r\n                getFiles({\r\n                  startAfter: assets[assets.length - 1].uploaded_at,\r\n                  orderBy: \"uploaded_at\",\r\n                })\r\n              }\r\n            ></InViewFetcher>\r\n          ) : null}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Media;\r\n"],"sourceRoot":""}