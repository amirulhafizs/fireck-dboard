(this["webpackJsonpfirebase-cms1"]=this["webpackJsonpfirebase-cms1"]||[]).push([[12],{725:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(10),a=n(45),c=n.n(a),i=(n(0),n(22)),l=n(14),s=n(1);function o(e){var t=e.Component,n=e.props;return new Promise((function(e,a){var o,d=null===(o=document.getElementById("root"))||void 0===o?void 0:o.appendChild(document.createElement("div"));d&&c.a.render(Object(s.jsx)(i.a,{store:l.a,children:Object(s.jsx)(t,Object(r.a)(Object(r.a)({},n),{},{proceed:function(t){var n;c.a.unmountComponentAtNode(d),null===(n=d.parentNode)||void 0===n||n.removeChild(d),e(t)}}))}),d)}))}},727:function(e,t,n){"use strict";var r=n(140),a=n(10),c=n(251),i=n(675),l=n(0),s=n.n(l),o=n(141),d=n.n(o),u=n(1),b=s.a.forwardRef((function(e,t){return Object(u.jsx)("div",Object(a.a)(Object(a.a)({},e),{},{ref:t,children:Object(u.jsx)(c.b,{className:"text-red-500",size:20})}))}));t.a=function(e){var t=e.className,n=void 0===t?"":t,c=e.options,l=e.error,s=e.white,o=void 0!==s&&s,j=Object(r.a)(e,["className","options","error","white"]);return Object(u.jsxs)("div",{className:"".concat(n," relative flex items-center"),children:[Object(u.jsx)("select",Object(a.a)(Object(a.a)({className:d()("px-3 h-34px border-2 border-solid w-full rounded outline-none",{"border-red-400":l,"focus:border-blue-300":!l,"border-gray-300 bg-gray-300":!o,"border-white bg-white":o})},j),{},{spellCheck:!1,children:c.map((function(e,t){return Object(u.jsx)("option",{value:e.value,children:e.label},"opt-"+t)}))})),l?Object(u.jsx)(i.a,{title:l,placement:"top",children:Object(u.jsx)(b,{className:"absolute right-2 my-auto w-auto"})}):null]})}},728:function(e,t,n){"use strict";var r=n(10),a=n(140),c=n(714),i=n(1);t.a=function(e){var t=e.className,n=void 0===t?"":t,l=e.variant,s=void 0===l?"standard":l,o=Object(a.a)(e,["className","variant"]);return Object(i.jsx)(c.a,Object(r.a)(Object(r.a)({},o),{},{className:"outline-none h-26px w-26px rounded ".concat("standard"===s?"bg-orange-300 hover:bg-orange-301":"hover:bg-black hover:bg-opacity-5","  ")+n}))}},729:function(e,t,n){"use strict";var r=n(44),a=n(1);t.a=function(e){var t=e.title,n=e.onCreate,c=e.buttonTitle;return Object(a.jsx)("div",{className:"h-96 bg-gray-300 rounded-md flex w-full p-12",children:Object(a.jsxs)("div",{className:"m-auto",children:[Object(a.jsx)("div",{className:"text-22px mb-5 font-medium text-center",children:t}),Object(a.jsx)(r.a,{className:"mx-auto bg-orange-300 hover:bg-orange-301 block",onClick:n,children:c})]})})}},735:function(e,t,n){"use strict";var r=n(10),a=n(0),c=n.n(a),i=n(255),l=n.n(i),s=n(675),o=n(1),d=c.a.forwardRef((function(e,t){return Object(o.jsx)("div",Object(r.a)(Object(r.a)({},e),{},{ref:t,children:Object(o.jsx)(l.a,{className:"text-red-500 text-xl",fontSize:"inherit"})}))}));t.a=function(e){var t=e.className,n=void 0===t?"":t,r=e.children,a=e.error;return Object(o.jsxs)("div",{className:"flex justify-between relative ".concat(n),children:[Object(o.jsx)("div",{children:r}),a?Object(o.jsx)(s.a,{title:a,placement:"top",children:Object(o.jsx)(d,{className:"absolute right-2 my-auto w-auto"})}):null]})}},749:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r,a,c,i=n(0);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function o(e,t){var n=e.title,o=e.titleId,d=s(e,["title","titleId"]);return i.createElement("svg",l({width:40,height:9,viewBox:"0 0 40 9",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":o},d),n?i.createElement("title",{id:o},n):null,r||(r=i.createElement("path",{d:"M9.36621 4.67223H30.7241M30.7241 4.67223L28.3085 2.25659M30.7241 4.67223L28.3085 7.08786",stroke:"black",strokeWidth:1.37296,strokeLinecap:"round",strokeLinejoin:"round"})),a||(a=i.createElement("circle",{cx:4.69562,cy:4.49835,r:3.31773,stroke:"black",strokeWidth:1.37296})),c||(c=i.createElement("circle",{cx:35.3948,cy:4.49835,r:3.31773,stroke:"black",strokeWidth:1.37296})))}var d=i.forwardRef(o);n.p},750:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r,a,c,i,l,s=n(0);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function u(e,t){var n=e.title,u=e.titleId,b=d(e,["title","titleId"]);return s.createElement("svg",o({width:40,height:37,viewBox:"0 0 40 37",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":u},b),n?s.createElement("title",{id:u},n):null,r||(r=s.createElement("path",{d:"M10.5875 18.8431L30.4119 7.39751M30.4119 7.39751L26.8752 6.44984M30.4119 7.39751L29.4643 10.9342",stroke:"black",strokeWidth:1.47153,strokeLinecap:"round",strokeLinejoin:"round"})),a||(a=s.createElement("path",{d:"M10.5873 18.8433L30.4117 30.2889M30.4117 30.2889L29.4641 26.7522M30.4117 30.2889L26.875 31.2366",stroke:"black",strokeWidth:1.47153,strokeLinecap:"round",strokeLinejoin:"round"})),c||(c=s.createElement("circle",{cx:5.00165,cy:18.7858,r:3.55593,stroke:"black",strokeWidth:1.47153})),i||(i=s.createElement("circle",{cx:35.2653,cy:32.5311,r:3.55593,stroke:"black",strokeWidth:1.47153})),l||(l=s.createElement("circle",{cx:35.2653,cy:5.15558,r:3.55593,stroke:"black",strokeWidth:1.47153})))}var b=s.forwardRef(u);n.p},790:function(e,t,n){"use strict";n.r(t),n.d(t,"reorder",(function(){return Fe}));var r=n(19),a=n(10),c=n(7),i=n.n(c),l=n(13),s=n(6),o=n(44),d=n(251),u=n(0),b=n.n(u),j=n(252),x=n(22),f=n(742),m=n.n(f),p=n(733),O=n.n(p),h=n(731),v=n.n(h),g=n(713),w=n(88),y=n(78),N=n(142),k=n(143),C=n(140),S=n(1),I=function(e){var t=e.className,n=void 0===t?"":t,r=e.options,c=e.value,i=e.setValue,l=e.disabled,s=Object(C.a)(e,["className","options","value","setValue","disabled"]);return Object(S.jsx)("div",Object(a.a)(Object(a.a)({className:"flex -mx-2 flex-wrap sm:flex-nowrap mb-10 "+n},s),{},{children:r.map((function(e,t){return Object(S.jsx)("div",{onClick:function(){return i(e.value)},className:"sm:w-1/2 w-full mx-2 mb-3 sm:mb-0 py-7 select-none ".concat(l?"cursor-default":"cursor-pointer"," flex items-center justify-center rounded ").concat(c===e.value?"border-4 border-orange-300":"bg-gray-300 ".concat(l?"":"hover:bg-gray-301")),children:Object(S.jsxs)("div",{className:"flex items-center",children:[Object(S.jsx)("div",{className:e.icon?"mr-7":"",children:e.label}),e.icon?Object(S.jsx)(e.icon,{}):null]})},e.value)}))}))};var E,T=function(e){for(var t,n,r="",a=0;a<e.length;a++)" "===e[a]?r+="-":a>0&&e[a-1].toLowerCase()===e[a-1]&&" "!==e[a-1]&&e[a].toUpperCase()===e[a]&&!((n=e[a])>="0"&&n<="9")&&(1===(t=e[a]).length&&t.match(/[a-z]/i))?r+="-"+e[a].toLowerCase():r+=e[a].toLowerCase();return r},F=function(e){var t=e.open,n=e.onClose,r=e.collections,c=e.editingCollectionIndex,s=Object(y.b)(),d=c>=0?r[c]:{name:"",id:"",single:!1,draftable:!0,fields:[{id:"createdAt",type:"date",displayOnTable:!0,isDefault:!0},{id:"modifiedAt",type:"date",displayOnTable:!0,isDefault:!0},{id:"docId",type:"string",displayOnTable:!0,isDefault:!0}],webhooks:{find:{method:"POST",url:""},"find one":{method:"POST",url:""},create:{method:"POST",url:""},update:{method:"POST",url:""},delete:{method:"POST",url:""}},size:0,lastIndex:0,docId:""},u=Object(k.a)({enableReinitialize:!0,onSubmit:function(){var e=Object(l.a)(i.a.mark((function e(t,r){var l,o,d,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=r.resetForm,o=T(t.name),!(c>-1)){e.next=8;break}return e.next=5,Object(j.d)(b.docId,Object(a.a)(Object(a.a)({},b),{},{id:o}));case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,Object(j.a)(Object(a.a)(Object(a.a)({},b),{},{id:o}));case 10:e.t0=e.sent;case 11:d=e.t0,u=c>-1?"updated":"created",d.error?s("Collection type was not "+u,{variant:"error"}):(l(),n(),s("Collection type "+u+"!",{variant:"success"}));case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),initialValues:d,validate:function(e){var t={};if(e.name){var n=T(e.name),a=r.findIndex((function(e){return e.id===n}));-1!==a&&a!==c&&(t.name="There is collection with the same name")}else t.name="Collection name is required";return t}}),b=u.values,x=u.errors,f=u.handleSubmit,m=u.handleChange,p=u.setFieldValue,O=u.isSubmitting,h=u.submitCount;return Object(S.jsx)(g.a,{open:t,hideBackdrop:!0,children:Object(S.jsx)("div",{className:"w-full h-full flex overflow-auto bg-black bg-opacity-40",children:Object(S.jsxs)("div",{className:"m-auto rounded bg-white max-w-644px w-full p-9",children:[Object(S.jsxs)("div",{className:"text-22px font-medium mb-12",children:[c>-1?"Edit":"Create"," collection type"]}),Object(S.jsxs)("div",{className:"flex flex-wrap mb-7",children:[Object(S.jsxs)("div",{className:"mb-3 sm:w-1/2 w-full sm:pr-2",children:[Object(S.jsx)("div",{className:"mb-2",children:"Collection name"}),Object(S.jsx)(w.a,{error:!!(h>0&&x.name)&&x.name,value:b.name,name:"name",onChange:m,onKeyDown:function(e){"Enter"===e.key&&f()}})]}),Object(S.jsxs)("div",{className:"mb-3 sm:w-1/2 w-full sm:pl-2",children:[Object(S.jsx)("div",{className:"mb-2",children:"UID"}),Object(S.jsx)(w.a,{disabled:!0,value:T(b.name),name:"id"})]})]}),Object(S.jsx)(I,{disabled:-1!==c,value:b.single,options:[{value:!1,label:"Multiple elements"},{value:!0,label:"Single element"}],setValue:function(e){return-1===c?p("single",e):{}}}),c>-1?Object(S.jsx)(o.a,{onClick:Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.a)({confirmation:"Do you really want to delete collection type?"});case 2:if(!e.sent){e.next=8;break}return e.next=5,Object(j.b)(r[c].docId);case 5:e.sent.error?s("Collection type was not deleted",{variant:"error"}):s("Collection type deleted!",{variant:"success"}),n();case 8:case"end":return e.stop()}}),e)}))),className:"border-2 border-red-500 text-red-500 mb-10 hover:bg-red-500 hover:text-white",children:"Delete collection"}):null,Object(S.jsxs)("div",{className:"flex justify-between",children:[Object(S.jsx)(o.a,{onClick:function(){return n()},className:"bg-blue-300 hover:bg-blue-400 text-white",children:"Cancel"}),Object(S.jsx)(o.a,{disabled:O,onClick:function(){return f()},className:"bg-orange-300 hover:bg-orange-301",children:O?"Loading...":"Submit"})]})]})})})},L=function(){return Object(S.jsx)("div",{className:"w-42px rounded h-28px bg-orange-300 text-center leading-28px text-xs font-medium",children:"Ab"})},D=function(){return Object(S.jsx)("div",{className:"w-42px rounded h-28px bg-orange-300 text-center leading-28px text-xs font-medium",children:"123"})},P=function(){return Object(S.jsx)("div",{className:"w-42px rounded h-28px bg-orange-300 text-center leading-28px text-xs font-medium",children:"{ }"})},z=function(){return Object(S.jsx)("div",{className:"w-42px rounded h-28px bg-orange-300 text-center leading-28px text-xs font-medium",children:"[ ]"})},B=n(757),V=n.n(B),H=function(){return Object(S.jsx)("div",{className:"w-42px rounded h-28px bg-orange-300 text-center leading-28px text-xs font-medium",children:Object(S.jsx)(V.a,{fontSize:"inherit",className:"text-lg"})})},M=n(758),A=n.n(M),R=function(){return Object(S.jsx)("div",{className:"w-42px rounded h-28px bg-orange-300 text-center leading-28px text-xs font-medium",children:Object(S.jsx)(A.a,{fontSize:"inherit",className:"text-base"})})},_=n(759),W=n.n(_),J=function(){return Object(S.jsx)("div",{className:"w-42px rounded h-28px bg-blue-300 text-white text-center leading-28px text-xs font-medium",children:Object(S.jsx)(W.a,{fontSize:"inherit",className:"text-base"})})},U=n(760),Z=n.n(U),q=function(){return Object(S.jsx)("div",{className:"w-42px rounded h-28px bg-blue-300 text-white text-center leading-28px text-xs font-medium",children:Object(S.jsx)(Z.a,{fontSize:"inherit",className:"text-base"})})},K=function(){return Object(S.jsx)("div",{className:"w-42px rounded h-28px bg-blue-300 text-center text-white leading-28px text-xs font-medium",children:"JSON"})},Y=n(761),G=n.n(Y),Q=function(){return Object(S.jsx)("div",{className:"w-42px rounded h-28px bg-blue-300 text-center text-white leading-28px text-xs font-medium",children:Object(S.jsx)(G.a,{fontSize:"inherit",className:"text-xl"})})},X=n(260),$=n.n(X),ee=function(){return Object(S.jsx)("div",{className:"w-42px rounded h-28px bg-blue-300 text-white text-center leading-28px text-xs font-medium",children:Object(S.jsx)($.a,{fontSize:"inherit",className:"text-base"})})},te=n(748),ne=n.n(te),re=function(){return Object(S.jsx)("div",{className:"w-42px rounded h-28px bg-blue-300 text-white text-center leading-28px text-xs font-medium",children:Object(S.jsx)(ne.a,{fontSize:"inherit",className:"text-xl"})})};function ae(){return(ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ce(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ie(e,t){var n=e.title,r=e.titleId,a=ce(e,["title","titleId"]);return u.createElement("svg",ae({width:16,height:16,viewBox:"0 0 19 19",fill:"white",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},a),n?u.createElement("title",{id:r},n):null,E||(E=u.createElement("path",{d:"M0.570312 0.778809H6.57031V4.77881H0.570312V0.778809ZM12.5703 7.77881H18.5703V11.7788H12.5703V7.77881ZM12.5703 14.7788H18.5703V18.7788H12.5703V14.7788ZM10.5703 10.7788H4.57031V15.7788H10.5703V17.7788H4.57031H2.57031V6.77881H4.57031V8.77881H10.5703V10.7788Z",fill:"white"})))}var le=u.forwardRef(ie),se=(n.p,[{type:"string",Badge:L},{type:"number",Badge:D},{type:"map",Badge:P},{type:"array",Badge:z},{type:"boolean",Badge:H},{type:"date",Badge:R},{type:"media",Badge:J},{type:"rich-text",Badge:q},{type:"json",Badge:K},{type:"enum",Badge:Q},{type:"password",Badge:ee},{type:"relation",Badge:re},{type:"collection",Badge:function(){return Object(S.jsx)("div",{className:"flex-shrink-0 flex w-42px rounded h-28px bg-blue-300 text-white text-center leading-28px text-xs font-medium",children:Object(S.jsx)(le,{className:"m-auto"})})}}]),oe=n(727),de=n(749),ue=n(750),be=n(735),je=n(751),xe=n.n(je),fe=n(728),me=n(725),pe=function(e){var t=e.proceed,n=b.a.useState("string"),r=Object(s.a)(n,2),a=r[0],c=r[1];return Object(S.jsx)("div",{className:"fixed left-0 top-0 w-full h-full flex overflow-auto bg-black bg-opacity-40",children:Object(S.jsxs)("div",{className:"m-auto rounded bg-white p-9 max-w-600px w-full",children:[Object(S.jsx)("div",{className:"text-22px font-medium mb-9",children:"Select field type"}),Object(S.jsx)("div",{className:"mb-12",children:Object(S.jsx)("div",{className:"flex flex-wrap",children:se.map((function(e,t){return Object(S.jsxs)("div",{onClick:function(){return c(e.type)},className:"flex md:w-1/3 sm:w-1/2 w-full select-none p-4 border-4 border-solid border-white items-center cursor-pointer rounded  ".concat(a===e.type?"border-orange-300":"hover:border-gray-300 hover:bg-gray-300"),children:[Object(S.jsx)(e.Badge,{}),Object(S.jsx)("span",{className:"capitalize ml-2 line-clamp-1",children:e.type.replace("-"," ")})]},"field-type-".concat(t))}))})}),Object(S.jsxs)("div",{className:"flex justify-between",children:[Object(S.jsx)(o.a,{onClick:function(){t(!1)},className:"bg-blue-300 hover:bg-blue-400 text-white",children:"Cancel"}),Object(S.jsx)(o.a,{onClick:function(){t(a)},className:"bg-orange-300 hover:bg-orange-301",children:"Submit"})]})]})})},Oe=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,r,c,l,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.editableField,r=t.existingFieldNames,!n){e.next=5;break}e.t0=n.type,e.next=8;break;case 5:return e.next=7,Object(me.a)({Component:pe,props:{}});case 7:e.t0=e.sent;case 8:if("boolean"!==typeof(c=e.t0)){e.next=11;break}return e.abrupt("return",null);case 11:return l=c,e.next=14,Object(me.a)({Component:ve,props:{fieldType:l,editableField:n,existingFieldNames:r}});case 14:if("boolean"!==typeof(s=e.sent)){e.next=17;break}return e.abrupt("return",null);case 17:return e.abrupt("return",Object(a.a)(Object(a.a)({},s),{},{type:c}));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),he=n(740),ve=function(e){var t,n=e.editableField,c=e.existingFieldNames,d=e.proceed,u=e.fieldType,j={id:"",mediaSingle:!1,enumOptions:[],relatedCollectionTypeDocId:"",relationOneToOne:!0,displayOnTable:!0,stringLong:!1,collectionFields:[]},f=Object(k.a)({onSubmit:function(e){d(e)},initialValues:n?Object(a.a)(Object(a.a)({},j),n):j,validate:function(e){var t={};return e.id?c&&c.findIndex((function(t){return t===e.id}))>-1&&(t.id="There is field with the same name"):t.id="Field name is required","enum"===u&&e.enumOptions.length<2&&(t.enumOptions="Enum requires at least two options"),"relation"===u&&""===e.relatedCollectionTypeDocId&&(t.relatedCollectionTypeDocId="Select related collection"),t}}),m=f.values,p=f.errors,h=f.handleChange,g=f.handleSubmit,y=f.setFieldValue,C=f.submitCount,E=b.a.useState(""),T=Object(s.a)(E,2),F=T[0],L=T[1],D=se.find((function(e){return e.type===u})),P=Object(x.d)((function(e){return e.collectionTypes})),z=function(){var e=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.destination){e.next=2;break}return e.abrupt("return");case 2:n=Fe(m.collectionFields,t.source.index,t.destination.index),y("collectionFields",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){if(F){var e=Object(r.a)(m.enumOptions);e.push(F),y("enumOptions",e),L("")}};return Object(S.jsx)("div",{className:"fixed left-0 top-0 w-full h-full flex overflow-auto bg-black bg-opacity-40",children:Object(S.jsxs)("div",{className:"m-auto rounded bg-white p-9 max-w-600px w-full",children:[Object(S.jsxs)("div",{className:"text-22px font-medium mb-9 flex items-center",children:[D?Object(S.jsx)(D.Badge,{}):null,Object(S.jsxs)("span",{className:"ml-3",children:[n?"Edit":"Add"," ",D?D.type:""," field"]})]}),Object(S.jsxs)("div",{className:"mb-9",children:[Object(S.jsx)("div",{className:"mb-2",children:"Field name"}),Object(S.jsx)(w.a,{error:C>0?p.id:"",value:m.id,name:"id",onChange:h,onKeyDown:function(e){"Enter"===e.key&&g()}})]}),"media"===u?Object(S.jsx)(I,{options:[{value:!1,label:"Multiple media"},{value:!0,label:"Single media"}],value:m.mediaSingle,setValue:function(e){return y("mediaSingle",e)}}):"enum"===u?Object(S.jsxs)("div",{className:"mb-10",children:[Object(S.jsx)("div",{className:"mb-2",children:"Options"}),Object(S.jsx)("div",{className:"flex flex-wrap",children:m.enumOptions.map((function(e,t){return Object(S.jsxs)("div",{className:"bg-gray-300 rounded flex items-center px-3 h-34px mr-3 mb-3",children:[Object(S.jsx)("div",{className:"mr-4",children:e}),Object(S.jsx)("div",{className:"cursor-pointer text-xs",onClick:function(){var e=Object(r.a)(m.enumOptions);e.splice(t,1),y("enumOptions",e)},children:"\u2715"})]},"enum-option-".concat(t))}))}),Object(S.jsxs)("div",{className:"flex",children:[Object(S.jsx)(w.a,{className:"mr-3",error:C>0?null===(t=p.enumOptions)||void 0===t?void 0:t.toString():"",type:"text",value:F,onChange:function(e){return L(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&B()}}),Object(S.jsx)(o.a,{onClick:B,className:"bg-orange-300 hover:bg-orange-301",children:"Add option"})]})]}):"relation"===u?Object(S.jsxs)("div",{className:"mb-10",children:[Object(S.jsxs)("div",{className:"mb-9",children:[Object(S.jsx)(be.a,{error:C>0?p.relatedCollectionTypeDocId:"",className:"mb-2",children:"Related collection"}),Object(S.jsx)(oe.a,{options:[{value:"",label:"Select"}].concat(Object(r.a)(P.map((function(e){return{label:e.id,value:e.docId}})))),value:m.relatedCollectionTypeDocId,onChange:function(e){return y("relatedCollectionTypeDocId",e.target.value)}})]}),Object(S.jsx)("div",{className:"mb-2",children:"Relation type"}),Object(S.jsx)(I,{value:m.relationOneToOne,setValue:function(e){return y("relationOneToOne",e)},options:[{value:!0,label:"One to one",icon:de.a},{value:!1,label:"One to many",icon:ue.a}]})]}):"string"===u?Object(S.jsx)(I,{value:m.stringLong,setValue:function(e){return y("stringLong",e)},options:[{label:"Short text",value:!1},{label:"Long text",value:!0}]}):"collection"===u?Object(S.jsxs)("div",{className:"mb-9",children:[Object(S.jsxs)("div",{className:"flex mb-2",children:[Object(S.jsx)("div",{className:"mr-2",children:"Fields"}),Object(S.jsx)(xe.a,{className:"cursor-pointer",onClick:Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe({existingFieldNames:m.collectionFields.map((function(e){return e.id}))});case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:n=[].concat(Object(r.a)(m.collectionFields),[t]),y("collectionFields",n);case 7:case"end":return e.stop()}}),e)})))})]}),Object(S.jsx)(he.a,{onDragEnd:z,children:Object(S.jsx)(he.c,{droppableId:"droppable-sub",children:function(e,t){return Object(S.jsxs)("div",Object(a.a)(Object(a.a)({className:" max-h-247px overflow-auto"},e.droppableProps),{},{ref:e.innerRef,children:[m.collectionFields.map((function(e,t){var n,c=null===(n=se.find((function(t){return t.type===e.type})))||void 0===n?void 0:n.Badge;return Object(S.jsx)(he.b,{draggableId:e.id+1,index:t,children:function(n,s){return Object(S.jsxs)("div",Object(a.a)(Object(a.a)(Object(a.a)({className:"rounded bg-gray-300 px-3 py-2 flex mb-2 items-center",ref:n.innerRef},n.draggableProps),n.dragHandleProps),{},{children:[Object(S.jsx)("div",{className:"line-clamp-1 w-5/12 px-3",children:e.id}),Object(S.jsxs)("div",{className:"flex w-4/12 flex-shrink-0",children:[c?Object(S.jsx)(c,{}):null,Object(S.jsx)("span",{className:"ml-3 hidden sm:block line-clamp-1",children:e.type})]}),Object(S.jsxs)("div",{className:"flex items-center flex-grow justify-end",children:[Object(S.jsx)(fe.a,{variant:"transparent",onClick:Object(l.a)(i.a.mark((function n(){var c,l;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Oe({editableField:e,existingFieldNames:m.collectionFields.map((function(e){return e.id})).filter((function(t){return t!==e.id}))});case 2:if(c=n.sent){n.next=5;break}return n.abrupt("return");case 5:(l=Object(r.a)(m.collectionFields))[t]=Object(a.a)(Object(a.a)({},e),c),y("collectionFields",l);case 8:case"end":return n.stop()}}),n)}))),children:Object(S.jsx)(O.a,{fontSize:"small"})}),Object(S.jsx)(fe.a,{variant:"transparent",onClick:Object(l.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.a)({confirmation:"Do you really want to delete the field?"});case 2:e.sent&&((n=Object(r.a)(m.collectionFields)).splice(t,1),y("collectionFields",n));case 4:case"end":return e.stop()}}),e)}))),children:Object(S.jsx)(v.a,{fontSize:"small"})})]})]}),"field-".concat(t))}},e.id)})),e.placeholder]}))}})})]}):null,Object(S.jsxs)("div",{className:"flex justify-between",children:[Object(S.jsx)(o.a,{onClick:function(){d(!1)},className:"bg-blue-300 hover:bg-blue-400 text-white",children:"Cancel"}),Object(S.jsx)(o.a,{type:"submit",onClick:function(){return g()},className:"bg-orange-300 hover:bg-orange-301",children:"Submit"})]})]})})},ge=n(752),we=n.n(ge),ye=n(762),Ne=n.n(ye),ke=function(e){return new Array(e).fill(0).reduce((function(e,t){return e+" "}),"")},Ce=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,a=function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.length?"{\n".concat(t.reduce((function(t,a){return t+"".concat(ke(n)).concat(a.id.includes(" ")?'"'.concat(a.id,'"'):a.id,": ").concat(e(a,n+r),";\n")}),"")).concat(ke(n-r)).concat(a?"}[]":"}"):a?"any[]":"null"},c={password:function(){return"string"},string:function(){return"string"},"rich-text":function(){return"string"},json:function(){return"object"},map:function(){return"object"},array:function(){return"any[]"},media:function(e){return e.mediaSingle?"string":"string[]"},date:function(){return"string"},enum:function(){return"string[]"},number:function(){return"number"},boolean:function(){return"boolean"},relation:function(e){return e.relationOneToOne?"string":"string[]"},collection:function(e){return a(e.collectionFields,!0)},document:function(e){return a(e.documentFields)},script:function(){return"object"},"script-V2":function(){return"object"}};return"".concat(c[t.type](t))},Se=function(e){var t={type:"document",documentFields:e.fields};return"interface Document ".concat(Ce(t,3))},Ie=function(e){var t=e.open,n=e.collectionType,r=e.onClose;return n?Object(S.jsx)(g.a,{open:t,hideBackdrop:!0,children:Object(S.jsx)("div",{className:"fixed left-0 top-0 w-full h-full overflow-auto flex bg-black bg-opacity-40",onClick:r,children:Object(S.jsxs)("div",{className:"bg-white p-7 m-auto rounded-md md:max-w-lg max-w-sm w-full",onClick:function(e){return e.stopPropagation()},children:[Object(S.jsxs)("div",{className:"mb-7 text-22px capitalize font-medium",children:[n.name," interface"]}),Object(S.jsx)("div",{className:"rounded bg-gray-300 p-7 overflow-auto",children:Object(S.jsx)("pre",{children:Se(n)})})]})})}):null},Ee=n(189),Te=n(729),Fe=function(e,t,n){var r=Array.from(e),a=r.splice(t,1),c=Object(s.a)(a,1)[0];return r.splice(n,0,c),r};t.default=function(){var e=b.a.useState(!1),t=Object(s.a)(e,2),n=t[0],c=t[1],u=Object(x.c)(),f=Object(y.b)(),p=b.a.useState(-1),h=Object(s.a)(p,2),g=h[0],w=h[1],k=b.a.useState(0),C=Object(s.a)(k,2),I=C[0],E=C[1],T=b.a.useState(),L=Object(s.a)(T,2),D=L[0],P=L[1],z=Object(x.d)((function(e){return{user:e.user,collections:e.collectionTypes.filter((function(e){return!["EmailTemplatesReservedCollection"].includes(e.id)}))}})),B=z.user,V=z.collections,H=function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(j.c)(B.token);case 3:(t=e.sent).error||(t.length!==V.length&&E(0),u({type:"SET_COLLECTION_TYPES",payload:t})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();b.a.useEffect((function(){H()}),[B,n]);var M=function(){var e=Object(l.a)(i.a.mark((function e(t,n){var r,c,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=V[I],e.next=3,Object(me.a)({Component:ve,props:{fieldType:t,editableField:r.fields[n]}});case 3:if("boolean"===typeof(c=e.sent)){e.next=13;break}return(l=JSON.parse(JSON.stringify(r.fields)))[n]=Object(a.a)({},c),u({type:"UPDATE_COLLECTION_FIELDS",payload:l,docId:r.docId}),e.next=10,Object(j.d)(r.docId,Object(a.a)(Object(a.a)({},r),{},{fields:l}));case 10:if(e.sent.error){e.next=13;break}return e.abrupt("return",{success:!0});case 13:return e.abrupt("return",{success:!1});case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),A=function(){var e=Object(l.a)(i.a.mark((function e(){var t,n,c,l,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=V[I],e.next=3,Object(me.a)({Component:pe,props:{}});case 3:if("boolean"===typeof(n=e.sent)){e.next=21;break}return c=n,e.next=8,Object(me.a)({Component:ve,props:{fieldType:c,existingFieldNames:t.fields.map((function(e){return e.id}))}});case 8:if("boolean"===typeof(l=e.sent)){e.next=21;break}return s=[].concat(Object(r.a)(t.fields),[Object(a.a)({type:c},l)]),u({type:"UPDATE_COLLECTION_FIELDS",payload:s,docId:t.docId}),e.next=14,Object(j.d)(t.docId,Object(a.a)(Object(a.a)({},t),{},{fields:s}));case 14:if(e.sent.error){e.next=20;break}return f("Field added!",{variant:"success"}),e.abrupt("return",{success:!0});case 20:f("Field was not added",{variant:"error"});case 21:return e.abrupt("return",{success:!1});case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.destination){e.next=2;break}return e.abrupt("return");case 2:n=Fe(V[I].fields,t.source.index,t.destination.index),r=V[I],u({type:"UPDATE_COLLECTION_FIELDS",payload:n,docId:r.docId}),Object(j.d)(r.docId,Object(a.a)(Object(a.a)({},r),{},{fields:n}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"flex flex-wrap justify-between mb-6",children:[Object(S.jsx)("div",{className:"font-medium text-36px leading-none mb-4 mr-4",children:"Collections"}),Object(S.jsx)(o.a,{onClick:function(){return c(!0)},className:"bg-orange-300 hover:bg-orange-301 mb-4",children:Object(S.jsxs)("div",{className:"flex items-center",children:[Object(S.jsx)(d.a,{className:"mr-3",size:18}),Object(S.jsx)("span",{children:"Add collection"})]})})]}),V.length?Object(S.jsxs)("div",{className:"flex flex-wrap lg:flex-nowrap",children:[Object(S.jsx)("div",{className:"max-w-192px mb-3 mr-4 block lg:hidden w-full",children:Object(S.jsx)(oe.a,{onChange:function(e){return E(parseInt(e.target.value))},value:I,options:V.map((function(e,t){return{label:e.name,value:t}}))})}),Object(S.jsx)(Ee.a,{className:"min-w-192px flex-shrink-0 mr-4 hidden lg:block max-h-96 scrollbar-dark pr-3",autoHide:!1,children:V.map((function(e,t){return Object(S.jsx)("div",{onClick:function(){return E(t)},className:"mb-1 capitalize truncate cursor-pointer ".concat(I===t?"bg-orange-300":"hover:bg-gray-300"," rounded h-34px leading-34px px-3"),children:e.name},"collection-".concat(t))}))}),Object(S.jsxs)("div",{className:"lg:flex-grow w-full rounded-lg bg-gray-300 p-7",children:[Object(S.jsxs)("div",{className:"flex justify-between mb-3 flex-wrap",children:[Object(S.jsxs)("div",{className:"font-medium text-22px capitalize mb-3 mr-3",children:[I<V.length?V[I].name:"",Object(S.jsx)(m.a,{onClick:function(){w(I),c(!0)},className:"ml-3 text-lg cursor-pointer",fontSize:"inherit"})]}),Object(S.jsxs)("div",{className:"flex flex-wrap",children:[Object(S.jsx)(o.a,{onClick:function(){return P(V[I])},noMinWidth:!0,className:"bg-blue-300 hover:bg-blue-400 text-white mr-3 mb-3",children:Object(S.jsxs)("div",{className:"flex items-center",children:[Object(S.jsx)(Ne.a,{className:"mr-3"}),"Interface"]})}),Object(S.jsx)(o.a,{onClick:Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A();case 1:case"end":return e.stop()}}),e)}))),className:" bg-blue-300 hover:bg-blue-400 text-white mb-3",children:Object(S.jsxs)("div",{className:"flex items-center",children:[Object(S.jsx)(d.a,{className:"mr-3",size:18}),Object(S.jsx)("span",{children:"Add new field"})]})})]})]}),Object(S.jsx)("div",{className:"-mr-4",children:Object(S.jsx)(he.a,{onDragEnd:R,children:Object(S.jsx)(he.c,{droppableId:"droppable",children:function(e,t){return Object(S.jsx)(Ee.a,{className:"overflow-auto w-full sm:max-h-30vw max-h-96 scrollbar-dark pr-4",autoHide:!1,children:Object(S.jsxs)("div",Object(a.a)(Object(a.a)({className:"min-w-430px"},e.droppableProps),{},{ref:e.innerRef,children:[I<V.length?V[I].fields.map((function(e,t){var n,r=null===(n=se.find((function(t){return t.type===e.type})))||void 0===n?void 0:n.Badge;return Object(S.jsx)(he.b,{draggableId:e.id,index:t,children:function(n,c){return Object(S.jsxs)("div",Object(a.a)(Object(a.a)(Object(a.a)({className:"rounded bg-white px-3 py-2 flex mb-2 items-center",ref:n.innerRef},n.draggableProps),n.dragHandleProps),{},{children:[Object(S.jsx)(we.a,{className:"text-gray-400"}),Object(S.jsx)("div",{className:"line-clamp-1 w-5/12 px-3",children:e.id}),Object(S.jsxs)("div",{className:"flex w-4/12 flex-shrink-0",children:[r?Object(S.jsx)(r,{}):null,Object(S.jsx)("span",{className:"ml-3 hidden sm:block line-clamp-1",children:e.type})]}),e.isDefault?null:Object(S.jsxs)("div",{className:"flex items-center flex-grow justify-end",children:[Object(S.jsx)(fe.a,{variant:"transparent",onClick:function(){M(e.type,t)},children:Object(S.jsx)(O.a,{fontSize:"small"})}),Object(S.jsx)(fe.a,{variant:"transparent",onClick:Object(l.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.a)({confirmation:"Do you really want to delete the field?"});case 2:e.sent&&((n=JSON.parse(JSON.stringify(V[I]))).fields.splice(t,1),u({type:"UPDATE_COLLECTION_FIELDS",payload:n.fields,docId:n.docId}),Object(j.d)(V[I].docId,n));case 4:case"end":return e.stop()}}),e)}))),children:Object(S.jsx)(v.a,{fontSize:"small"})})]})]}),"field-".concat(t))}},e.id)})):null,e.placeholder]}))})}})})})]})]}):Object(S.jsx)(Te.a,{buttonTitle:"Create",title:"There are no collections",onCreate:function(){return c(!0)}}),Object(S.jsx)(F,{editingCollectionIndex:g,collections:V,open:n,onClose:function(){c(!1),w(-1)}}),Object(S.jsx)(Ie,{onClose:function(){return P(void 0)},open:!!D,collectionType:D})]})}}}]);
//# sourceMappingURL=12.aa77ac4d.chunk.js.map