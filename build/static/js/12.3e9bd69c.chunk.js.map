{"version":3,"sources":["api/callComponent.tsx","components/Select.tsx","components/Label.tsx","components/TableElements/CreateIndex.tsx","hooks/useFetch.ts","components/TableElements/CollectionTable.tsx","components/TableElements/AddFilter.tsx","components/TooltipChild.tsx","components/TableElements/FilesCell/MediaField.tsx","components/TableElements/FilesCell/index.tsx","../node_modules/@material-ui/icons/EditRounded.js","components/SettingsPage.tsx","pages/Webhooks/WebhookModal.tsx","pages/Webhooks/index.tsx"],"names":["callComponent","Component","props","Promise","resolve","reject","wrapper","document","getElementById","appendChild","createElement","ReactDOM","render","store","proceed","val","unmountComponentAtNode","parentNode","removeChild","WarningIcon","React","forwardRef","ref","className","size","Select","options","error","groundColor","classNames","spellCheck","map","x","i","data-testid","value","label","title","placement","fontSize","Label","children","CreateIndexModal","url","onMouseDown","e","stopPropagation","Button","onClick","window","open","useFetch","collectionId","filters","orderBy","inView","useState","docs","setDocs","inViewRef","useRef","endReached","filterSortTriggered","notify","useNotify","loading","setLoading","abortController","AbortController","filterSortCounter","setFilterSortCounter","getOptions","useCallback","data","forEach","f","where","fieldId","operator","direction","length","startAfter","populateRef","onError","message","includes","split","variant","useEffect","current","a","triggeredBySortFilter","getCollection","signal","newData","prev","limit","fetcher","abort","Table","collectionType","onPick","blackList","singleSelect","valueFormatters","_filters","_onEdit","onEdit","hideFilters","history","useHistory","setFilters","fields","filter","field","displayOnTable","selected","setSelected","setOrderBy","endIsInView","setEndIsInView","id","onDeleteSelected","confirm","confirmation","deleteDocument","docId","doc","push","onOrder","undefined","selectHandler","checked","arr","index","findIndex","splice","formatValue","type","moment","format","toString","substring","AddFilter","onValue","disabled","autoHide","Checkbox","classes","root","onChange","select","target","j","mediaSingle","FilesCell","file","files","AddFilterModal","setOpen","useFormik","onSubmit","vals","resetForm","initialValues","validate","errors","Object","keys","values","handleChange","submitCount","handleSubmit","isSubmitting","style","maxWidth","name","placeholder","TooltipChild","MediaField","src","Tooltip","arrow","alt","tooltip","backgroundImage","Files","Math","random","slice","_interopRequireDefault","require","_interopRequireWildcard","defineProperty","exports","default","_default","d","SettingsPage","memo","entity","enitityPlural","onAddEntity","entities","onSelectEntity","entityButtons","onInvokeEntityEdit","entityContent","selectedEntityId","search","setSearch","width","maxHeight","toLowerCase","find","events","methods","WebhookModal","initialValue","onClose","collectionTypeDocId","enableReinitialize","event","method","Modal","Input","COLLECTION_ID","Webhooks","collectionTypes","useSelector","state","webhookColType","modalOpen","setModalOpen","editWebhook","setEditWebhook","tableRefreshCounter","setTableRefreshCounter","setCollectionTypeDocId","colType","updateDocument","addDocument","CollectionTable"],"mappings":"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","file":"static/js/12.3e9bd69c.chunk.js","sourcesContent":["import ReactDOM from \"react-dom\";\r\nimport React from \"react\";\r\nimport { Provider } from \"react-redux\";\r\nimport store from \"store\";\r\nimport NotificationsProvider from \"components/NotificationsProvider\";\r\n\r\nexport interface CallableComponent<T> {\r\n  proceed: (v: T) => void;\r\n}\r\n\r\ninterface callComponentArgs<T> {\r\n  Component: React.FC<any>;\r\n  props: Omit<T, \"proceed\">;\r\n}\r\n\r\nexport function callComponent<T, RT>({ Component, props }: callComponentArgs<T>): Promise<RT> {\r\n  return new Promise((resolve, reject) => {\r\n    const wrapper = document.getElementById(\"root\")?.appendChild(document.createElement(\"div\"));\r\n\r\n    if (wrapper) {\r\n      ReactDOM.render(\r\n        <Provider store={store}>\r\n          <NotificationsProvider>\r\n            <Component\r\n              {...props}\r\n              proceed={(val: RT) => {\r\n                ReactDOM.unmountComponentAtNode(wrapper);\r\n                wrapper.parentNode?.removeChild(wrapper);\r\n                resolve(val);\r\n              }}\r\n            />\r\n          </NotificationsProvider>\r\n        </Provider>,\r\n        wrapper\r\n      );\r\n    }\r\n  });\r\n}\r\n","import { IoAlertCircleOutline } from \"react-icons/io5\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport React, { SelectHTMLAttributes } from \"react\";\r\nimport classNames from \"classnames\";\r\n\r\nconst WarningIcon = React.forwardRef(function MyComponent(props: any, ref: any) {\r\n  return (\r\n    <div {...props} ref={ref}>\r\n      <IoAlertCircleOutline className=\"text-red-FF0000\" size={20}></IoAlertCircleOutline>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport interface SelectProps extends SelectHTMLAttributes<HTMLSelectElement> {\r\n  className?: string;\r\n  options: { label: string; value: string | number }[];\r\n  error?: string | boolean;\r\n  groundColor: \"white\" | \"black\";\r\n}\r\n\r\nconst Select: React.FC<SelectProps> = ({\r\n  className = \"\",\r\n  options,\r\n  error,\r\n  groundColor,\r\n  ...props\r\n}) => {\r\n  return (\r\n    <div className={`${className} relative flex items-center`}>\r\n      <select\r\n        className={classNames(\"px-3 h-full border-2 border-solid w-full rounded outline-none\", {\r\n          \"border-red-FF0000\": error,\r\n          \"focus:border-fireck-4\": !error,\r\n          \"border-gray-300 bg-gray-300\": groundColor === \"white\",\r\n          \"border-white bg-white\": groundColor === \"black\",\r\n        })}\r\n        {...props}\r\n        spellCheck={false}\r\n      >\r\n        {options.map((x, i) => (\r\n          <option data-testid={`select-option-${x.value}`} key={\"opt-\" + i} value={x.value}>\r\n            {x.label}\r\n          </option>\r\n        ))}\r\n      </select>\r\n      {error ? (\r\n        <Tooltip title={error} placement=\"top\">\r\n          <WarningIcon className=\"absolute right-2 my-auto w-auto\"></WarningIcon>\r\n        </Tooltip>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Select;\r\n","import React from \"react\";\r\nimport ErrorRounded from \"@material-ui/icons/ErrorRounded\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport classNames from \"classnames\";\r\n\r\nexport interface LabelProps {\r\n  error?: string | undefined | null;\r\n  className?: string;\r\n  children: any;\r\n  groundColor: \"black\" | \"white\";\r\n}\r\n\r\nconst WarningIcon = React.forwardRef(function MyComponent(props: any, ref: any) {\r\n  return (\r\n    <div {...props} ref={ref}>\r\n      <ErrorRounded className=\"text-red-500 text-xl\" fontSize=\"inherit\"></ErrorRounded>\r\n    </div>\r\n  );\r\n});\r\n\r\nconst Label: React.FC<LabelProps> = ({ className = \"\", children, error, groundColor }) => {\r\n  return (\r\n    <div\r\n      className={classNames(`flex justify-between relative ${className}`, {\r\n        \"text-white\": groundColor === \"black\",\r\n        \"text-black\": groundColor === \"white\",\r\n      })}\r\n    >\r\n      <div>{children}</div>\r\n      {error ? (\r\n        <Tooltip title={error} placement=\"top\">\r\n          <WarningIcon className=\"absolute right-2 my-auto w-auto\"></WarningIcon>\r\n        </Tooltip>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Label;\r\n","import { callComponent } from \"api/callComponent\";\r\nimport Button from \"components/Button\";\r\n\r\nexport interface CreateIndexModalProps {\r\n  proceed: Function;\r\n  url: string;\r\n}\r\n\r\nconst CreateIndexModal: React.FC<CreateIndexModalProps> = ({ proceed, url }) => {\r\n  return (\r\n    <div\r\n      className=\"fixed left-0 top-0 w-full h-full flex bg-black bg-opacity-40\"\r\n      onMouseDown={() => proceed(false)}\r\n    >\r\n      <div onMouseDown={(e) => e.stopPropagation()} className=\"bg-white rounded p-7  m-auto\">\r\n        <div className=\"mb-12\">This query requires creating an index.</div>\r\n        <div className=\"flex justify-between\">\r\n          <Button\r\n            className=\"bg-fireck-5 hover:bg-fireck-5-hover min-w-unset text-white h-28px\"\r\n            onClick={() => proceed(false)}\r\n          >\r\n            Later\r\n          </Button>\r\n          <Button\r\n            className=\"bg-fireck-4 hover:bg-fireck-4-hover min-w-unset h-28px\"\r\n            onClick={() => {\r\n              window.open(url, \"_blank\");\r\n              proceed(false);\r\n            }}\r\n          >\r\n            Create\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateIndexModal;\r\n\r\nexport const createIndex = (url: string) => {\r\n  callComponent<CreateIndexModalProps, boolean>({ Component: CreateIndexModal, props: { url } });\r\n};\r\n","import { Document, getCollection, GetCollectionOptions } from \"api/collections\";\r\nimport { useNotify } from \"components/NotificationsProvider\";\r\nimport { FilterType } from \"components/TableElements/CollectionTable\";\r\nimport { createIndex } from \"components/TableElements/CreateIndex\";\r\nimport { useEffect, useRef, useState, useCallback } from \"react\";\r\n\r\ninterface UseFetchProps {\r\n  collectionId: string;\r\n  filters?: FilterType[];\r\n  orderBy?: { fieldId: string; direction: \"asc\" | \"desc\" };\r\n  inView: boolean;\r\n}\r\n\r\nconst useFetch = ({ collectionId, filters = [], orderBy, inView }: UseFetchProps) => {\r\n  const [docs, setDocs] = useState<Document[]>([]);\r\n  const inViewRef = useRef(false);\r\n  const endReached = useRef(false);\r\n  const filterSortTriggered = useRef(false);\r\n  const notify = useNotify();\r\n  const [loading, setLoading] = useState(false);\r\n  const abortController = useRef(new AbortController());\r\n  const [filterSortCounter, setFilterSortCounter] = useState(0);\r\n\r\n  const getOptions = useCallback(\r\n    (data: Document[]) => {\r\n      let options: GetCollectionOptions = { collectionId };\r\n\r\n      options.where = \"\";\r\n      options.orderBy = \"\";\r\n\r\n      filters.forEach((f, i) => {\r\n        options.where += (i > 0 ? \";\" : \"\") + f.fieldId + \",\" + f.operator + \",\" + f.value;\r\n        if (orderBy && orderBy.fieldId !== f.fieldId) {\r\n          options.orderBy += (options.orderBy ? \";\" : \"\") + f.fieldId;\r\n        }\r\n      });\r\n\r\n      if (orderBy) {\r\n        options.orderBy += (options.orderBy ? \";\" : \"\") + `${orderBy.fieldId},${orderBy.direction}`;\r\n      }\r\n      if (!orderBy && !filters.length) {\r\n        options.orderBy = \"createdAt,asc\";\r\n      }\r\n\r\n      if (data.length) {\r\n        options.startAfter = data[data.length - 1][orderBy ? orderBy.fieldId : \"createdAt\"];\r\n      }\r\n      options.populateRef = false;\r\n\r\n      return options;\r\n    },\r\n    [orderBy, filters, collectionId]\r\n  );\r\n\r\n  const onError = (message: string) => {\r\n    if (message.includes(\"FAILED_PRECONDITION\")) {\r\n      createIndex(message.split(\"it here:\")[1]);\r\n    } else {\r\n      notify(message, { variant: \"error\" });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    inViewRef.current = inView;\r\n    const fetcher = async () => {\r\n      if ((!endReached.current && inViewRef.current) || filterSortTriggered.current) {\r\n        let triggeredBySortFilter = filterSortTriggered.current;\r\n        filterSortTriggered.current = false;\r\n\r\n        let options = getOptions(triggeredBySortFilter ? [] : docs);\r\n        setLoading(true);\r\n\r\n        const newData = await getCollection(options, abortController.current.signal);\r\n\r\n        if (newData.error) {\r\n          if (newData.error !== \"aborted\") {\r\n            onError(newData.error);\r\n          }\r\n        } else {\r\n          setDocs((prev) => (triggeredBySortFilter ? newData : [...prev, ...newData]));\r\n          if (newData.length < (options.limit || 10)) {\r\n            endReached.current = true;\r\n          }\r\n        }\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetcher();\r\n\r\n    return () => {\r\n      abortController.current.abort();\r\n      abortController.current = new AbortController();\r\n    };\r\n  }, [inView, docs, filterSortCounter]);\r\n\r\n  useEffect(() => {\r\n    filterSortTriggered.current = true;\r\n    endReached.current = false;\r\n    setFilterSortCounter((prev) => prev + 1);\r\n  }, [filters, orderBy]);\r\n\r\n  return { docs, setDocs, loading };\r\n};\r\n\r\nexport default useFetch;\r\n","import { Document } from \"api/collections\";\r\nimport { CollectionType, FieldType } from \"api/collectionTypes\";\r\nimport { deleteDocument } from \"api/collections\";\r\nimport FilesCell from \"./FilesCell\";\r\nimport React, { useEffect } from \"react\";\r\nimport ExpandMoreRounded from \"@material-ui/icons/ExpandMoreRounded\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { confirm } from \"components/Confirm\";\r\nimport AddFilter from \"./AddFilter\";\r\nimport Button from \"components/Button\";\r\nimport SimpleBar from \"simplebar-react\";\r\nimport classNames from \"classnames\";\r\nimport useFetch from \"hooks/useFetch\";\r\nimport { InView } from \"react-intersection-observer\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport moment from \"moment\";\r\n\r\nexport interface TableProps {\r\n  collectionType: CollectionType;\r\n  onPick?: (a: Document[]) => void;\r\n  blackList?: string[];\r\n  singleSelect?: boolean;\r\n  valueFormatters?: { [key: string]: (val: any) => any };\r\n  groundColor: \"white\" | \"black\";\r\n  filters?: FilterType[];\r\n  onEdit?: (doc: Document) => void;\r\n  hideFilters?: boolean;\r\n}\r\n\r\nexport type FilterType = { fieldId: string; operator: string; value: string };\r\n\r\nconst Table: React.FC<TableProps> = ({\r\n  collectionType,\r\n  onPick,\r\n  blackList = [],\r\n  singleSelect = false,\r\n  valueFormatters,\r\n  groundColor,\r\n  filters: _filters = [],\r\n  onEdit: _onEdit,\r\n  hideFilters = false,\r\n}) => {\r\n  const history = useHistory();\r\n\r\n  const [filters, setFilters] = React.useState<FilterType[]>([]);\r\n  const fields = collectionType.fields.filter((field) => field.displayOnTable);\r\n  const [selected, setSelected] = React.useState<string[]>([]);\r\n  const [orderBy, setOrderBy] = React.useState<{ fieldId: string; direction: \"asc\" | \"desc\" }>();\r\n  const [endIsInView, setEndIsInView] = React.useState(false);\r\n\r\n  const { docs, setDocs } = useFetch({\r\n    collectionId: collectionType.id,\r\n    filters,\r\n    orderBy,\r\n    inView: endIsInView,\r\n  });\r\n\r\n  const onDeleteSelected = async () => {\r\n    if (await confirm({ confirmation: `Delete ${selected.length} documents?` })) {\r\n      selected.forEach((x) => {\r\n        deleteDocument(collectionType.id, x);\r\n      });\r\n      setDocs((prev) => prev.filter((x) => !selected.includes(x.docId)));\r\n      setSelected([]);\r\n    }\r\n  };\r\n\r\n  const onEdit =\r\n    _onEdit ||\r\n    ((doc: Document) => {\r\n      history.push(`/collections/${collectionType.id}/edit/${doc.docId}`);\r\n    });\r\n\r\n  const onOrder = (field: FieldType) =>\r\n    orderBy?.fieldId !== field.id\r\n      ? () => {\r\n          setOrderBy({ fieldId: field.id, direction: \"asc\" });\r\n        }\r\n      : orderBy?.direction !== \"asc\"\r\n      ? () => setOrderBy(undefined)\r\n      : () => setOrderBy({ fieldId: field.id, direction: \"desc\" });\r\n\r\n  const selectAll = (select: boolean) => setSelected(select ? docs.map((x) => x.docId) : []);\r\n\r\n  const selectHandler = (docId: string, checked: boolean) => {\r\n    if (checked) {\r\n      if (singleSelect) {\r\n        setSelected([docId]);\r\n      } else {\r\n        setSelected((prev) => [...prev, docId]);\r\n      }\r\n\r\n      return;\r\n    }\r\n    setSelected((prev) => {\r\n      let arr = [...prev];\r\n      let index = arr.findIndex((x) => x === docId);\r\n      if (index != null) {\r\n        arr.splice(index, 1);\r\n      }\r\n      return arr;\r\n    });\r\n  };\r\n\r\n  const formatValue = (field: FieldType, value: any) => {\r\n    return field.type === \"date\"\r\n      ? moment(value).format(\"YYYY-MM-DD HH:mm\")\r\n      : valueFormatters && field.id in valueFormatters\r\n      ? valueFormatters[field.id](value)\r\n      : value.toString().substring(0, 40);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (_filters.length) {\r\n      setFilters((prev) => [...prev, ..._filters]);\r\n    }\r\n  }, [_filters]);\r\n\r\n  return (\r\n    <div className=\"h-full w-full flex-col flex\">\r\n      <div className=\"flex justify-between mb-3\">\r\n        {hideFilters ? null : (\r\n          <div className=\"flex flex-wrap\">\r\n            <AddFilter\r\n              collectionType={collectionType}\r\n              onValue={(val: FilterType) => setFilters((prev) => [val, ...prev])}\r\n            ></AddFilter>\r\n            {filters.map((f, i) => (\r\n              <div\r\n                key={`f-${i}`}\r\n                className={classNames(\r\n                  \"rounded min-h-28px border leading-28px pl-3 text-sm pr-3 flex mr-3 mb-3 relative\",\r\n                  { \"text-white border-white\": groundColor === \"black\" },\r\n                  { \"text-black border-black\": groundColor === \"white\" }\r\n                )}\r\n              >\r\n                {f.fieldId} {f.operator} {f.value}{\" \"}\r\n                <span\r\n                  onClick={() =>\r\n                    setFilters((prev) => {\r\n                      let arr = [...prev];\r\n                      arr.splice(i, 1);\r\n                      return arr;\r\n                    })\r\n                  }\r\n                  className=\"text-xs leading-28px ml-3 cursor-pointer\"\r\n                >\r\n                  ✕\r\n                </span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n        {!onPick ? (\r\n          <Button\r\n            onClick={onDeleteSelected}\r\n            disabled={selected.length === 0}\r\n            className={`px-7 mb-3 min-w-unset h-28px ${\r\n              selected.length === 0\r\n                ? \"bg-gray-E1E1E1 text-gray-6C6C6C cursor-default\"\r\n                : \"bg-red-FF0000 hover:bg-red-FF0000-hover text-white\"\r\n            } `}\r\n          >\r\n            Delete\r\n          </Button>\r\n        ) : (\r\n          <Button\r\n            onClick={() => onPick(docs.filter((x) => selected.includes(x.docId)))}\r\n            className={`h-28px min-w-unset mb-3 px-7 ${\r\n              selected.length === 0\r\n                ? \"bg-gray-300 text-gray-500 cursor-default\"\r\n                : \"bg-fireck-4 hover:bg-fireck-4-hover\"\r\n            } `}\r\n          >\r\n            Select\r\n          </Button>\r\n        )}\r\n      </div>\r\n      <div\r\n        className={classNames(\"flex-grow h-0 -mt-3 rounded overflow-hidden bg-white\", {\r\n          \"shadow-border-gray\": groundColor === \"white\",\r\n        })}\r\n      >\r\n        <SimpleBar className={\"relative scrollbar-light h-full\"} autoHide={false}>\r\n          <table className=\"w-full text-center\">\r\n            <thead>\r\n              <tr className=\"whitespace-nowrap\">\r\n                <th className=\"sticky top-0 bg-gray-E1E1E1 z-10 px-1\">\r\n                  {singleSelect ? null : (\r\n                    <Checkbox\r\n                      size=\"small\"\r\n                      classes={{ checked: \"text-fireck-1\", root: \"p-0\" }}\r\n                      checked={selected.length === docs.length}\r\n                      onChange={(e) => selectAll(e.target.checked)}\r\n                    ></Checkbox>\r\n                  )}\r\n                </th>\r\n                {fields.map((field, i) => (\r\n                  <th className=\"font-semibold sticky top-0 bg-gray-E1E1E1\" key={`th-${i}`}>\r\n                    <div className=\"flex items-center justify-center\">\r\n                      <div className=\"w-5\"></div>\r\n                      <div className=\"cursor-pointer select-none\" onClick={onOrder(field)}>\r\n                        {field.id}\r\n                      </div>\r\n                      <div className=\"w-5\">\r\n                        {orderBy?.fieldId === field.id ? (\r\n                          <ExpandMoreRounded\r\n                            fontSize=\"small\"\r\n                            className={`${\r\n                              orderBy?.direction === \"asc\" ? \"transform rotate-180\" : \"\"\r\n                            }`}\r\n                          ></ExpandMoreRounded>\r\n                        ) : null}\r\n                      </div>\r\n                    </div>\r\n                  </th>\r\n                ))}\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {docs.map((doc, i) =>\r\n                blackList.includes(doc.docId) ? null : (\r\n                  <tr\r\n                    onClick={() =>\r\n                      onPick ? selectHandler(doc.docId, !selected.includes(doc.docId)) : onEdit(doc)\r\n                    }\r\n                    key={`row-${i}`}\r\n                    className={\"cursor-pointer hover:bg-fireck-4\"}\r\n                  >\r\n                    <td className=\"px-1\" onClick={(e) => e.stopPropagation()}>\r\n                      <Checkbox\r\n                        size=\"small\"\r\n                        classes={{ checked: \"text-fireck-1\", root: \"p-0\" }}\r\n                        checked={selected.includes(doc.docId)}\r\n                        onChange={(e) => selectHandler(doc.docId, e.target.checked)}\r\n                      ></Checkbox>\r\n                    </td>\r\n                    {fields.map((field, j) => (\r\n                      <td key={`row-${i}-col-${j}`} className=\"px-2\">\r\n                        {doc[field.id] != null ? (\r\n                          field.type === \"media\" ? (\r\n                            field.mediaSingle ? (\r\n                              <FilesCell file={doc[field.id]}></FilesCell>\r\n                            ) : (\r\n                              <FilesCell files={doc[field.id]} />\r\n                            )\r\n                          ) : (\r\n                            <div className=\"whitespace-nowrap\">\r\n                              {formatValue(field, doc[field.id])}\r\n                            </div>\r\n                          )\r\n                        ) : null}\r\n                      </td>\r\n                    ))}\r\n                  </tr>\r\n                )\r\n              )}\r\n            </tbody>\r\n          </table>\r\n          <InView\r\n            onChange={async (inView) => {\r\n              setEndIsInView(inView);\r\n            }}\r\n          >\r\n            <div className=\"w-full\"></div>\r\n          </InView>\r\n          <div></div>\r\n        </SimpleBar>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Table;\r\n","import Modal from \"@material-ui/core/Modal\";\r\nimport Input from \"components/Input\";\r\nimport Select from \"components/Select\";\r\nimport Button from \"components/Button\";\r\nimport { CollectionType } from \"api/collectionTypes\";\r\nimport React from \"react\";\r\nimport { useFormik } from \"formik\";\r\nimport Label from \"components/Label\";\r\nimport CloseRounded from \"@material-ui/icons/CloseRounded\";\r\n\r\nexport interface AddFilterModalProps {\r\n  collectionType: Pick<CollectionType, \"fields\">;\r\n  onValue: Function;\r\n  groundColor?: \"black\" | \"white\";\r\n}\r\n\r\nconst AddFilterModal: React.FC<AddFilterModalProps> = ({\r\n  collectionType,\r\n  onValue,\r\n  groundColor = \"white\",\r\n}) => {\r\n  const operators = [\r\n    \"<\",\r\n    \"<=\",\r\n    \"==\",\r\n    \">\",\r\n    \">=\",\r\n    \"!=\",\r\n    \"array-contains\",\r\n    \"array-contains-any\",\r\n    \"in\",\r\n    \"not-in\",\r\n  ];\r\n\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const { values, errors, handleChange, submitCount, handleSubmit, isSubmitting } = useFormik({\r\n    onSubmit: async (vals, { resetForm }) => {\r\n      onValue(vals);\r\n      setOpen(false);\r\n      resetForm();\r\n    },\r\n    initialValues: {\r\n      value: \"\",\r\n      operator: \"\",\r\n      fieldId: \"\",\r\n    },\r\n    validate: (vals: any) => {\r\n      let errors: any = {};\r\n      Object.keys(vals).forEach((x) => {\r\n        if (!vals[x]) {\r\n          errors[x] = \"Required\";\r\n        }\r\n      });\r\n      return errors;\r\n    },\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        onClick={() => setOpen(true)}\r\n        className=\"bg-fireck-4 hover:bg-fireck-4-hover min-w-unset flex items-center justify-center h-28px px-7 rounded text-sm mr-3 mb-3\"\r\n      >\r\n        Filters\r\n      </Button>\r\n      {!open ? null : (\r\n        <Modal open={open}>\r\n          <div\r\n            className=\"fixed left-0 top-0 w-full h-full flex p-7\"\r\n            onMouseDown={() => setOpen(false)}\r\n          >\r\n            <div\r\n              onMouseDown={(e) => e.stopPropagation()}\r\n              className=\"bg-white rounded p-7 m-auto relative animate-littlemoveup\"\r\n              style={{ maxWidth: 600 }}\r\n            >\r\n              <CloseRounded\r\n                className=\"absolute top-0 right-0 cursor-pointer\"\r\n                onClick={() => setOpen(false)}\r\n              ></CloseRounded>\r\n              <div className=\"flex flex-wrap -mx-2 mb-4\">\r\n                <div className=\"sm:w-1/3 w-full mb-3 px-2\">\r\n                  <Label\r\n                    groundColor={groundColor}\r\n                    className=\"mb-2\"\r\n                    error={submitCount > 0 ? errors.fieldId : null}\r\n                  >\r\n                    Field\r\n                  </Label>\r\n                  <Select\r\n                    className=\"h-34px\"\r\n                    groundColor=\"white\"\r\n                    name=\"fieldId\"\r\n                    onChange={handleChange}\r\n                    value={values.fieldId}\r\n                    options={[\r\n                      { value: \"\", label: \"Select\" },\r\n                      ...collectionType.fields.map((x) => ({ value: x.id, label: x.id })),\r\n                    ]}\r\n                  ></Select>\r\n                </div>\r\n                <div className=\"sm:w-1/3 w-full mb-3 px-2\">\r\n                  <Label\r\n                    groundColor={groundColor}\r\n                    className=\"mb-2\"\r\n                    error={submitCount > 0 ? errors.operator : null}\r\n                  >\r\n                    Operator\r\n                  </Label>\r\n                  <Select\r\n                    className=\"h-34px\"\r\n                    groundColor=\"white\"\r\n                    name=\"operator\"\r\n                    onChange={handleChange}\r\n                    value={values.operator}\r\n                    options={[\r\n                      { value: \"\", label: \"Select\" },\r\n                      ...operators.map((x) => ({ value: x, label: x })),\r\n                    ]}\r\n                  ></Select>\r\n                </div>\r\n                <div className=\"sm:w-1/3 w-full mb-3 px-2\">\r\n                  <Label\r\n                    groundColor={groundColor}\r\n                    className=\"mb-2 text-black\"\r\n                    error={submitCount > 0 ? errors.value : null}\r\n                  >\r\n                    Value\r\n                  </Label>\r\n                  <Input\r\n                    groundColor=\"white\"\r\n                    placeholder={\r\n                      [\"in\", \"not in\", \"array-contains-any\"].includes(values.operator)\r\n                        ? \"value, value, value\"\r\n                        : \"value\"\r\n                    }\r\n                    className=\"placeholder-black h-34px\"\r\n                    value={values.value}\r\n                    onChange={handleChange}\r\n                    name=\"value\"\r\n                  ></Input>\r\n                </div>\r\n              </div>\r\n              <div className=\"flex justify-end\">\r\n                <Button\r\n                  disabled={isSubmitting}\r\n                  onClick={() => handleSubmit()}\r\n                  className=\"bg-fireck-4 hover:bg-fireck-4-hover h-34px\"\r\n                >\r\n                  Add\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </Modal>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AddFilterModal;\r\n","import { forwardRef } from \"react\";\r\n\r\nconst TooltipChild = forwardRef(function MyComponent(props: any, ref: any) {\r\n  return <div {...props} ref={ref}></div>;\r\n});\r\n\r\nexport default TooltipChild;\r\n","import TooltipChild from \"components/TooltipChild\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\n\r\ninterface MediaFieldProps {\r\n  src: string;\r\n}\r\n\r\nconst MediaField: React.FC<MediaFieldProps> = ({ src }) => {\r\n  return (\r\n    <Tooltip\r\n      arrow\r\n      title={\r\n        <div className=\"p-1\">\r\n          <img src={src} className=\"max-w-136px max-h-136px w-auto h-auto\" alt=\"\" />\r\n        </div>\r\n      }\r\n      placement=\"top\"\r\n      classes={{\r\n        tooltip: \"font-poppins text-xs p-0 rounded bg-fireck-1\",\r\n        arrow: \"text-fireck-1\",\r\n      }}\r\n    >\r\n      <TooltipChild>\r\n        <div className=\"group w-4 h-4 relative flex items-center justify-center rounded hover:bg-gray-535371 hover:bg-opacity-5 cursor-pointer\">\r\n          <div\r\n            className=\"relative w-4 h-4 rounded-full bg-center bg-cover pointer-events-none\"\r\n            style={{ backgroundImage: `url(${src})` }}\r\n          ></div>\r\n        </div>\r\n      </TooltipChild>\r\n    </Tooltip>\r\n  );\r\n};\r\n\r\nexport default MediaField;\r\n","import React from \"react\";\r\nimport MediaField from \"./MediaField\";\r\n\r\nexport interface FilesProps {\r\n  files?: string[];\r\n  file?: string;\r\n}\r\n\r\nconst Files: React.FC<FilesProps> = ({ files, file }) => {\r\n  const id = React.useRef<number>(Math.random());\r\n\r\n  return (\r\n    <div className=\"flex justify-center\">\r\n      {(files ? files : file ? [file] : []).slice(0, 4).map((f, i) => (\r\n        <div key={`${id}-file-${i}`} className=\"mr-0.5\">\r\n          <MediaField src={f}></MediaField>\r\n        </div>\r\n      ))}\r\n      {files && files.length > 4 ? (\r\n        <div className=\"relative\">\r\n          <div className=\"w-4 h-4 rounded-full bg-fireck-4 text-10px flex items-center justify-center\">\r\n            {files.length - 4}+\r\n          </div>\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Files;\r\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M3 17.46v3.04c0 .28.22.5.5.5h3.04c.13 0 .26-.05.35-.15L17.81 9.94l-3.75-3.75L3.15 17.1c-.1.1-.15.22-.15.36zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\"\n}), 'EditRounded');\n\nexports.default = _default;","import Button from \"components/Button\";\r\nimport React, { ReactElement, useState } from \"react\";\r\nimport Edit from \"@material-ui/icons/EditRounded\";\r\nimport Select from \"components/Select\";\r\nimport SimpleBar from \"simplebar-react\";\r\nimport AddRounded from \"@material-ui/icons/AddRounded\";\r\nimport SearchRounded from \"@material-ui/icons/SearchRounded\";\r\n\r\nexport interface SettingsPageProps {\r\n  entity: string;\r\n  enitityPlural: string;\r\n  onAddEntity?: () => void;\r\n  entities: { name: string; docId: string }[];\r\n  onSelectEntity: (id: string) => void;\r\n  entityButtons: ReactElement;\r\n  onInvokeEntityEdit?: () => void;\r\n  entityContent: ReactElement;\r\n  selectedEntityId: string;\r\n}\r\n\r\nexport const reorder = (list: any[], startIndex: number, endIndex: number) => {\r\n  const result = Array.from(list);\r\n  const [removed] = result.splice(startIndex, 1);\r\n  result.splice(endIndex, 0, removed);\r\n\r\n  return result;\r\n};\r\n\r\nconst SettingsPage: React.FC<SettingsPageProps> = React.memo(\r\n  ({\r\n    entity,\r\n    enitityPlural,\r\n    onAddEntity,\r\n    entities,\r\n    onSelectEntity,\r\n    entityButtons,\r\n    onInvokeEntityEdit,\r\n    entityContent,\r\n    selectedEntityId,\r\n  }) => {\r\n    const [search, setSearch] = useState(\"\");\r\n\r\n    return (\r\n      <div className=\"h-full flex flex-col\">\r\n        <div className=\"flex flex-wrap justify-between mb-4\">\r\n          <div className=\"font-medium text-27px leading-none mb-4 mr-4 text-white capitalize\">\r\n            {enitityPlural}\r\n          </div>\r\n          {!onAddEntity ? null : (\r\n            <Button\r\n              data-testid=\"add-collection-btn\"\r\n              onClick={onAddEntity}\r\n              className=\"bg-fireck-4 hover:bg-fireck-4-hover mb-4 min-w-unset\"\r\n            >\r\n              <div className=\"flex items-center pointer-events-none h-34px\">\r\n                <AddRounded className=\"mr-2 text-lg\" fontSize=\"inherit\"></AddRounded>\r\n                <span className=\"hidden md:block\">Add {entity}</span>\r\n                <span className=\"md:hidden\">Add</span>\r\n              </div>\r\n            </Button>\r\n          )}\r\n        </div>\r\n        {!entities.length ? (\r\n          <div></div>\r\n        ) : (\r\n          <div className=\"flex flex-wrap lg:flex-nowrap w-full flex-grow\">\r\n            <div>\r\n              <div className=\"relative mr-4 hidden lg:block\" style={{ width: 180 }}>\r\n                <SearchRounded\r\n                  fontSize=\"inherit\"\r\n                  className=\"absolute text-base left-1 top-1 text-gray-500 pointer-events-none\"\r\n                ></SearchRounded>\r\n                <input\r\n                  type=\"search\"\r\n                  spellCheck={false}\r\n                  placeholder=\"Search\"\r\n                  className=\"text-white placeholder-gray-500 pl-7 hover:bg-fireck-2 focus:bg-fireck-2 w-full text-sm mb-3 px-2 border-white rounded bg-transparent outline-none focus:outline-none\"\r\n                  value={search}\r\n                  onChange={(e) => setSearch(e.target.value)}\r\n                ></input>\r\n              </div>\r\n              <SimpleBar\r\n                style={{ maxHeight: 230 }}\r\n                className=\"max-w-192px w-full flex-shrink-0 mr-4 hidden lg:block scrollbar-dark pr-3\"\r\n                autoHide={false}\r\n              >\r\n                {entities\r\n                  .filter((x) => !search || x.name.toLowerCase().includes(search.toLowerCase()))\r\n                  .map((x) => (\r\n                    <div\r\n                      data-testid={`entity-name-${x.name}`}\r\n                      onClick={() => {\r\n                        onSelectEntity(x.docId);\r\n                      }}\r\n                      key={`entity-${x.docId}`}\r\n                      className={`mb-1 capitalize truncate select-none cursor-pointer ${\r\n                        selectedEntityId === x.docId\r\n                          ? \"bg-fireck-4\"\r\n                          : \"hover:bg-fireck-1-hover text-white\"\r\n                      } rounded h-28px leading-28px px-3`}\r\n                    >\r\n                      {x.name}\r\n                    </div>\r\n                  ))}\r\n              </SimpleBar>\r\n            </div>\r\n\r\n            <div className=\"lg:flex-grow w-full rounded-lg bg-fireck-3 p-7 flex flex-col\">\r\n              <div className=\"flex justify-between mb-3 flex-wrap\">\r\n                <div className=\"font-medium text-22px capitalize mb-3 mr-3 text-white\">\r\n                  <span className=\"hidden lg:inline-block\">\r\n                    {entities.find((x) => x.docId === selectedEntityId)?.name || \"\"}\r\n                  </span>\r\n                  <div className=\"lg:hidden inline-block text-black text-base\">\r\n                    <Select\r\n                      className=\"h-28px\"\r\n                      groundColor=\"black\"\r\n                      onChange={(e) => onSelectEntity(e.target.value)}\r\n                      value={selectedEntityId}\r\n                      options={entities.map((x) => ({ label: x.name, value: x.docId }))}\r\n                    ></Select>\r\n                  </div>\r\n                  {!onInvokeEntityEdit ? null : (\r\n                    <Edit\r\n                      data-testid=\"edit-collection-btn\"\r\n                      onClick={onInvokeEntityEdit}\r\n                      className=\"ml-3 text-lg cursor-pointer\"\r\n                      fontSize=\"inherit\"\r\n                    ></Edit>\r\n                  )}\r\n                </div>\r\n                {entityButtons}\r\n              </div>\r\n\r\n              <div className=\"flex-grow h-0\">{entityContent}</div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n);\r\n\r\nexport default SettingsPage;\r\n","import Modal from \"@material-ui/core/Modal\";\r\nimport Input from \"components/Input\";\r\nimport Select from \"components/Select\";\r\nimport Button from \"components/Button\";\r\nimport { CollectionType, Webhook, WebhookDocument } from \"api/collectionTypes\";\r\nimport React from \"react\";\r\nimport { useFormik } from \"formik\";\r\nimport Label from \"components/Label\";\r\nimport CloseRounded from \"@material-ui/icons/CloseRounded\";\r\n\r\nexport interface WebhookModalProps {\r\n  onValue: (val: Partial<WebhookDocument>) => void;\r\n  initialValue?: WebhookDocument;\r\n  open: boolean;\r\n  onClose: () => void;\r\n  collectionTypeDocId: string;\r\n}\r\n\r\nconst events = [\"find\", \"find one\", \"create\", \"update\", \"delete\"];\r\nconst methods = [\"GET\", \"POST\", \"PUT\", \"PATCH\", \"DELETE\"];\r\n\r\nconst WebhookModal: React.FC<WebhookModalProps> = ({\r\n  onValue,\r\n  initialValue,\r\n  open,\r\n  onClose,\r\n  collectionTypeDocId,\r\n}) => {\r\n  const { values, errors, handleChange, submitCount, handleSubmit, isSubmitting } = useFormik({\r\n    onSubmit: async (vals, { resetForm }) => {\r\n      onValue(vals);\r\n      onClose();\r\n      resetForm();\r\n    },\r\n    enableReinitialize: true,\r\n    initialValues: initialValue || {\r\n      event: \"\",\r\n      method: \"\",\r\n      url: \"\",\r\n      collectionTypeDocId: collectionTypeDocId,\r\n    },\r\n    validate: (vals: any) => {\r\n      let errors: any = {};\r\n      Object.keys(vals).forEach((x) => {\r\n        if (!vals[x]) {\r\n          errors[x] = \"Required\";\r\n        }\r\n      });\r\n      return errors;\r\n    },\r\n  });\r\n\r\n  return !open ? null : (\r\n    <Modal open={open}>\r\n      <div className=\"fixed left-0 top-0 w-full h-full flex p-7\" onMouseDown={onClose}>\r\n        <div\r\n          onMouseDown={(e) => e.stopPropagation()}\r\n          className=\"bg-white rounded p-7 m-auto relative animate-littlemoveup\"\r\n          style={{ maxWidth: 600 }}\r\n        >\r\n          <CloseRounded\r\n            className=\"absolute top-0 right-0 cursor-pointer\"\r\n            onClick={onClose}\r\n          ></CloseRounded>\r\n          <div className=\"flex flex-wrap -mx-2 mb-4\">\r\n            <div className=\"sm:w-1/3 w-full mb-3 px-2\">\r\n              <Label\r\n                groundColor=\"white\"\r\n                className=\"mb-2\"\r\n                error={submitCount > 0 ? errors.event : null}\r\n              >\r\n                Event\r\n              </Label>\r\n              <Select\r\n                groundColor=\"white\"\r\n                className=\"h-34px\"\r\n                name=\"event\"\r\n                onChange={handleChange}\r\n                value={values.event}\r\n                options={[\r\n                  { value: \"\", label: \"Select\" },\r\n                  ...events.map((x) => ({ value: x, label: x })),\r\n                ]}\r\n              ></Select>\r\n            </div>\r\n            <div className=\"sm:w-1/3 w-full mb-3 px-2\">\r\n              <Label\r\n                groundColor=\"white\"\r\n                className=\"mb-2\"\r\n                error={submitCount > 0 ? errors.method : null}\r\n              >\r\n                Method\r\n              </Label>\r\n              <Select\r\n                className=\"h-34px\"\r\n                groundColor=\"white\"\r\n                name=\"method\"\r\n                onChange={handleChange}\r\n                value={values.method}\r\n                options={[\r\n                  { value: \"\", label: \"Select\" },\r\n                  ...methods.map((x) => ({ value: x, label: x })),\r\n                ]}\r\n              ></Select>\r\n            </div>\r\n            <div className=\"sm:w-1/3 w-full mb-3 px-2\">\r\n              <Label\r\n                groundColor=\"white\"\r\n                className=\"mb-2 text-black\"\r\n                error={submitCount > 0 ? errors.url : null}\r\n              >\r\n                Url\r\n              </Label>\r\n              <Input\r\n                groundColor=\"white\"\r\n                placeholder={\"url\"}\r\n                className=\"placeholder-black h-34px\"\r\n                value={values.url}\r\n                onChange={handleChange}\r\n                name=\"url\"\r\n              ></Input>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex justify-end\">\r\n            <Button\r\n              disabled={isSubmitting}\r\n              onClick={() => handleSubmit()}\r\n              className=\"bg-fireck-4 hover:bg-fireck-4-hover h-34px\"\r\n            >\r\n              {initialValue ? \"Save\" : \"Add\"}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default WebhookModal;\r\n","import { useSelector, useDispatch } from \"react-redux\";\r\nimport { RootState } from \"store\";\r\nimport { CmsEvent, Webhook, WebhookDocument } from \"api/collectionTypes\";\r\nimport SettingsPage from \"components/SettingsPage\";\r\nimport CollectionTable, { FilterType } from \"components/TableElements/CollectionTable\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Button from \"components/Button\";\r\nimport WebhookModal from \"./WebhookModal\";\r\nimport { addDocument, getDocument, updateDocument } from \"api/collections\";\r\nimport { IoConstructOutline } from \"react-icons/io5\";\r\n\r\nexport interface WebhooksProps {}\r\n\r\nconst COLLECTION_ID = \"WebhooksReservedCollection\";\r\n\r\nconst Webhooks: React.FC<WebhooksProps> = () => {\r\n  const collectionTypes = useSelector((state: RootState) => state.collectionTypes);\r\n  const webhookColType = collectionTypes.find((x) => x.docId === \"WebhooksReservedCollection\");\r\n  const history = useHistory();\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const [editWebhook, setEditWebhook] = useState<WebhookDocument>();\r\n  const [tableRefreshCounter, setTableRefreshCounter] = useState(0);\r\n  const [filters, setFilters] = useState<FilterType[]>([]);\r\n\r\n  const [collectionTypeDocId, setCollectionTypeDocId] = useState(\"\");\r\n  const colType = collectionTypes.find((x) => x.docId === collectionTypeDocId);\r\n\r\n  useEffect(() => {\r\n    if (collectionTypes.length) {\r\n      setCollectionTypeDocId(collectionTypes[0].docId);\r\n    }\r\n  }, [collectionTypes]);\r\n\r\n  useEffect(() => {\r\n    setFilters(\r\n      collectionTypeDocId\r\n        ? [{ fieldId: \"collectionTypeDocId\", operator: \"==\", value: collectionTypeDocId }]\r\n        : []\r\n    );\r\n  }, [colType]);\r\n\r\n  const closeModal = () => {\r\n    setModalOpen(false);\r\n    setEditWebhook(undefined);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {!colType ? null : (\r\n        <WebhookModal\r\n          collectionTypeDocId={collectionTypeDocId}\r\n          open={modalOpen}\r\n          initialValue={editWebhook}\r\n          onClose={closeModal}\r\n          onValue={async (val) => {\r\n            if (val.docId) {\r\n              await updateDocument(COLLECTION_ID, val.docId, val);\r\n            } else {\r\n              await addDocument(COLLECTION_ID, val);\r\n            }\r\n            setTableRefreshCounter((prev) => prev + 1);\r\n          }}\r\n        ></WebhookModal>\r\n      )}\r\n      <SettingsPage\r\n        entityContent={\r\n          webhookColType ? (\r\n            <CollectionTable\r\n              key={`webhooks-table-${\r\n                filters.length ? filters[0].value : \"\"\r\n              }-${tableRefreshCounter}`}\r\n              onEdit={(doc) => {\r\n                setEditWebhook(doc as WebhookDocument);\r\n                setModalOpen(true);\r\n              }}\r\n              groundColor=\"black\"\r\n              collectionType={webhookColType}\r\n              filters={filters}\r\n            ></CollectionTable>\r\n          ) : (\r\n            <div></div>\r\n          )\r\n        }\r\n        selectedEntityId={collectionTypeDocId}\r\n        entities={collectionTypes}\r\n        onSelectEntity={(docId) => setCollectionTypeDocId(docId)}\r\n        entity=\"webhook\"\r\n        enitityPlural=\"webhooks\"\r\n        entityButtons={\r\n          <div className=\"flex\">\r\n            <Button\r\n              onClick={() => setModalOpen(true)}\r\n              className=\"bg-fireck-4 hover:bg-fireck-4-hover h-28px px-6 min-w-unset\"\r\n            >\r\n              Add hook\r\n            </Button>\r\n          </div>\r\n        }\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Webhooks;\r\n"],"sourceRoot":""}