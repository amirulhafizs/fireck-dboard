{"version":3,"sources":["api/collections.ts","components/PageTitle.tsx","../node_modules/@material-ui/icons/AddRounded.js","components/EmptyScreen.tsx","../node_modules/@material-ui/icons/Delete.js","../node_modules/@material-ui/icons/Create.js","../node_modules/react-email-editor/es/loadScript.js","../node_modules/react-email-editor/es/index.js","components/EmailEditorModal.tsx","components/EmailTemplateCard.tsx","hooks/useWindowSize.ts","pages/Emails/index.tsx"],"names":["getAuthHeader","user","store","getState","token","getCollection","collectionId","orderBy","startAt","startAfter","where","limit","populateRef","url","window","location","origin","fetch","headers","Authorization","then","x","json","addDocument","doc","method","body","JSON","stringify","error","deleteDocument","docId","getDocument","updateDocument","collectionType","PageTitle","className","rest","classNames","_interopRequireDefault","require","_interopRequireWildcard","Object","defineProperty","exports","value","default","React","_default","createElement","d","EmptyScreen","title","onCreate","buttonTitle","data-testid","onClick","scriptUrl","callbacks","loaded","runCallbacks","callback","shift","loadScript","push","addCallback","scripts","document","querySelectorAll","injected","forEach","script","src","includes","isScriptInjected","embedScript","setAttribute","onload","head","appendChild","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","lastEditorId","_Component","props","instance","Constructor","TypeError","_classCallCheck","this","_this","self","ReferenceError","_possibleConstructorReturn","loadEditor","options","projectId","tools","appearance","locale","editor","unlayer","createEditor","id","editorId","displayMode","name","pkg","version","_iterator","entries","_isArray","Array","isArray","_i","Symbol","iterator","_ref2","next","done","_ref","test","addEventListener","onLoad","registerCallback","type","loadDesign","design","saveDesign","exportHtml","setMergeTags","mergeTags","subClass","superClass","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","_inherits","componentDidMount","render","_props","_props$minHeight","minHeight","undefined","_props$style","style","flex","display","Component","EmailEditorModal","onClose","onSave","editTemplate","emailEditorRef","useRef","useState","setName","useEffect","Modal","open","Input","placeholder","onChange","e","Button","currentTarget","innerHTML","current","res","data","template","html","alert","dataStr","escape","downloadAnchorNode","click","remove","keys","setTimeout","ref","EmailTemplateCard","windowWidth","onOpen","onDelete","cardRef","cardWidth","setCardWidth","width","getBoundingClientRect","scale","height","transform","ButtonBase","fontSize","stopPropagation","useWindowSize","windowSize","setWindowSize","handleResize","innerWidth","innerHeight","removeEventListener","Emails","templates","setTemplates","openEditor","setOpenEditor","setEditTemplate","a","console","log","emailsColType","useSelector","state","systemCollectionTypes","find","dispatch","useDispatch","closeEditor","noMinWidth","map","confirm","confirmation","prev","arr","splice","index","findIndex","colType","fields","displayOnTable","isDefault","createCollectionType","payload"],"mappings":"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","file":"static/js/12.2c910d72.chunk.js","sourcesContent":["import store from \"store\";\r\n\r\nconst getAuthHeader = () => {\r\n  const user = store.getState().user;\r\n  const token = user ? user.token : null;\r\n  return \"Bearer \" + token;\r\n};\r\n\r\nexport interface Document {\r\n  docId: string;\r\n  created_at: string;\r\n  [index: string]: any;\r\n}\r\n\r\nexport interface GetCollectionOptions {\r\n  collectionId: string;\r\n  orderBy?: string;\r\n  startAt?: number | string;\r\n  startAfter?: number | string;\r\n  where?: string;\r\n  limit?: number;\r\n  populateRef?: boolean;\r\n}\r\n\r\nexport const getCollection = ({\r\n  collectionId,\r\n  orderBy,\r\n  startAt,\r\n  startAfter,\r\n  where,\r\n  limit = 10,\r\n  populateRef = true,\r\n}: GetCollectionOptions) => {\r\n  const url = `${\r\n    window.location.origin\r\n  }/api/${collectionId}?limit=${limit}&populateRef=${populateRef}${\r\n    orderBy ? `&orderBy=${orderBy}` : \"\"\r\n  }${startAt ? `&startAt=${startAt}` : startAfter ? `&startAfter=${startAfter}` : \"\"}${\r\n    where ? `&where=${where}` : \"\"\r\n  }`;\r\n  return fetch(url, { headers: { Authorization: getAuthHeader() } }).then((x) => x.json());\r\n};\r\n\r\nexport const addDocument = (collectionId: string, doc: { [index: string]: any }) => {\r\n  try {\r\n    return fetch(window.location.origin + `/api/${collectionId}`, {\r\n      method: \"POST\",\r\n      headers: { Authorization: getAuthHeader() },\r\n      body: JSON.stringify(doc),\r\n    }).then((x) => x.json());\r\n  } catch (error) {\r\n    return { error };\r\n  }\r\n};\r\n\r\nexport const deleteDocument = (collectionId: string, docId: string) => {\r\n  try {\r\n    return fetch(window.location.origin + `/api/${collectionId}/${docId}`, {\r\n      method: \"DELETE\",\r\n      headers: { Authorization: getAuthHeader() },\r\n    }).then((x) => x.json());\r\n  } catch (error) {\r\n    return { error };\r\n  }\r\n};\r\n\r\nexport const getDocument = (collectionId: string, docId: string) => {\r\n  try {\r\n    return fetch(\r\n      window.location.origin + `/api/${collectionId}${docId ? `/${docId}` : \"\"}?populateRef=false`,\r\n      {\r\n        headers: { Authorization: getAuthHeader() },\r\n      }\r\n    ).then((x) => x.json());\r\n  } catch (error) {\r\n    return { error };\r\n  }\r\n};\r\n\r\nexport const updateDocument = (\r\n  collectionType: string,\r\n  docId: string,\r\n  doc: { [index: string]: any }\r\n) => {\r\n  try {\r\n    return fetch(window.location.origin + `/api/${collectionType}/${docId}`, {\r\n      method: \"PUT\",\r\n      headers: { Authorization: getAuthHeader() },\r\n      body: JSON.stringify(doc),\r\n    }).then((x) => x.json());\r\n  } catch (error) {\r\n    return { error };\r\n  }\r\n};\r\n","import classNames from \"classnames\";\r\n\r\nexport interface PageTitleProps\r\n  extends React.DetailedHTMLProps<React.HTMLAttributes<HTMLDivElement>, HTMLDivElement> {}\r\n\r\nconst PageTitle: React.FC<PageTitleProps> = ({ className, ...rest }) => {\r\n  return (\r\n    <div\r\n      {...rest}\r\n      className={classNames(\"text-27px text-white font-medium capitalize leading-none\", className)}\r\n    ></div>\r\n  );\r\n};\r\n\r\nexport default PageTitle;\r\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M18 13h-5v5c0 .55-.45 1-1 1s-1-.45-1-1v-5H6c-.55 0-1-.45-1-1s.45-1 1-1h5V6c0-.55.45-1 1-1s1 .45 1 1v5h5c.55 0 1 .45 1 1s-.45 1-1 1z\"\n}), 'AddRounded');\n\nexports.default = _default;","import Button from \"components/Button\";\r\n\r\nexport interface EmptyScreenProps {\r\n  title: string;\r\n  buttonTitle: string;\r\n  onCreate: () => void;\r\n}\r\n\r\nconst EmptyScreen: React.FC<EmptyScreenProps> = ({ title, onCreate, buttonTitle }) => {\r\n  return (\r\n    <div className=\"h-96 bg-gray-300 rounded-md flex w-full p-12\">\r\n      <div className=\"m-auto\">\r\n        <div className=\"text-22px mb-5 font-medium text-center\">{title}</div>\r\n        <Button\r\n          data-testid=\"empty-screen-btn\"\r\n          className=\"mx-auto bg-orange-300 hover:bg-orange-301 block\"\r\n          onClick={onCreate}\r\n        >\r\n          {buttonTitle}\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EmptyScreen;\r\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\"\n}), 'Delete');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\"\n}), 'Create');\n\nexports.default = _default;","var scriptUrl = '//editor.unlayer.com/embed.js?2';\nvar callbacks = [];\nvar loaded = false;\n\nvar isScriptInjected = function isScriptInjected() {\n  var scripts = document.querySelectorAll('script');\n  var injected = false;\n\n  scripts.forEach(function (script) {\n    if (script.src.includes(scriptUrl)) {\n      injected = true;\n    }\n  });\n\n  return injected;\n};\n\nvar addCallback = function addCallback(callback) {\n  callbacks.push(callback);\n};\n\nvar runCallbacks = function runCallbacks() {\n  if (loaded) {\n    var callback = void 0;\n\n    while (callback = callbacks.shift()) {\n      callback();\n    }\n  }\n};\n\nexport var loadScript = function loadScript(callback) {\n  addCallback(callback);\n\n  if (!isScriptInjected()) {\n    var embedScript = document.createElement('script');\n    embedScript.setAttribute('src', scriptUrl);\n    embedScript.onload = function () {\n      loaded = true;\n      runCallbacks();\n    };\n    document.head.appendChild(embedScript);\n  } else {\n    runCallbacks();\n  }\n};","var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nimport React, { Component } from 'react';\nimport { loadScript } from './loadScript';\nimport pkg from '../package.json';\n\nvar lastEditorId = 0;\n\nvar _default = function (_Component) {\n  _inherits(_default, _Component);\n\n  function _default(props) {\n    _classCallCheck(this, _default);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _this.loadEditor = function () {\n      var options = _this.props.options || {};\n\n      if (_this.props.projectId) {\n        options.projectId = _this.props.projectId;\n      }\n\n      if (_this.props.tools) {\n        options.tools = _this.props.tools;\n      }\n\n      if (_this.props.appearance) {\n        options.appearance = _this.props.appearance;\n      }\n\n      if (_this.props.locale) {\n        options.locale = _this.props.locale;\n      }\n\n      _this.editor = unlayer.createEditor(_extends({}, options, {\n        id: _this.editorId,\n        displayMode: 'email',\n        source: {\n          name: pkg.name,\n          version: pkg.version\n        }\n      }));\n\n      // All properties starting with on[Name] are registered as event listeners.\n      for (var _iterator = Object.entries(_this.props), _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n        var _ref2;\n\n        if (_isArray) {\n          if (_i >= _iterator.length) break;\n          _ref2 = _iterator[_i++];\n        } else {\n          _i = _iterator.next();\n          if (_i.done) break;\n          _ref2 = _i.value;\n        }\n\n        var _ref = _ref2;\n        var key = _ref[0];\n        var value = _ref[1];\n\n        if (/^on/.test(key) && key != 'onLoad') {\n          _this.addEventListener(key, value);\n        }\n      }\n\n      var onLoad = _this.props.onLoad;\n\n      onLoad && onLoad();\n    };\n\n    _this.registerCallback = function (type, callback) {\n      _this.editor.registerCallback(type, callback);\n    };\n\n    _this.addEventListener = function (type, callback) {\n      _this.editor.addEventListener(type, callback);\n    };\n\n    _this.loadDesign = function (design) {\n      _this.editor.loadDesign(design);\n    };\n\n    _this.saveDesign = function (callback) {\n      _this.editor.saveDesign(callback);\n    };\n\n    _this.exportHtml = function (callback) {\n      _this.editor.exportHtml(callback);\n    };\n\n    _this.setMergeTags = function (mergeTags) {\n      _this.editor.setMergeTags(mergeTags);\n    };\n\n    _this.editorId = props.editorId || 'editor-' + ++lastEditorId;\n    return _this;\n  }\n\n  _default.prototype.componentDidMount = function componentDidMount() {\n    loadScript(this.loadEditor);\n  };\n\n  _default.prototype.render = function render() {\n    var _props = this.props,\n        _props$minHeight = _props.minHeight,\n        minHeight = _props$minHeight === undefined ? 500 : _props$minHeight,\n        _props$style = _props.style,\n        style = _props$style === undefined ? {} : _props$style;\n\n\n    return React.createElement(\n      'div',\n      {\n        style: {\n          flex: 1,\n          display: 'flex',\n          minHeight: minHeight\n        }\n      },\n      React.createElement('div', { id: this.editorId, style: _extends({}, style, { flex: 1 }) })\n    );\n  };\n\n  return _default;\n}(Component);\n\nexport { _default as default };","import Modal from \"@material-ui/core/Modal\";\r\nimport EmailEditor from \"react-email-editor\";\r\nimport Button from \"components/Button\";\r\nimport Input from \"components/Input\";\r\nimport { useState, useRef, useEffect } from \"react\";\r\nimport { Template } from \"pages/Emails\";\r\n\r\nexport interface EmailEditorModalProps {\r\n  onClose: () => void;\r\n  onSave: (template: any) => void;\r\n  editTemplate?: Template;\r\n}\r\n\r\nconst EmailEditorModal: React.FC<EmailEditorModalProps> = ({ onClose, onSave, editTemplate }) => {\r\n  const emailEditorRef = useRef<any>();\r\n  const [name, setName] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (!editTemplate) return;\r\n    setName(editTemplate.name);\r\n  }, [editTemplate]);\r\n\r\n  const onSaveClick = () => {\r\n    if (emailEditorRef.current) {\r\n      emailEditorRef.current.editor.saveDesign((res: any) => {\r\n        emailEditorRef.current.editor.exportHtml((data: any) => {\r\n          onSave({\r\n            ...editTemplate,\r\n            template: res || editTemplate?.template,\r\n            html: data.html || editTemplate?.html,\r\n            name,\r\n          });\r\n          setName(\"\");\r\n        });\r\n      });\r\n    }\r\n  };\r\n\r\n  const onLoad = () => {\r\n    if (editTemplate) {\r\n      if (emailEditorRef.current && Object.keys(editTemplate.template).length) {\r\n        emailEditorRef.current.editor.loadDesign(editTemplate.template);\r\n      } else {\r\n        setTimeout(() => {\r\n          if (emailEditorRef.current && Object.keys(editTemplate.template).length) {\r\n            emailEditorRef.current.editor.loadDesign(editTemplate.template);\r\n          }\r\n        }, 3000);\r\n      }\r\n    }\r\n  };\r\n\r\n  const onDownload = () => {\r\n    if (emailEditorRef.current) {\r\n      emailEditorRef.current.editor.exportHtml((data: any) => {\r\n        var dataStr = \"data:text/html;charset=utf-8,\" + escape(data.html);\r\n        var downloadAnchorNode = document.createElement(\"a\");\r\n        downloadAnchorNode.setAttribute(\"href\", dataStr);\r\n        downloadAnchorNode.setAttribute(\"download\", name || \"email-template\" + \".html\");\r\n        document.body.appendChild(downloadAnchorNode); // required for firefox\r\n        downloadAnchorNode.click();\r\n        downloadAnchorNode.remove();\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Modal open={true}>\r\n      <div className=\"fixed left-0 top-0 w-full h-full overflow-auto flex p-12\">\r\n        <div className=\"m-auto bg-white\">\r\n          <div className=\"flex justify-between p-4 items-center\">\r\n            <div className=\"flex\">\r\n              <Input\r\n                placeholder=\"Type name\"\r\n                value={name}\r\n                onChange={(e) => setName(e.target.value)}\r\n                className=\"mr-3\"\r\n              ></Input>\r\n              <Button\r\n                className=\"bg-orange-300 hover:bg-orange-301 mr-3\"\r\n                onClick={(e) => {\r\n                  if (!name) {\r\n                    alert(\"Name is empty\");\r\n                    return;\r\n                  }\r\n\r\n                  e.currentTarget.innerHTML = \"Saving...\";\r\n                  onSaveClick();\r\n                }}\r\n              >\r\n                Save\r\n              </Button>\r\n              <Button onClick={onDownload} className=\"bg-gray-301 hover:bg-gray-302\">\r\n                Download\r\n              </Button>\r\n            </div>\r\n            <Button className=\"bg-blue-300 hover:bg-blue-400 text-white\" onClick={onClose}>\r\n              Close\r\n            </Button>\r\n          </div>\r\n          <EmailEditor onLoad={onLoad} ref={emailEditorRef}></EmailEditor>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default EmailEditorModal;\r\n","import { useEffect, useRef, useState } from \"react\";\r\nimport EditIcon from \"@material-ui/icons/Create\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport ButtonBase from \"@material-ui/core/ButtonBase\";\r\n\r\nexport interface EmailTemplateCardProps {\r\n  name: string;\r\n  html: string;\r\n  windowWidth: number;\r\n  onOpen: () => void;\r\n  onDelete: () => void;\r\n}\r\n\r\nconst EmailTemplateCard: React.FC<EmailTemplateCardProps> = ({\r\n  html,\r\n  name,\r\n  windowWidth,\r\n  onOpen,\r\n  onDelete,\r\n}) => {\r\n  const cardRef = useRef<any>();\r\n\r\n  const [cardWidth, setCardWidth] = useState<number>(0);\r\n\r\n  useEffect(() => {\r\n    const { width } = cardRef.current.getBoundingClientRect();\r\n    setCardWidth(width);\r\n  }, [windowWidth]);\r\n\r\n  const scale = (cardWidth - 56) / 616;\r\n\r\n  return (\r\n    <>\r\n      <div className=\"w-full pt-110%\"></div>\r\n      <div\r\n        className=\"absolute left-0 top-0 w-full h-full flex flex-col rounded-md overflow-hidden\"\r\n        ref={cardRef}\r\n      >\r\n        <div className=\"flex-grow h-0 pt-7 px-7 bg-blue-300\">\r\n          <iframe\r\n            src={\"data:text/html;charset=utf-8,\" + escape(html)}\r\n            style={{ width: 616, height: 677, transform: `scale(${scale})` }}\r\n            className=\"origin-top-left\"\r\n          ></iframe>\r\n        </div>\r\n        <div className=\"flex-shrink-0 w-full flex items-center justify-center bg-gray-301 h-39px relative text-sm\">\r\n          {name || \"Template name\"}\r\n        </div>\r\n      </div>\r\n      <div\r\n        className=\"absolute w-full h-full left-0 top-0 z-20 group cursor-pointer\"\r\n        onClick={onOpen}\r\n      >\r\n        <div className=\"absolute top-0 left-0 justify-between p-3 w-full z-20 group-hover:opacity-100 opacity-0 transition duration-200 flex\">\r\n          <ButtonBase className=\"outline-none h-26px w-26px rounded bg-orange-300 hover:bg-orange-301\">\r\n            <EditIcon\r\n              fontSize=\"small\"\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                onOpen();\r\n              }}\r\n            ></EditIcon>\r\n          </ButtonBase>\r\n          <ButtonBase className=\"outline-none h-26px w-26px rounded bg-orange-300 hover:bg-orange-301\">\r\n            <DeleteIcon\r\n              fontSize=\"small\"\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                onDelete();\r\n              }}\r\n            ></DeleteIcon>\r\n          </ButtonBase>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default EmailTemplateCard;\r\n","import { useState, useEffect } from \"react\";\r\n\r\nconst useWindowSize = () => {\r\n  // Initialize state with undefined width/height so server and client renders match\r\n  // Learn more here: https://joshwcomeau.com/react/the-perils-of-rehydration/\r\n  const [windowSize, setWindowSize] = useState({\r\n    width: 0,\r\n    height: 0,\r\n  });\r\n  useEffect(() => {\r\n    // Handler to call on window resize\r\n    function handleResize() {\r\n      // Set window width/height to state\r\n      setWindowSize({\r\n        width: window.innerWidth,\r\n        height: window.innerHeight,\r\n      });\r\n    }\r\n    // Add event listener\r\n    window.addEventListener(\"resize\", handleResize);\r\n    // Call handler right away so state gets updated with initial window size\r\n    handleResize();\r\n    // Remove event listener on cleanup\r\n    return () => window.removeEventListener(\"resize\", handleResize);\r\n  }, []); // Empty array ensures that effect is only run on mount\r\n  return windowSize;\r\n};\r\n\r\nexport default useWindowSize;\r\n","import Button from \"components/Button\";\r\nimport PageTitle from \"components/PageTitle\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { RootState } from \"store\";\r\nimport { createCollectionType, CollectionType } from \"api/collectionTypes\";\r\nimport EmptyScreen from \"components/EmptyScreen\";\r\nimport { addDocument, updateDocument, getCollection } from \"api/collections\";\r\nimport EmailEditorModal from \"components/EmailEditorModal\";\r\nimport AddRounded from \"@material-ui/icons/AddRounded\";\r\nimport EmailTemplateCard from \"components/EmailTemplateCard\";\r\nimport useWindowSize from \"hooks/useWindowSize\";\r\nimport { deleteDocument } from \"api/collections\";\r\n\r\nimport { confirm } from \"components/Confirm\";\r\n\r\nexport interface EmailsProps {}\r\n\r\nexport type Template = { name: string; html: string; template: Object; docId: string };\r\n\r\nconst Emails: React.FC<EmailsProps> = () => {\r\n  const [templates, setTemplates] = useState<Template[]>([]);\r\n  const [openEditor, setOpenEditor] = useState(false);\r\n  const [editTemplate, setEditTemplate] = useState<Template>();\r\n  const { width: windowWidth } = useWindowSize();\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const res = await getCollection({ collectionId: \"EmailTemplatesReservedCollection\" });\r\n\r\n        setTemplates(res);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  const emailsColType = useSelector((state: RootState) =>\r\n    state.systemCollectionTypes.find((x) => x.id === \"EmailTemplatesReservedCollection\")\r\n  );\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const onEnable = () => {\r\n    const colType = {\r\n      id: \"EmailTemplatesReservedCollection\",\r\n      name: \"EmailTemplatesReservedCollection\",\r\n      fields: [\r\n        { type: \"string\", id: \"name\" },\r\n        { type: \"string\", id: \"html\" },\r\n        { type: \"json\", id: \"template\" },\r\n        { id: \"createdAt\", type: \"date\", displayOnTable: true, isDefault: true },\r\n        { id: \"modifiedAt\", type: \"date\", displayOnTable: true, isDefault: true },\r\n        { id: \"docId\", type: \"string\", displayOnTable: true, isDefault: true },\r\n      ],\r\n    } as CollectionType;\r\n\r\n    createCollectionType(colType);\r\n\r\n    dispatch({ type: \"ADD_COLLECTION_TYPE\", payload: colType });\r\n  };\r\n\r\n  const closeEditor = () => {\r\n    setOpenEditor(false);\r\n    setEditTemplate(undefined);\r\n  };\r\n\r\n  return !emailsColType ? (\r\n    <div className=\"w-full h-full flex\">\r\n      <div className=\"m-auto\">\r\n        <div className=\"text-center mb-4 text-28px font-medium\">Emails</div>\r\n        <Button onClick={onEnable} className=\"bg-orange-300 hover:bg-orange-301\">\r\n          Enable\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  ) : (\r\n    <div>\r\n      <div className=\"flex justify-between flex-wrap mb-7\">\r\n        <PageTitle className=\"mb-4 mr-4\">Emails</PageTitle>\r\n        <Button\r\n          onClick={() => setOpenEditor(true)}\r\n          className=\"bg-orange-300 hover:bg-orange-301 mb-4\"\r\n          noMinWidth\r\n        >\r\n          <div className=\"flex items-center\">\r\n            <AddRounded className=\"mr-3 text-xl\"></AddRounded>\r\n            <span>Add template</span>\r\n          </div>\r\n        </Button>\r\n      </div>\r\n      {!templates.length ? (\r\n        <EmptyScreen\r\n          title=\"There are no templates\"\r\n          buttonTitle=\"Create\"\r\n          onCreate={() => setOpenEditor(true)}\r\n        ></EmptyScreen>\r\n      ) : (\r\n        <div className=\"flex flex-wrap -mx-3\">\r\n          {templates.map((x, i) => (\r\n            <div key={`email-template-${i}`} className=\"lg:w-3/12 md:w-4/12 w-6/12 px-3\">\r\n              <div className=\"w-full relative\">\r\n                <EmailTemplateCard\r\n                  onOpen={() => {\r\n                    setEditTemplate(x);\r\n                    setOpenEditor(true);\r\n                  }}\r\n                  onDelete={async () => {\r\n                    if (\r\n                      await confirm({\r\n                        confirmation: \"Do you really want to delete template?\",\r\n                      })\r\n                    ) {\r\n                      setTemplates((prev) => {\r\n                        let arr = [...prev];\r\n                        arr.splice(i, 1);\r\n                        return arr;\r\n                      });\r\n                      deleteDocument(\"EmailTemplatesReservedCollection\", x.docId);\r\n                    }\r\n                  }}\r\n                  windowWidth={windowWidth}\r\n                  name={x.name}\r\n                  html={x.html}\r\n                ></EmailTemplateCard>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n      {!openEditor ? null : (\r\n        <EmailEditorModal\r\n          onSave={async (template: any) => {\r\n            console.log(\"template on save\", template);\r\n            if (template.docId) {\r\n              updateDocument(\"EmailTemplatesReservedCollection\", template.docId, template);\r\n              setTemplates((prev) => {\r\n                let arr = [...prev];\r\n                const index = arr.findIndex((x) => x.docId === template.docId);\r\n                if (index === -1) return prev;\r\n                arr[index] = template;\r\n                return arr;\r\n              });\r\n            } else {\r\n              try {\r\n                const res = await addDocument(\"EmailTemplatesReservedCollection\", template);\r\n                setTemplates((prev) => [res, ...prev]);\r\n              } catch (error) {\r\n                console.log(error);\r\n              }\r\n            }\r\n\r\n            closeEditor();\r\n          }}\r\n          onClose={closeEditor}\r\n          editTemplate={editTemplate}\r\n        ></EmailEditorModal>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Emails;\r\n"],"sourceRoot":""}