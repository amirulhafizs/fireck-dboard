{"version":3,"sources":["components/PageTitle.tsx","components/EmptyScreen.tsx","components/InViewFetcher.tsx","api/files.ts","pages/Media/index.tsx"],"names":["PageTitle","className","rest","classNames","EmptyScreen","title","onCreate","buttonTitle","onClick","InViewFetcher","fetcher","onValue","limit","onError","React","useState","endReached","setEndReached","onChange","inView","a","res","console","log","error","length","size","uploadFileToStorage","file","Promise","resolve","reject","storage","firebase","metadata","contentType","type","fileName","v4","mime","extension","uploadTask","ref","put","on","snapshot","message","getDownloadURL","then","downloadUrl","uploadFile","fileDetails","name","url","storagePath","user","store","getState","token","fetch","window","location","origin","method","body","JSON","stringify","headers","Authorization","x","json","getFiles","orderBy","startAt","startAfter","deleteFile","docId","formatBytes","b","c","d","Math","floor","parseFloat","pow","toFixed","Media","uploadRef","useRef","assets","setAssets","notify","useNotify","useEffect","dispatch","payload","multiple","e","files","target","uploaded","variant","prev","noMinWidth","current","click","map","i","open","fontSize","confirm","confirmation","arr","splice","style","paddingTop","backgroundImage","split","slice","pop","results","uploaded_at"],"mappings":"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","file":"static/js/14.97164868.chunk.js","sourcesContent":["import classNames from \"classnames\";\r\n\r\nexport interface PageTitleProps\r\n  extends React.DetailedHTMLProps<React.HTMLAttributes<HTMLDivElement>, HTMLDivElement> {}\r\n\r\nconst PageTitle: React.FC<PageTitleProps> = ({ className, ...rest }) => {\r\n  return (\r\n    <div\r\n      {...rest}\r\n      className={classNames(\"text-34px font-medium capitalize leading-none\", className)}\r\n    ></div>\r\n  );\r\n};\r\n\r\nexport default PageTitle;\r\n","import Button from \"components/Button\";\r\n\r\nexport interface EmptyScreenProps {\r\n  title: string;\r\n  buttonTitle: string;\r\n  onCreate: () => void;\r\n}\r\n\r\nconst EmptyScreen: React.FC<EmptyScreenProps> = ({ title, onCreate, buttonTitle }) => {\r\n  return (\r\n    <div className=\"h-96 bg-gray-300 rounded-md flex w-full p-12\">\r\n      <div className=\"m-auto\">\r\n        <div className=\"text-28px mb-5 font-medium text-center\">{title}</div>\r\n        <Button className=\"mx-auto bg-orange-300 hover:bg-orange-301 block\" onClick={onCreate}>\r\n          {buttonTitle}\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EmptyScreen;\r\n","import Loader from \"components/Loader\";\r\nimport { InView } from \"react-intersection-observer\";\r\nimport React from \"react\";\r\n\r\nexport interface InViewFetcherProps {\r\n  fetcher: () => Promise<Array<any> | { error: any }>;\r\n  onValue: (a: Array<any>) => void;\r\n  onError?: (val: string) => void;\r\n  limit: number;\r\n}\r\n\r\nconst InViewFetcher: React.FC<InViewFetcherProps> = ({\r\n  fetcher,\r\n  onValue,\r\n  limit,\r\n  onError = () => {},\r\n}) => {\r\n  const [endReached, setEndReached] = React.useState(false);\r\n  return (\r\n    <InView\r\n      className=\"w-full\"\r\n      onChange={async (inView) => {\r\n        if (inView && !endReached) {\r\n          let res = await fetcher();\r\n          console.log(\"fetch response\", res);\r\n          if (!(\"error\" in res)) {\r\n            onValue(res);\r\n            if (!res.length || res.length < limit) {\r\n              setEndReached(true);\r\n            }\r\n          } else {\r\n            onError(res.error);\r\n            setEndReached(true);\r\n          }\r\n        }\r\n      }}\r\n    >\r\n      {!endReached ? (\r\n        <div className=\"flex justify-center py-3\">\r\n          <Loader size=\"small\"></Loader>\r\n        </div>\r\n      ) : (\r\n        \"\"\r\n      )}\r\n    </InView>\r\n  );\r\n};\r\n\r\nexport default InViewFetcher;\r\n","import firebase from \"firebase\";\r\nimport store from \"store\";\r\nimport { v4 } from \"uuid\";\r\nimport mime from \"mime-types\";\r\n\r\nexport const uploadFileToStorage = (\r\n  file: File\r\n): Promise<{ downloadUrl: string; fileName: string } | { error: string }> => {\r\n  return new Promise((resolve, reject) => {\r\n    try {\r\n      const storage = firebase.storage();\r\n\r\n      const metadata = {\r\n        contentType: file.type,\r\n      };\r\n\r\n      const fileName = v4() + \".\" + mime.extension(file.type);\r\n      let ref = storage.ref(fileName);\r\n      const uploadTask = ref.put(file, metadata);\r\n      uploadTask.on(\r\n        \"state_changed\",\r\n        (snapshot) => {},\r\n        (error) => {\r\n          resolve({ error: error.message });\r\n        },\r\n        () => {\r\n          uploadTask.snapshot.ref.getDownloadURL().then((downloadUrl) => {\r\n            resolve({ downloadUrl, fileName });\r\n          });\r\n        }\r\n      );\r\n    } catch (error: any) {\r\n      resolve({ error });\r\n    }\r\n  });\r\n};\r\n\r\nexport const uploadFile = async (file: File): Promise<{ error: string } | any> => {\r\n  try {\r\n    const res = await uploadFileToStorage(file);\r\n    if (\"error\" in res) {\r\n      return res;\r\n    } else {\r\n      const fileDetails = {\r\n        name: file.name,\r\n        size: file.size,\r\n        url: res.downloadUrl,\r\n        storagePath: res.fileName,\r\n      };\r\n      const user = store.getState().user;\r\n      const token = user ? user.token : null;\r\n      return fetch(window.location.origin + \"/private/files\", {\r\n        method: \"POST\",\r\n        body: JSON.stringify(fileDetails),\r\n        headers: { Authorization: \"Bearer \" + token },\r\n      }).then((x) => x.json());\r\n    }\r\n  } catch (error) {\r\n    return { error };\r\n  }\r\n};\r\n\r\nexport type FileDocument = {\r\n  docId: string;\r\n  name: string;\r\n  size: number;\r\n  storagePath: string;\r\n  uploaded_at: number;\r\n  url: string;\r\n};\r\n\r\nexport const getFiles = async ({\r\n  limit = 10,\r\n  orderBy,\r\n  startAt,\r\n  startAfter,\r\n}: {\r\n  limit?: number;\r\n  orderBy: string;\r\n  startAt?: string | number;\r\n  startAfter?: string | number;\r\n}): Promise<Array<FileDocument> | { error: string }> => {\r\n  try {\r\n    const user = store.getState().user;\r\n    const token = user ? user.token : null;\r\n    return fetch(\r\n      window.location.origin +\r\n        `/private/files?limit=${limit}${\r\n          startAt ? \"&startAt=\" + startAt : \"\"\r\n        }&orderBy=${orderBy},desc${startAfter ? `&startAfter=${startAfter}` : \"\"}`,\r\n      {\r\n        headers: { Authorization: \"Bearer \" + token },\r\n      }\r\n    ).then((x) => x.json());\r\n  } catch (error: any) {\r\n    return { error };\r\n  }\r\n};\r\n\r\nexport const getFilesCount = async () => {\r\n  try {\r\n    const user = store.getState().user;\r\n    const token = user ? user.token : null;\r\n    return fetch(window.location.origin + `/private/files/count`, {\r\n      headers: { Authorization: \"Bearer \" + token },\r\n    }).then((x) => x.json());\r\n  } catch (error) {\r\n    return { error };\r\n  }\r\n};\r\n\r\nexport const deleteFile = (docId: string, storagePath: string) => {\r\n  try {\r\n    const user = store.getState().user;\r\n    const token = user ? user.token : null;\r\n    return fetch(window.location.origin + `/private/files`, {\r\n      method: \"DELETE\",\r\n      headers: { Authorization: \"Bearer \" + token },\r\n      body: JSON.stringify({ docId, storagePath }),\r\n    }).then((x) => x.json());\r\n  } catch (error) {\r\n    return { error };\r\n  }\r\n};\r\n","import Button from \"components/Button\";\r\nimport { IoAdd } from \"react-icons/io5\";\r\nimport React from \"react\";\r\nimport { uploadFile, getFiles, FileDocument, deleteFile } from \"api/files\";\r\nimport store from \"store\";\r\nimport InViewFetcher from \"components/InViewFetcher\";\r\nimport ButtonBase from \"@material-ui/core/ButtonBase\";\r\nimport OpenInNew from \"@material-ui/icons/OpenInNew\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport { confirm } from \"components/Confirm\";\r\nimport { useNotify } from \"components/NotificationsProvider\";\r\nimport PageTitle from \"components/PageTitle\";\r\nimport EmptyScreen from \"components/EmptyScreen\";\r\n\r\nexport function formatBytes(a: number, b = 2) {\r\n  if (0 === a) return \"0 Bytes\";\r\n  const c = 0 > b ? 0 : b,\r\n    d = Math.floor(Math.log(a) / Math.log(1024));\r\n  return (\r\n    parseFloat((a / Math.pow(1024, d)).toFixed(c)) +\r\n    \" \" +\r\n    [\"Bytes\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"][d]\r\n  );\r\n}\r\n\r\nexport interface MediaProps {}\r\n\r\nconst Media: React.FC<MediaProps> = () => {\r\n  const uploadRef = React.useRef(null as any);\r\n  const [assets, setAssets] = React.useState<Array<FileDocument>>([]);\r\n  const notify = useNotify();\r\n\r\n  React.useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        store.dispatch({ type: \"SET_LOADING\", payload: true });\r\n        const res = await getFiles({ orderBy: \"uploaded_at\" });\r\n        if (\"error\" in res) {\r\n        } else {\r\n          setAssets(res);\r\n        }\r\n\r\n        store.dispatch({ type: \"SET_LOADING\", payload: false });\r\n      } catch (er) {\r\n        console.log(er);\r\n      }\r\n    })();\r\n  }, []);\r\n  return (\r\n    <div>\r\n      <div className=\"flex justify-between flex-wrap mb-7\">\r\n        <PageTitle className=\"mb-4 mr-4\">Media</PageTitle>\r\n        <input\r\n          type=\"file\"\r\n          multiple\r\n          className=\"hidden\"\r\n          ref={uploadRef}\r\n          onChange={async (e) => {\r\n            const files = e.target.files;\r\n            if (files && files.length) {\r\n              store.dispatch({\r\n                type: \"SET_LOADING\",\r\n                payload: `Uploading ${files.length} file${files.length > 1 ? \"s\" : \"\"}...`,\r\n              });\r\n              let uploaded = 0;\r\n              for (let file of files) {\r\n                const res = await uploadFile(file);\r\n                console.log(\"Response of file upload\", res);\r\n                if (!(\"error\" in res)) {\r\n                  uploaded++;\r\n                  store.dispatch({\r\n                    type: \"SET_LOADING\",\r\n                    payload: `${uploaded}/${files.length} uploaded.`,\r\n                  });\r\n                  setAssets((prev) => [res, ...prev]);\r\n                } else {\r\n                  notify(\"Permission denied. Try reload the app\", { variant: \"error\" });\r\n                }\r\n              }\r\n\r\n              store.dispatch({ type: \"SET_LOADING\", payload: false });\r\n            }\r\n          }}\r\n        />\r\n        <Button\r\n          noMinWidth\r\n          onClick={() => uploadRef.current.click()}\r\n          className=\"bg-orange-300 hover:bg-orange-301 mb-4\"\r\n        >\r\n          <div className=\"flex items-center\">\r\n            <IoAdd className=\"mr-2\" size={18}></IoAdd>\r\n            <span>Upload</span>\r\n          </div>\r\n        </Button>\r\n      </div>\r\n      {/* <div className=\"mb-6 text-gray-600 leading-none\">{count} files in total</div> */}\r\n      {!assets.length ? (\r\n        <EmptyScreen\r\n          buttonTitle=\"Upload the first one\"\r\n          title=\"There are no media files yet\"\r\n          onCreate={() => uploadRef.current.click()}\r\n        ></EmptyScreen>\r\n      ) : (\r\n        <div className=\"flex flex-wrap -mx-3\">\r\n          {assets.map((x, i) => (\r\n            <div key={`asset-${i}`} className=\"xl:w-3/12 lg:w-4/12 xs:w-6/12 w-full px-3 mb-6\">\r\n              <div className=\"w-full relative rounded-sm overflow-hidden group\">\r\n                <div className=\"absolute top-0 left-0 justify-between p-3 w-full z-20 group-hover:opacity-100 opacity-0 transition duration-200 flex\">\r\n                  <ButtonBase\r\n                    onClick={() => window.open(x.url, \"_blank\")}\r\n                    className=\"outline-none h-26px w-26px rounded bg-orange-300 hover:bg-orange-301\"\r\n                  >\r\n                    <OpenInNew fontSize=\"small\"></OpenInNew>\r\n                  </ButtonBase>\r\n                  <ButtonBase className=\"outline-none h-26px w-26px rounded bg-orange-300 hover:bg-orange-301\">\r\n                    <DeleteIcon\r\n                      fontSize=\"small\"\r\n                      onClick={async () => {\r\n                        if (\r\n                          await confirm({\r\n                            confirmation: \"Do you really want to delete this file?\",\r\n                          })\r\n                        ) {\r\n                          setAssets((prev) => {\r\n                            let arr = [...prev];\r\n                            arr.splice(i, 1);\r\n                            return arr;\r\n                          });\r\n                          const res = await deleteFile(x.docId, x.storagePath);\r\n                          if (!(\"error\" in res)) {\r\n                            notify(\"File deleted!\", { variant: \"success\" });\r\n                          }\r\n                        }\r\n                      }}\r\n                    ></DeleteIcon>\r\n                  </ButtonBase>\r\n                </div>\r\n\r\n                <div style={{ paddingTop: \"61%\" }} className=\"bg-blue-300\"></div>\r\n                <div\r\n                  style={{ paddingTop: \"61%\", backgroundImage: `url(${x.url})` }}\r\n                  className=\"bg-center bg-contain bg-no-repeat absolute left-0 top-0 z-10 w-full\"\r\n                ></div>\r\n\r\n                <div className=\"p-4 bg-gray-300\">\r\n                  <div className=\"line-clamp-1 font-medium mb-3\">{x.name}</div>\r\n                  <div className=\"flex justify-between\">\r\n                    <div>{formatBytes(x.size)}</div>\r\n                    <div>\r\n                      <div className=\"bg-orange-300 rounded px-2 py-0.5 text-sm\">\r\n                        {x.name.split(\".\").slice(-1).pop()}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n\r\n          {assets.length ? (\r\n            <InViewFetcher\r\n              limit={10}\r\n              onValue={(results: Array<FileDocument>) => {\r\n                setAssets((prev) => [...prev, ...results]);\r\n              }}\r\n              fetcher={() =>\r\n                getFiles({\r\n                  startAfter: assets[assets.length - 1].uploaded_at,\r\n                  orderBy: \"uploaded_at\",\r\n                })\r\n              }\r\n            ></InViewFetcher>\r\n          ) : null}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Media;\r\n"],"sourceRoot":""}