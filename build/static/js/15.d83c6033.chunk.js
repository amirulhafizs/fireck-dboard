(this["webpackJsonpfirebase-cms1"]=this["webpackJsonpfirebase-cms1"]||[]).push([[15],{725:function(e,t,n){"use strict";var r=n(10),a=n(140),c=n(141),s=n.n(c),i=n(1);t.a=function(e){var t=e.className,n=Object(a.a)(e,["className"]);return Object(i.jsx)("div",Object(r.a)(Object(r.a)({},n),{},{className:s()("text-34px font-medium capitalize leading-none",t)}))}},731:function(e,t,n){"use strict";var r=n(7),a=n.n(r),c=n(16),s=n(6),i=n(144),o=n(252),u=n(0),l=n.n(u),d=n(1);t.a=function(e){var t=e.fetcher,n=e.onValue,r=e.limit,u=e.onError,f=void 0===u?function(){}:u,p=l.a.useState(!1),b=Object(s.a)(p,2),h=b[0],j=b[1];return Object(d.jsx)(o.a,{className:"w-full",onChange:function(){var e=Object(c.a)(a.a.mark((function e(c){var s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c||h){e.next=5;break}return e.next=3,t();case 3:"error"in(s=e.sent)?(f(s.error),j(!0)):(n(s),(!s.length||s.length<r)&&j(!0));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:h?"":Object(d.jsx)("div",{className:"flex justify-center py-3",children:Object(d.jsx)(i.a,{size:"small"})})})}},736:function(e,t,n){"use strict";n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return b}));var r=n(7),a=n.n(r),c=n(16),s=n(757),i=n(14),o=n(914),u=n(754),l=n.n(u),d=function(e){return new Promise((function(t,n){try{var r=s.a.storage(),a={contentType:e.type},c=Object(o.a)()+"."+l.a.extension(e.type),i=r.ref(c).put(e,a);i.on("state_changed",(function(e){}),(function(e){t({error:e.message})}),(function(){i.snapshot.ref.getDownloadURL().then((function(e){t({downloadUrl:e,fileName:c})}))}))}catch(u){t({error:u})}}))},f=function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d(t);case 3:if(!("error"in(n=e.sent))){e.next=8;break}return e.abrupt("return",n);case 8:return r={name:t.name,size:t.size,url:n.downloadUrl,storagePath:n.fileName},c=i.a.getState().user,s=c?c.token:null,e.abrupt("return",fetch(window.location.origin+"/private/files",{method:"POST",body:JSON.stringify(r),headers:{Authorization:"Bearer "+s}}).then((function(e){return e.json()})));case 12:e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",{error:e.t0});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c,s,o,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.limit,r=void 0===n?10:n,c=t.orderBy,s=t.startAt,o=t.startAfter,e.prev=1,u=i.a.getState().user,l=u?u.token:null,e.abrupt("return",fetch(window.location.origin+"/private/files?limit=".concat(r).concat(s?"&startAt="+s:"","&orderBy=").concat(c,",desc").concat(o?"&startAfter=".concat(o):""),{headers:{Authorization:"Bearer "+l}}).then((function(e){return e.json()})));case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",{error:e.t0});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),b=function(e,t){try{var n=i.a.getState().user,r=n?n.token:null;return fetch(window.location.origin+"/private/files",{method:"DELETE",headers:{Authorization:"Bearer "+r},body:JSON.stringify({docId:e,storagePath:t})}).then((function(e){return e.json()}))}catch(a){return{error:a}}}},755:function(e,t,n){"use strict";n.r(t),n.d(t,"formatBytes",(function(){return k}));var r=n(19),a=n(96),c=n(7),s=n.n(c),i=n(16),o=n(6),u=n(60),l=n(250),d=n(0),f=n.n(d),p=n(736),b=n(14),h=n(731),j=n(715),x=n(735),m=n.n(x),v=n(746),g=n.n(v),O=n(142),w=n(78),y=n(725),N=n(1);function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var n=0>t?0:t,r=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,r)).toFixed(n))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][r]}t.default=function(){var e=f.a.useRef(null),t=f.a.useState([]),n=Object(o.a)(t,2),c=n[0],d=n[1],x=Object(w.b)();return f.a.useEffect((function(){Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b.a.dispatch({type:"SET_LOADING",payload:!0}),e.next=4,Object(p.b)({orderBy:"uploaded_at"});case 4:"error"in(t=e.sent)||d(t),b.a.dispatch({type:"SET_LOADING",payload:!1}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()}),[]),Object(N.jsxs)("div",{children:[Object(N.jsxs)("div",{className:"flex justify-between flex-wrap mb-7",children:[Object(N.jsx)(y.a,{className:"mb-4 mr-4",children:"Media"}),Object(N.jsx)("input",{type:"file",multiple:!0,className:"hidden",ref:e,onChange:function(){var e=Object(i.a)(s.a.mark((function e(t){var n,c,i,o,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.target.files)||!n.length){e.next=21;break}b.a.dispatch({type:"SET_LOADING",payload:"Uploading ".concat(n.length," file").concat(n.length>1?"s":"","...")}),c=0,i=Object(a.a)(n),e.prev=5,u=s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.value,e.next=3,Object(p.c)(t);case 3:"error"in(a=e.sent)?x("Permission denied",{variant:"error"}):(c++,b.a.dispatch({type:"SET_LOADING",payload:"".concat(c,"/").concat(n.length," uploaded.")}),d((function(e){return[a].concat(Object(r.a)(e))})));case 5:case"end":return e.stop()}}),e)})),i.s();case 8:if((o=i.n()).done){e.next=12;break}return e.delegateYield(u(),"t0",10);case 10:e.next=8;break;case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(5),i.e(e.t1);case 17:return e.prev=17,i.f(),e.finish(17);case 20:b.a.dispatch({type:"SET_LOADING",payload:!1});case 21:case"end":return e.stop()}}),e,null,[[5,14,17,20]])})));return function(t){return e.apply(this,arguments)}}()}),Object(N.jsx)(u.a,{noMinWidth:!0,onClick:function(){return e.current.click()},className:"bg-orange-300 hover:bg-orange-301 mb-4",children:Object(N.jsxs)("div",{className:"flex items-center",children:[Object(N.jsx)(l.a,{className:"mr-2",size:18}),Object(N.jsx)("span",{children:"Upload"})]})})]}),Object(N.jsxs)("div",{className:"flex flex-wrap -mx-3",children:[c.map((function(e,t){return Object(N.jsx)("div",{className:"xl:w-3/12 lg:w-4/12 xs:w-6/12 w-full px-3 mb-6",children:Object(N.jsxs)("div",{className:"w-full relative rounded-sm overflow-hidden group",children:[Object(N.jsxs)("div",{className:"absolute top-0 left-0 justify-between p-3 w-full z-20 group-hover:opacity-100 opacity-0 transition duration-200 flex",children:[Object(N.jsx)(j.a,{onClick:function(){return window.open(e.url,"_blank")},className:"outline-none h-26px w-26px rounded bg-orange-300 hover:bg-orange-301",children:Object(N.jsx)(m.a,{fontSize:"small"})}),Object(N.jsx)(j.a,{className:"outline-none h-26px w-26px rounded bg-orange-300 hover:bg-orange-301",children:Object(N.jsx)(g.a,{fontSize:"small",onClick:Object(i.a)(s.a.mark((function n(){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(O.a)({confirmation:"Do you really want to delete this file?"});case 2:if(!n.sent){n.next=8;break}return d((function(e){var n=Object(r.a)(e);return n.splice(t,1),n})),n.next=6,Object(p.a)(e.docId,e.storagePath);case 6:"error"in n.sent||x("File deleted!",{variant:"success"});case 8:case"end":return n.stop()}}),n)})))})})]}),Object(N.jsx)("div",{style:{paddingTop:"61%"},className:"bg-blue-300"}),Object(N.jsx)("div",{style:{paddingTop:"61%",backgroundImage:"url(".concat(e.url,")")},className:"bg-center bg-contain bg-no-repeat absolute left-0 top-0 z-10 w-full"}),Object(N.jsxs)("div",{className:"p-4 bg-gray-300",children:[Object(N.jsx)("div",{className:"line-clamp-1 font-medium mb-3",children:e.name}),Object(N.jsxs)("div",{className:"flex justify-between",children:[Object(N.jsx)("div",{children:k(e.size)}),Object(N.jsx)("div",{children:Object(N.jsx)("div",{className:"bg-orange-300 rounded px-2 py-0.5 text-sm",children:e.name.split(".").slice(-1).pop()})})]})]})]})},"asset-".concat(t))})),c.length?Object(N.jsx)(h.a,{limit:10,onValue:function(e){d((function(t){return[].concat(Object(r.a)(t),Object(r.a)(e))}))},fetcher:function(){return Object(p.b)({startAfter:c[c.length-1].uploaded_at,orderBy:"uploaded_at"})}}):null]})]})}}}]);
//# sourceMappingURL=15.d83c6033.chunk.js.map